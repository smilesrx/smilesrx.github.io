<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"smilesrx.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="虾米">
<meta property="og:type" content="website">
<meta property="og:title" content="逆玺之路">
<meta property="og:url" content="https://smilesrx.github.io/index.html">
<meta property="og:site_name" content="逆玺之路">
<meta property="og:description" content="虾米">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="CandyKing">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://smilesrx.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>逆玺之路</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">逆玺之路</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://smilesrx.github.io/2021/04/21/C++/C++%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD/%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CandyKing">
      <meta itemprop="description" content="虾米">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逆玺之路">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/04/21/C++/C++%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD/%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-21 20:23:45" itemprop="dateCreated datePublished" datetime="2021-04-21T20:23:45+08:00">2021-04-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-19 22:39:29" itemprop="dateModified" datetime="2020-10-19T22:39:29+08:00">2020-10-19</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="运算符重载"><a href="#运算符重载" class="headerlink" title="运算符重载"></a>运算符重载</h1><p>运算符重载，就是对已有的运算符重新进行定义，赋予其另一种功能，以适应不同的数据类型。</p>
<p><strong>它只是另一种函数调用的方式</strong></p>
<p>在c++中，可以定义一个处理类的新运算符。这种定义很像一个普通的函数定义，只是函数的名字由关键字operator及其紧跟的运算符组成。差别仅此而已。它像任何其他函数一样也是一个函数，当编译器遇到适当的模式时，就会调用这个函数。</p>
<p>定义重载的运算符就像定义函数，只是该函数的名字是operator@,这里的@代表了被重载的运算符。函数的参数中参数个数取决于两个因素：</p>
<ul>
<li>运算符是一元(一个参数)的还是二元(两个参数)；</li>
<li>运算符被定义为全局函数(对于一元是一个参数，对于二元是两个参数)还是成员函数(对于一元没有参数，对于二元是一个参数-此时该类的对象用作左耳参数)</li>
</ul>
<p><strong>注意</strong>：对于内置的数据类型的表达式的的运算符是不可能改变的。（例如想重载int类型数据的+号）</p>
<h2 id="1、重载加（-）号运算符实现两个对象相加"><a href="#1、重载加（-）号运算符实现两个对象相加" class="headerlink" title="1、重载加（+）号运算符实现两个对象相加"></a>1、重载加（+）号运算符实现两个对象相加</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Box</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Box</span>()&#123;&#125;</span><br><span class="line">	<span class="built_in">Box</span>(<span class="keyword">int</span> length,<span class="keyword">int</span> width,<span class="keyword">int</span> height):<span class="built_in">m_Length</span>(length),<span class="built_in">m_Width</span>(width),<span class="built_in">m_Height</span>(height)&#123;&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//设置长宽高</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Set_Length</span><span class="params">(<span class="keyword">int</span> length)</span></span>&#123;<span class="keyword">this</span>-&gt;m_Length=length;&#125; </span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Set_Width</span><span class="params">(<span class="keyword">int</span> width)</span></span>&#123;<span class="keyword">this</span>-&gt;m_Width=width;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Set_Height</span><span class="params">(<span class="keyword">int</span> height)</span></span>&#123;<span class="keyword">this</span>-&gt;m_Height=height;&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//获取长宽高</span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">Get_Length</span><span class="params">()</span></span>&#123;<span class="keyword">return</span> <span class="keyword">this</span>-&gt;m_Length;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">Get_Width</span><span class="params">()</span></span>&#123;<span class="keyword">return</span> <span class="keyword">this</span>-&gt;m_Width;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">Get_Height</span><span class="params">()</span></span>&#123;<span class="keyword">return</span> <span class="keyword">this</span>-&gt;m_Height;&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//求体积</span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">Get_Volume</span><span class="params">()</span></span>&#123;<span class="keyword">return</span> <span class="keyword">this</span>-&gt;m_Length*<span class="keyword">this</span>-&gt;m_Width*<span class="keyword">this</span>-&gt;m_Height;&#125; </span><br><span class="line">	</span><br><span class="line">	<span class="comment">//成员函数重载+号</span></span><br><span class="line">	Box <span class="keyword">operator</span>+(<span class="keyword">const</span> Box&amp; box1)</span><br><span class="line">	&#123;</span><br><span class="line">		Box box;</span><br><span class="line">		box.m_Length=<span class="keyword">this</span>-&gt;m_Length+box1.m_Length;</span><br><span class="line">		box.m_Width=<span class="keyword">this</span>-&gt;m_Width+box1.m_Width;</span><br><span class="line">		box.m_Height=<span class="keyword">this</span>-&gt;m_Height+box1.m_Height;</span><br><span class="line">		<span class="keyword">return</span> box;</span><br><span class="line">	&#125; </span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> m_Length;</span><br><span class="line">	<span class="keyword">int</span> m_Width;</span><br><span class="line">	<span class="keyword">int</span> m_Height; </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//全局函数重载+号</span></span><br><span class="line">Box <span class="keyword">operator</span>+(Box &amp;box1,Box &amp;box2)</span><br><span class="line">&#123;</span><br><span class="line">	Box box;</span><br><span class="line">	box.<span class="built_in">Set_Length</span>(box1.<span class="built_in">Get_Length</span>()+box2.<span class="built_in">Get_Length</span>());</span><br><span class="line">	box.<span class="built_in">Set_Width</span>(box1.<span class="built_in">Get_Width</span>()+box2.<span class="built_in">Get_Width</span>());</span><br><span class="line">	box.<span class="built_in">Set_Height</span>(box1.<span class="built_in">Get_Height</span>()+box2.<span class="built_in">Get_Height</span>());</span><br><span class="line">	<span class="keyword">return</span> box;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">Box <span class="title">box1</span><span class="params">(<span class="number">6</span>,<span class="number">7</span>,<span class="number">5</span>)</span></span>;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;长：&quot;</span>&lt;&lt;box1.<span class="built_in">Get_Length</span>()&lt;&lt;<span class="string">&quot;  宽：&quot;</span>&lt;&lt;box1.<span class="built_in">Get_Width</span>()&lt;&lt;<span class="string">&quot;  高：&quot;</span>&lt;&lt;box1.<span class="built_in">Get_Height</span>()&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;box1的体积为：&quot;</span>&lt;&lt;box1.<span class="built_in">Get_Volume</span>()&lt;&lt;endl&lt;&lt;endl;;</span><br><span class="line">	</span><br><span class="line">	<span class="function">Box <span class="title">box2</span><span class="params">(<span class="number">12</span>,<span class="number">13</span>,<span class="number">10</span>)</span></span>;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;长：&quot;</span>&lt;&lt;box2.<span class="built_in">Get_Length</span>()&lt;&lt;<span class="string">&quot;  宽：&quot;</span>&lt;&lt;box2.<span class="built_in">Get_Width</span>()&lt;&lt;<span class="string">&quot;  高：&quot;</span>&lt;&lt;box2.<span class="built_in">Get_Height</span>()&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;box2的体积为：&quot;</span>&lt;&lt;box2.<span class="built_in">Get_Volume</span>()&lt;&lt;endl&lt;&lt;endl;;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//box3=box1+box2 (成员函数） </span></span><br><span class="line">	Box box3=box1.<span class="keyword">operator</span>+(box2);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;长：&quot;</span>&lt;&lt;box3.<span class="built_in">Get_Length</span>()&lt;&lt;<span class="string">&quot;  宽：&quot;</span>&lt;&lt;box3.<span class="built_in">Get_Width</span>()&lt;&lt;<span class="string">&quot;  高：&quot;</span>&lt;&lt;box3.<span class="built_in">Get_Height</span>()&lt;&lt;endl; </span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;box3的体积为：&quot;</span>&lt;&lt;box3.<span class="built_in">Get_Volume</span>()&lt;&lt;endl&lt;&lt;endl;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//box4=box1+box2 (全局函数函数） </span></span><br><span class="line">	Box box4=box1+box2; </span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;长：&quot;</span>&lt;&lt;box4.<span class="built_in">Get_Length</span>()&lt;&lt;<span class="string">&quot;  宽：&quot;</span>&lt;&lt;box4.<span class="built_in">Get_Width</span>()&lt;&lt;<span class="string">&quot;  高：&quot;</span>&lt;&lt;box4.<span class="built_in">Get_Height</span>()&lt;&lt;endl; </span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;box4的体积为：&quot;</span>&lt;&lt;box4.<span class="built_in">Get_Volume</span>()&lt;&lt;endl&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2、可重载的运算符"><a href="#2、可重载的运算符" class="headerlink" title="2、可重载的运算符"></a>2、可重载的运算符</h2><table>
<thead>
<tr>
<th>双目算术运算符</th>
<th>+ (加)，-(减)，*(乘)，/(除)，% (取模)</th>
</tr>
</thead>
<tbody><tr>
<td>关系运算符</td>
<td>==(等于)，!= (不等于)，&lt; (小于)，&gt; (大于&gt;，&lt;=(小于等于)，&gt;=(大于等于)</td>
</tr>
<tr>
<td>逻辑运算符</td>
<td>||(逻辑或)，&amp;&amp;(逻辑与)，!(逻辑非)</td>
</tr>
<tr>
<td>单目运算符</td>
<td>+ (正)，-(负)，*(指针)，&amp;(取地址)</td>
</tr>
<tr>
<td>自增自减运算符</td>
<td>++(自增)，–(自减)</td>
</tr>
<tr>
<td>位运算符</td>
<td>| (按位或)，&amp; (按位与)，~(按位取反)，^(按位异或),，&lt;&lt; (左移)，&gt;&gt;(右移)</td>
</tr>
<tr>
<td>赋值运算符</td>
<td>=, +=, -=, *=, /= , % = , &amp;=, |=, ^=, &lt;&lt;=, &gt;&gt;=</td>
</tr>
<tr>
<td>空间申请与释放</td>
<td>new, delete, new[ ] , delete[]</td>
</tr>
<tr>
<td>其他运算符</td>
<td><strong>()</strong>(函数调用)，**-&gt;<strong>(成员访问)，</strong>,<strong>(逗号)，</strong>[]**(下标)</td>
</tr>
</tbody></table>
<h2 id="3、不可重载的运算符"><a href="#3、不可重载的运算符" class="headerlink" title="3、不可重载的运算符"></a>3、不可重载的运算符</h2><ul>
<li><code>.</code>：成员访问运算符</li>
<li><code>-&gt;</code>：成员指针访问运算符</li>
<li><code>::</code>：域运算符</li>
<li><code>sizeof</code>：长度运算符</li>
<li><code>?:</code>：条件运算符</li>
<li><code>#</code>： 预处理符号</li>
</ul>
<h1 id="运算符重载碰上友元函数"><a href="#运算符重载碰上友元函数" class="headerlink" title="运算符重载碰上友元函数"></a>运算符重载碰上友元函数</h1><p>友元函数是一个全局函数，和我们上例写的全局函数类似，只是友元函数可以访问某个类私有数据。</p>
<p>重载左移操作符(&lt;&lt;),使得<code>cout</code>可以输出对象</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&#123;</span></span><br><span class="line">	<span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream &amp;cout, Person &amp; person1);</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>()&#123;&#125;</span><br><span class="line">	<span class="built_in">Person</span>(string name,<span class="keyword">int</span> age):<span class="built_in">m_Age</span>(age),<span class="built_in">m_Name</span>(name)&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//成员函数重载 &lt;&lt; 运算符</span></span><br><span class="line">    <span class="comment">//ostream&amp; operator&lt;&lt;(ostream &amp; cout)</span></span><br><span class="line">    <span class="comment">//调用时---person1&lt;&lt;cout----位置不合适（故不用成员函数）</span></span><br><span class="line">	</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> m_Age;</span><br><span class="line">	string m_Name;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//全局函数做友元（为了访问私有属性）重载 &lt;&lt; 运算符</span></span><br><span class="line">ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream &amp;cout, Person &amp; person1)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//调用时----cout&lt;&lt;person1</span></span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;姓名：&quot;</span>&lt;&lt;person1.m_Name&lt;&lt;<span class="string">&quot;  年龄：&quot;</span>&lt;&lt;person1.m_Age;</span><br><span class="line">	<span class="keyword">return</span> cout;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">Person <span class="title">person1</span><span class="params">(<span class="string">&quot;晓晓&quot;</span>,<span class="number">22</span>)</span></span>;</span><br><span class="line">	cout&lt;&lt;person1&lt;&lt;endl; </span><br><span class="line">	<span class="function">Person <span class="title">person2</span><span class="params">(<span class="string">&quot;圆圆&quot;</span>,<span class="number">30</span>)</span></span>;</span><br><span class="line">	cout&lt;&lt;person2&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="自增自减-–-运算符重载"><a href="#自增自减-–-运算符重载" class="headerlink" title="自增自减(++/–)运算符重载"></a>自增自减(++/–)运算符重载</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Time</span>&#123;</span></span><br><span class="line">	<span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream &amp; cout,Time time);</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Time</span>()&#123;&#125;</span><br><span class="line">	<span class="built_in">Time</span>(<span class="keyword">int</span> hour,<span class="keyword">int</span> minute):<span class="built_in">m_Hour</span>(hour),<span class="built_in">m_Minute</span>(minute)&#123;&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//前置++</span></span><br><span class="line">	Time&amp; <span class="keyword">operator</span>++()&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_Minute++;</span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">this</span>-&gt;m_Minute==<span class="number">60</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">this</span>-&gt;m_Minute=<span class="number">0</span>;</span><br><span class="line">			<span class="keyword">this</span>-&gt;m_Hour++;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>; </span><br><span class="line">	&#125; </span><br><span class="line">	</span><br><span class="line">	<span class="comment">//后置++ </span></span><br><span class="line">	Time <span class="keyword">operator</span>++(<span class="keyword">int</span>)&#123; <span class="comment">//占位参数用于函数重载</span></span><br><span class="line">		Time *tmp=<span class="keyword">this</span>;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_Minute++;</span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">this</span>-&gt;m_Minute==<span class="number">60</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">this</span>-&gt;m_Minute=<span class="number">0</span>;</span><br><span class="line">			<span class="keyword">this</span>-&gt;m_Hour++;</span><br><span class="line">		&#125;		<span class="keyword">return</span> *tmp;		</span><br><span class="line">	&#125; </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> m_Hour;</span><br><span class="line">	<span class="keyword">int</span> m_Minute;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream &amp; cout,Time time)</span><br><span class="line">&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;H:&quot;</span>&lt;&lt;time.m_Hour&lt;&lt;<span class="string">&quot; M:&quot;</span>&lt;&lt;time.m_Minute;</span><br><span class="line">	<span class="keyword">return</span> cout; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">Time <span class="title">t1</span><span class="params">(<span class="number">10</span>,<span class="number">25</span>)</span></span>;</span><br><span class="line">	<span class="comment">//t1++;</span></span><br><span class="line">	cout&lt;&lt;t1++&lt;&lt;endl;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//++t1;</span></span><br><span class="line">	cout&lt;&lt;++t1&lt;&lt;endl; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>前缀和后缀形式语义上是等价的，输入工作量也相当，只是效率经常会略高一些，由于前缀形式少创建了一个临时对象。</p>
<p>前置++返回的是引用</p>
<p>后置++返回的是值</p>
<h1 id="重载指针运算符"><a href="#重载指针运算符" class="headerlink" title="重载指针运算符"></a>重载指针运算符</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>()&#123;&#125;</span><br><span class="line">	<span class="built_in">Person</span>(string name,<span class="keyword">int</span> age):<span class="built_in">m_Name</span>(name),<span class="built_in">m_Age</span>(age)&#123;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;姓名：&quot;</span>&lt;&lt;<span class="keyword">this</span>-&gt;m_Name&lt;&lt;<span class="string">&quot;  年龄：&quot;</span>&lt;&lt;<span class="keyword">this</span>-&gt;m_Age&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> m_Age;</span><br><span class="line">	string m_Name;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SmartPoint</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">SmartPoint</span>(Person *person)&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_Person=person;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//重载 -&gt;</span></span><br><span class="line">	Person* <span class="keyword">operator</span>-&gt;()&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>-&gt;m_Person;</span><br><span class="line">	&#125; </span><br><span class="line">	</span><br><span class="line">	<span class="comment">//重载 *</span></span><br><span class="line">	Person <span class="keyword">operator</span>*()&#123;</span><br><span class="line">		<span class="keyword">return</span> *(<span class="keyword">this</span>-&gt;m_Person);</span><br><span class="line">	&#125; </span><br><span class="line">	</span><br><span class="line">	~<span class="built_in">SmartPoint</span>()&#123;</span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">this</span>-&gt;m_Person)&#123;</span><br><span class="line">			<span class="keyword">delete</span> <span class="keyword">this</span>-&gt;m_Person;</span><br><span class="line">			<span class="keyword">this</span>-&gt;m_Person=<span class="literal">NULL</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	Person *m_Person;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Person *person=<span class="keyword">new</span> <span class="built_in">Person</span>(<span class="string">&quot;关羽&quot;</span>,<span class="number">65</span>);</span><br><span class="line">	person-&gt;<span class="built_in">Print</span>();</span><br><span class="line">	(*person).<span class="built_in">Print</span>();</span><br><span class="line">	</span><br><span class="line">	<span class="function">SmartPoint <span class="title">sp</span><span class="params">(<span class="keyword">new</span> Person(<span class="string">&quot;奈奎斯特&quot;</span>,<span class="number">88</span>))</span></span>;</span><br><span class="line">	sp-&gt;<span class="built_in">Print</span>();</span><br><span class="line">	(*sp).<span class="built_in">Print</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="赋值-运算符重载"><a href="#赋值-运算符重载" class="headerlink" title="赋值(=)运算符重载"></a>赋值(=)运算符重载</h1><p>编译器会默认个一个类添加4个函数：默认构造、析构 、  拷贝构造（值拷贝）  、 operator=（值拷贝）</p>
<p>如果类中有属性创建在堆区，利用编译器提供的 = 赋值运算就会出现 堆区内存重复释放的问题</p>
<p>解决方案：利用深拷贝  重载 =运算符</p>
<p><code>Person(const Person &amp;p)</code></p>
<p><code>Person&amp; operator=( const Person &amp;p)</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&#123;</span></span><br><span class="line">	<span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; cout,<span class="keyword">const</span> Person&amp; person)&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;ID:&quot;</span> &lt;&lt; person.mID &lt;&lt; <span class="string">&quot; Age:&quot;</span> &lt;&lt; person.mAge &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">return</span> cout;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>(<span class="keyword">int</span> id,<span class="keyword">int</span> age)&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;mID = id;</span><br><span class="line">		<span class="keyword">this</span>-&gt;mAge = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//重载赋值运算符</span></span><br><span class="line">	Person&amp; <span class="keyword">operator</span>=(<span class="keyword">const</span> Person&amp; person)&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;mID = person.mID;</span><br><span class="line">		<span class="keyword">this</span>-&gt;mAge = person.mAge;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> mID;</span><br><span class="line">	<span class="keyword">int</span> mAge;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1. =号混淆的地方</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="function">Person <span class="title">person1</span><span class="params">(<span class="number">10</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line">	Person person2 = person1; <span class="comment">//调用拷贝构造</span></span><br><span class="line">	<span class="comment">//一个对象被创建时，则必须初始化，也就是调用构造函数</span></span><br><span class="line">	<span class="comment">//上述例子由于person2还没有初始化，所以会调用构造函数</span></span><br><span class="line">	<span class="comment">//由于person2是从已有的person1来创建的，所以只有一个选择</span></span><br><span class="line">	<span class="comment">//就是调用拷贝构造函数</span></span><br><span class="line">	person2 = person1; <span class="comment">//调用operator=函数</span></span><br><span class="line">	<span class="comment">//由于person2已经创建，不需要再调用构造函数，这时候调用的是重载的赋值运算符</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2. 赋值重载案例</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="function">Person <span class="title">person1</span><span class="params">(<span class="number">20</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">person2</span><span class="params">(<span class="number">30</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;person1:&quot;</span> &lt;&lt; person1;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;person2:&quot;</span> &lt;&lt; person2;</span><br><span class="line">	person2 = person1;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;person2:&quot;</span> &lt;&lt; person2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：当准备给两个相同对象赋值时，应该首先检查一下这个对象是否对自身赋值了</p>
<p>对于本例来讲，无论如何执行这些赋值运算都是无害的，但如果对类的实现进行修改（类中指针），那么将会出现差异；</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person2</span>&#123;</span></span><br><span class="line">	<span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; os, <span class="keyword">const</span> Person2&amp; person)&#123;</span><br><span class="line">		os &lt;&lt; <span class="string">&quot;Name:&quot;</span> &lt;&lt; person.pName &lt;&lt; <span class="string">&quot; ID:&quot;</span> &lt;&lt; person.mID &lt;&lt; <span class="string">&quot; Age:&quot;</span> &lt;&lt; person.mAge &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">return</span> os;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person2</span>(<span class="keyword">char</span>* name,<span class="keyword">int</span> id, <span class="keyword">int</span> age)&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;pName = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="built_in">strlen</span>(name) + <span class="number">1</span>];</span><br><span class="line">        <span class="built_in">strcpy</span>(<span class="keyword">this</span>-&gt;pName, name);</span><br><span class="line">        <span class="keyword">this</span>-&gt;mID = id;</span><br><span class="line">        <span class="keyword">this</span>-&gt;mAge = age;</span><br><span class="line">        </span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//深拷贝</span></span><br><span class="line">    <span class="built_in">Person2</span>(<span class="keyword">const</span> Person2 &amp;person)&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;pName = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="built_in">strlen</span>(person.pName) + <span class="number">1</span>];</span><br><span class="line">        <span class="built_in">strcpy</span>(<span class="keyword">this</span>-&gt;pName,person.pName);</span><br><span class="line">        <span class="keyword">this</span>-&gt;mID = person.mID;</span><br><span class="line">        <span class="keyword">this</span>-&gt;mAge = person.mAge;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;调用深拷贝构造&quot;</span>&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">	<span class="comment">//重载赋值运算符</span></span><br><span class="line">	Person2&amp; <span class="keyword">operator</span>=(<span class="keyword">const</span> Person2&amp; person)&#123;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//注意:由于当前对象已经创建完毕，那么就有可能pName指向堆内存</span></span><br><span class="line">		<span class="comment">//这个时候如果直接赋值，会导致内存没有及时释放</span></span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>-&gt;pName != <span class="literal">NULL</span>)</span><br><span class="line">			<span class="keyword">delete</span>[] <span class="keyword">this</span>-&gt;pName;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">this</span>-&gt;pName = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="built_in">strlen</span>(person.pName) + <span class="number">1</span>];</span><br><span class="line">		<span class="built_in">strcpy</span>(<span class="keyword">this</span>-&gt;pName,person.pName);</span><br><span class="line">		<span class="keyword">this</span>-&gt;mID = person.mID;</span><br><span class="line">		<span class="keyword">this</span>-&gt;mAge = person.mAge;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;调用operator=重载&quot;</span>&lt;&lt;endl;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">Person2</span>()&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>-&gt;pName != <span class="literal">NULL</span>)&#123;</span><br><span class="line">			<span class="keyword">delete</span>[] <span class="keyword">this</span>-&gt;pName;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">char</span>* pName;</span><br><span class="line">	<span class="keyword">int</span> mID;</span><br><span class="line">	<span class="keyword">int</span> mAge;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">Person2 <span class="title">person1</span><span class="params">(<span class="string">&quot;John&quot;</span>,<span class="number">20</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line">	<span class="function">Person2 <span class="title">person2</span><span class="params">(<span class="string">&quot;Edward&quot;</span>,<span class="number">30</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;person1:&quot;</span> &lt;&lt; person1;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;person2:&quot;</span> &lt;&lt; person2;</span><br><span class="line">    Person2 person3=person1;   <span class="comment">//深拷贝构造</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;person2:&quot;</span> &lt;&lt; person2;</span><br><span class="line">	person2 = person1;   <span class="comment">//operator=重载</span></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;person2:&quot;</span> &lt;&lt; person2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="等于和不等于-、-运算符重载"><a href="#等于和不等于-、-运算符重载" class="headerlink" title="等于和不等于(==、!=)运算符重载"></a>等于和不等于(==、!=)运算符重载</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Complex</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Complex</span>(<span class="keyword">char</span>* name,<span class="keyword">int</span> id,<span class="keyword">int</span> age)&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;pName = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="built_in">strlen</span>(name) + <span class="number">1</span>];</span><br><span class="line">		<span class="built_in">strcpy</span>(<span class="keyword">this</span>-&gt;pName, name);</span><br><span class="line">		<span class="keyword">this</span>-&gt;mID = id;</span><br><span class="line">		<span class="keyword">this</span>-&gt;mAge = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//重载==号操作符</span></span><br><span class="line">	<span class="keyword">bool</span> <span class="keyword">operator</span>==(<span class="keyword">const</span> Complex&amp; complex)&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">strcmp</span>(<span class="keyword">this</span>-&gt;pName,complex.pName) == <span class="number">0</span> &amp;&amp; <span class="keyword">this</span>-&gt;mID == complex.mID &amp;&amp; <span class="keyword">this</span>-&gt;mAge == complex.mAge)</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//重载!=操作符</span></span><br><span class="line">	<span class="keyword">bool</span> <span class="keyword">operator</span>!=(<span class="keyword">const</span> Complex&amp; complex)&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">strcmp</span>(<span class="keyword">this</span>-&gt;pName, complex.pName) != <span class="number">0</span> || <span class="keyword">this</span>-&gt;mID != complex.mID || <span class="keyword">this</span>-&gt;mAge != complex.mAge)</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">Complex</span>()&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>-&gt;pName != <span class="literal">NULL</span>)&#123;</span><br><span class="line">			<span class="keyword">delete</span>[] <span class="keyword">this</span>-&gt;pName;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">char</span>* pName;</span><br><span class="line">	<span class="keyword">int</span> mID;</span><br><span class="line">	<span class="keyword">int</span> mAge;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">Complex <span class="title">complex1</span><span class="params">(<span class="string">&quot;aaa&quot;</span>, <span class="number">10</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line">	<span class="function">Complex <span class="title">complex2</span><span class="params">(<span class="string">&quot;aaa&quot;</span>, <span class="number">10</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line">	<span class="function">Complex <span class="title">complex3</span><span class="params">(<span class="string">&quot;bbb&quot;</span>, <span class="number">10</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line">	<span class="keyword">if</span> (complex1 == complex2)&#123; cout &lt;&lt; <span class="string">&quot;相等!&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line">	<span class="keyword">if</span> (complex1 != complex3)&#123; cout &lt;&lt; <span class="string">&quot;不相等!&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="函数调用符号-重载"><a href="#函数调用符号-重载" class="headerlink" title="函数调用符号( )重载"></a>函数调用符号( )重载</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Complex</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> x + y;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> x + y;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Complex complex;</span><br><span class="line">	cout &lt;&lt; complex.<span class="built_in">Add</span>(<span class="number">10</span>,<span class="number">20</span>) &lt;&lt; endl;</span><br><span class="line">	<span class="comment">//对象当做函数来调用</span></span><br><span class="line">	cout &lt;&lt; <span class="built_in">complex</span>(<span class="number">10</span>, <span class="number">20</span>) &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//匿名函数对象 特点：当前行执行完立即释放</span></span><br><span class="line">    cout &lt;&lt; <span class="built_in">Complex</span>()(<span class="number">1</span>, <span class="number">1</span>) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="不要重载-amp-amp-、-短路特性不能展现"><a href="#不要重载-amp-amp-、-短路特性不能展现" class="headerlink" title="不要重载&amp;&amp;、||  (短路特性不能展现)"></a>不要重载&amp;&amp;、||  (短路特性不能展现)</h1><p>原因：无法实现短路特性</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Complex</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Complex</span>(<span class="keyword">int</span> flag)&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;flag = flag;</span><br><span class="line">	&#125;</span><br><span class="line">	Complex&amp; <span class="keyword">operator</span>+=(Complex&amp; complex)&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;flag = <span class="keyword">this</span>-&gt;flag + complex.flag;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">bool</span> <span class="keyword">operator</span>&amp;&amp;(Complex&amp; complex)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>-&gt;flag &amp;&amp; complex.flag;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="keyword">int</span> flag;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">Complex <span class="title">complex1</span><span class="params">(<span class="number">0</span>)</span></span>;  <span class="comment">//flag 0 </span></span><br><span class="line">	<span class="function">Complex <span class="title">complex2</span><span class="params">(<span class="number">1</span>)</span></span>;  <span class="comment">//flag 1</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//原来情况，应该从左往右运算，左边为假，则退出运算，结果为假</span></span><br><span class="line">	<span class="comment">//这边却是，先运算（complex1+complex2），导致，complex1的flag变为complex1+complex2的值， complex1.flag = 1</span></span><br><span class="line">	<span class="comment">// 1 &amp;&amp; 1</span></span><br><span class="line">	<span class="comment">//complex1.operator&amp;&amp;(complex1.operator+=(complex2))</span></span><br><span class="line">	<span class="keyword">if</span> (complex1 &amp;&amp; (complex1 += complex2))&#123;   </span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;真!&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span>&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;假!&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="符号重载总结"><a href="#符号重载总结" class="headerlink" title="符号重载总结"></a>符号重载总结</h1><ul>
<li><code>=</code> <code>[ ]</code> <code>( )</code> <code>-&gt;</code> 操作符只能通过成员函数进行重载</li>
<li><code>&lt;&lt;</code> 和<code>&gt;&gt;</code>只能通过全局函数配合友元函数进行重载 </li>
<li>不要重载 **&amp;&amp;**和 <strong>||</strong> 操作符，因为无法实现短路规则</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://smilesrx.github.io/2021/04/21/C++/C++%E5%8F%8B%E5%85%83/C++%E5%8F%8B%E5%85%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CandyKing">
      <meta itemprop="description" content="虾米">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逆玺之路">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/04/21/C++/C++%E5%8F%8B%E5%85%83/C++%E5%8F%8B%E5%85%83/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-21 20:23:45" itemprop="dateCreated datePublished" datetime="2021-04-21T20:23:45+08:00">2021-04-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-18 17:54:39" itemprop="dateModified" datetime="2020-10-18T17:54:39+08:00">2020-10-18</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="友元"><a href="#友元" class="headerlink" title="友元"></a>友元</h1><p>类的主要特点之一是数据隐藏，即类的私有成员无法在类的外部(作用域之外)访问。但是，有时候需要在类的外部访问类的私有成员</p>
<p>解决方法：使用友元函数</p>
<p>友元函数：一种特权函数，c++允许这个特权函数访问私有成员</p>
<p>可以把一个全局函数、某个类中的成员函数、甚至整个类声明为友元</p>
<h1 id="友元语法"><a href="#友元语法" class="headerlink" title="友元语法"></a>友元语法</h1><ul>
<li><p><code>friend</code>关键字只出现在声明处</p>
</li>
<li><p>其他类、类成员函数、全局函数都可声明为友元</p>
</li>
<li><p>友元函数不是类的成员，不带this指针</p>
</li>
<li><p>友元函数可访问对象任意成员属性，包括私有属性</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//房间类 </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Home</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//人类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>(string name):<span class="built_in">m_Name</span>(name)&#123;&#125; </span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">LookAtBedroom</span><span class="params">(Home &amp;home)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">LookAtLivingroom</span><span class="params">(Home &amp;home)</span></span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	string m_Name;</span><br><span class="line">&#125;; </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Home</span>&#123;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line"><span class="comment">//类成员函数 做友元 </span></span><br><span class="line"><span class="function"><span class="keyword">friend</span> <span class="keyword">void</span> <span class="title">Person::LookAtLivingroom</span><span class="params">(Home &amp;home)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">friend</span> <span class="keyword">void</span> <span class="title">Person::LookAtBedroom</span><span class="params">(Home &amp;home)</span></span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="comment">//类 做友元 </span></span><br><span class="line"><span class="keyword">friend</span> Person;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="comment">//全局函数 做友元 </span></span><br><span class="line"><span class="function"><span class="keyword">friend</span> <span class="keyword">void</span> <span class="title">CleanBedroom</span><span class="params">(string name)</span></span>; </span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Home</span>()&#123;</span><br><span class="line">		m_Livingroom=<span class="string">&quot;客厅&quot;</span>;</span><br><span class="line">		m_Bedroom=<span class="string">&quot;卧室&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	string m_Livingroom;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	string m_Bedroom;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Person::LookAtBedroom</span><span class="params">(Home &amp;home)</span></span>&#123;</span><br><span class="line">	cout&lt;&lt;m_Name&lt;&lt;<span class="string">&quot;正在我的&quot;</span>&lt;&lt;home.m_Bedroom&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Person::LookAtLivingroom</span><span class="params">(Home &amp;home)</span></span>&#123;</span><br><span class="line">	cout&lt;&lt;m_Name&lt;&lt;<span class="string">&quot;正在我家&quot;</span>&lt;&lt;home.m_Livingroom&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CleanBedroom</span><span class="params">(string name)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;name&lt;&lt;<span class="string">&quot;正在打扫我的卧室&quot;</span>&lt;&lt;endl;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">Person <span class="title">myfriend</span><span class="params">(<span class="string">&quot;强子&quot;</span>)</span></span>;</span><br><span class="line">	Home myhome;</span><br><span class="line">	myfriend.<span class="built_in">LookAtLivingroom</span>(myhome);</span><br><span class="line">	myfriend.<span class="built_in">LookAtBedroom</span>(myhome);</span><br><span class="line">	<span class="built_in">CleanBedroom</span>(<span class="string">&quot;李阿姨&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="友元注意事项"><a href="#友元注意事项" class="headerlink" title="友元注意事项"></a>友元注意事项</h1><ul>
<li>友元关系不能被继承。</li>
<li>友元关系是单向的，类A是类B的朋友，但类B不一定是类A的朋友。</li>
<li>友元关系不具有传递性。类B是类A的朋友，类C是类B的朋友，但类C不一定是类A的朋友</li>
</ul>
<h1 id="电视机和遥控器的案例"><a href="#电视机和遥控器的案例" class="headerlink" title="电视机和遥控器的案例"></a>电视机和遥控器的案例</h1><p>电视机类，电视机有开机和关机状态，有音量，有频道，提供音量操作的方法，频道操作的方法。由于电视机只能逐一调整频道，不能指定频道，增加遥控类，遥控类除了拥有电视机已有的功能，再增加根据输入调台功能。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Remote</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Television</span>&#123;</span></span><br><span class="line"><span class="keyword">friend</span> Remote;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="class"><span class="keyword">enum</span>&#123;</span> off,on &#125;; <span class="comment">//电视状态</span></span><br><span class="line">	<span class="class"><span class="keyword">enum</span>&#123;</span> minVol,maxVol = <span class="number">100</span> &#125;; <span class="comment">//音量从0到100</span></span><br><span class="line">	<span class="class"><span class="keyword">enum</span>&#123;</span> minChannel = <span class="number">1</span>,maxChannel = <span class="number">255</span> &#125;; <span class="comment">//频道从1到255</span></span><br><span class="line">	</span><br><span class="line">	<span class="built_in">Television</span>()&#123;  <span class="comment">//电视机初始状态 </span></span><br><span class="line">		m_State=off;</span><br><span class="line">		m_Volume=minVol;</span><br><span class="line">		m_Channel=minChannel;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//电视机开机-关机 </span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">OnOrOff</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_State=m_State? off:on;</span><br><span class="line">	&#125; </span><br><span class="line">	</span><br><span class="line">	<span class="comment">//调节音量 </span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">VolumeUp</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(!<span class="keyword">this</span>-&gt;m_State||<span class="keyword">this</span>-&gt;m_Volume&gt;maxVol)</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_Volume+=<span class="number">5</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">VolumeDown</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(!<span class="keyword">this</span>-&gt;m_State||<span class="keyword">this</span>-&gt;m_Volume&lt;minVol)</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_Volume-=<span class="number">5</span>; </span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//更换电视频道</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">ChannelUp</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(!<span class="keyword">this</span>-&gt;m_State||<span class="keyword">this</span>-&gt;m_Channel&gt;maxChannel)</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_Channel++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">ChannelDown</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(!<span class="keyword">this</span>-&gt;m_State||<span class="keyword">this</span>-&gt;m_Channel&lt;minChannel)</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_Channel--;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//展示当前电视状态信息</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">ShowTeleState</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;电视机状态：&quot;</span>&lt;&lt;<span class="keyword">this</span>-&gt;m_State&lt;&lt;endl;</span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">this</span>-&gt;m_State)</span><br><span class="line">		&#123;</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;电视机音量：&quot;</span>&lt;&lt;<span class="keyword">this</span>-&gt;m_Volume&lt;&lt;endl;</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;电视机频道：&quot;</span>&lt;&lt;<span class="keyword">this</span>-&gt;m_Channel&lt;&lt;endl;</span><br><span class="line">		&#125; </span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> m_State;     <span class="comment">//电视状态，开机，还是关机</span></span><br><span class="line">	<span class="keyword">int</span> m_Volume;    <span class="comment">//电视机音量</span></span><br><span class="line">	<span class="keyword">int</span> m_Channel;   <span class="comment">//电视频道</span></span><br><span class="line">	</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Remote</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Remote</span>(Television* television)&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;pTelevision=television;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//开、关机 </span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">OnOrOff</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;pTelevision-&gt;<span class="built_in">OnOrOff</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//调节音量 </span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">VolumeUp</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;pTelevision-&gt;<span class="built_in">VolumeUp</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">VolumDown</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;pTelevision-&gt;<span class="built_in">VolumeDown</span>();</span><br><span class="line">	&#125; </span><br><span class="line">	<span class="comment">//调节频道</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">ChannelUp</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;pTelevision-&gt;<span class="built_in">ChannelUp</span>();</span><br><span class="line">	&#125; </span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">ChannelDown</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;pTelevision-&gt;<span class="built_in">ChannelDown</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">ShowTeleState</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;pTelevision-&gt;<span class="built_in">ShowTeleState</span>();</span><br><span class="line">	&#125; </span><br><span class="line">	<span class="comment">//按输入调节频道</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">SetChannel</span><span class="params">(<span class="keyword">int</span> channel)</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(channel&lt;<span class="keyword">this</span>-&gt;pTelevision-&gt;minChannel||channel&gt;<span class="keyword">this</span>-&gt;pTelevision-&gt;maxChannel)</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		<span class="keyword">this</span>-&gt;pTelevision-&gt;m_Channel=channel; </span><br><span class="line">	&#125;</span><br><span class="line">	 	</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	Television* pTelevision;</span><br><span class="line">	</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Television television;</span><br><span class="line">	television.<span class="built_in">ShowTeleState</span>();</span><br><span class="line">	television.<span class="built_in">OnOrOff</span>(); <span class="comment">//开机</span></span><br><span class="line">	television.<span class="built_in">VolumeUp</span>(); <span class="comment">//增加音量+1</span></span><br><span class="line">	television.<span class="built_in">VolumeUp</span>(); <span class="comment">//增加音量+1</span></span><br><span class="line">	television.<span class="built_in">VolumeUp</span>(); <span class="comment">//增加音量+1</span></span><br><span class="line">	television.<span class="built_in">VolumeUp</span>(); <span class="comment">//增加音量+1</span></span><br><span class="line">	television.<span class="built_in">ChannelUp</span>(); <span class="comment">//频道+1</span></span><br><span class="line">	television.<span class="built_in">ChannelUp</span>(); <span class="comment">//频道+1</span></span><br><span class="line">	television.<span class="built_in">ShowTeleState</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//创建电视</span></span><br><span class="line">	Television television;</span><br><span class="line">	<span class="comment">//创建遥控</span></span><br><span class="line">	<span class="function">Remote <span class="title">remote</span><span class="params">(&amp;television)</span></span>;</span><br><span class="line">	remote.<span class="built_in">OnOrOff</span>();      <span class="comment">//开机 </span></span><br><span class="line">	remote.<span class="built_in">ChannelUp</span>();   <span class="comment">//频道+1</span></span><br><span class="line">	remote.<span class="built_in">ChannelUp</span>();   <span class="comment">//频道+1</span></span><br><span class="line">	remote.<span class="built_in">VolumeUp</span>();    <span class="comment">//音量+1</span></span><br><span class="line">	remote.<span class="built_in">VolumeUp</span>();    <span class="comment">//音量+1</span></span><br><span class="line">	remote.<span class="built_in">VolumeUp</span>();    <span class="comment">//音量+1</span></span><br><span class="line">	remote.<span class="built_in">ShowTeleState</span>();</span><br><span class="line">	<span class="comment">//remote.OnOrOff();     //关机 </span></span><br><span class="line">	remote.<span class="built_in">SetChannel</span>(<span class="number">50</span>);</span><br><span class="line">	remote.<span class="built_in">ShowTeleState</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="数组类封装"><a href="#数组类封装" class="headerlink" title="数组类封装"></a>数组类封装</h1><p><strong>MyArray.h</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> MYARRAY_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MYARRAY_H</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyArray</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">//无参构造函数，用户没有指定容量，则初始化为100</span></span><br><span class="line">	<span class="built_in">MyArray</span>();</span><br><span class="line">	<span class="comment">//有参构造函数，用户指定容量初始化</span></span><br><span class="line">	<span class="built_in">MyArray</span>(<span class="keyword">int</span> capacity); </span><br><span class="line">	<span class="comment">//用户操作接口</span></span><br><span class="line">	<span class="comment">//根据位置添加元素</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">SetData</span><span class="params">(<span class="keyword">int</span> pos, <span class="keyword">int</span> val)</span></span>;</span><br><span class="line">	<span class="comment">//获得指定位置数据</span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">GetData</span><span class="params">(<span class="keyword">int</span> pos)</span></span>;</span><br><span class="line">	<span class="comment">//尾插法</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">PushBack</span><span class="params">(<span class="keyword">int</span> val)</span></span>;</span><br><span class="line">	<span class="comment">//获得长度</span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">GetLength</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="comment">//打印数组</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">()</span></span>; </span><br><span class="line">	<span class="comment">//析构函数，释放数组空间</span></span><br><span class="line">	~<span class="built_in">MyArray</span>();</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> m_Capacity; <span class="comment">//数组一共可容纳多少个元素</span></span><br><span class="line">	<span class="keyword">int</span> m_Size; <span class="comment">//当前有多少个元素</span></span><br><span class="line">	<span class="keyword">int</span>* pAdress; <span class="comment">//指向存储数据的空间</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<p><strong>MyArray.cpp</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">MyArray::<span class="built_in">MyArray</span>()&#123;</span><br><span class="line">	<span class="keyword">this</span>-&gt;m_Capacity=<span class="number">100</span>;</span><br><span class="line">	<span class="keyword">this</span>-&gt;pAdress=<span class="keyword">new</span> <span class="keyword">int</span>[<span class="keyword">this</span>-&gt;m_Capacity];	</span><br><span class="line">	<span class="keyword">this</span>-&gt;m_Size=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyArray::<span class="built_in">MyArray</span>(<span class="keyword">int</span> capacity)&#123;</span><br><span class="line">	<span class="keyword">this</span>-&gt;m_Capacity=capacity;</span><br><span class="line">	<span class="keyword">this</span>-&gt;pAdress=<span class="keyword">new</span> <span class="keyword">int</span>[<span class="keyword">this</span>-&gt;m_Capacity];</span><br><span class="line">	<span class="keyword">this</span>-&gt;m_Size=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MyArray::SetData</span><span class="params">(<span class="keyword">int</span> pos,<span class="keyword">int</span> val)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(pos&lt;<span class="number">0</span>||pos&gt;<span class="keyword">this</span>-&gt;m_Capacity<span class="number">-1</span>||<span class="keyword">this</span>-&gt;m_Size&gt;<span class="keyword">this</span>-&gt;m_Capacity)</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="keyword">this</span>-&gt;m_Size<span class="number">-1</span>;i&gt;=pos;i--)</span><br><span class="line">	&#123;</span><br><span class="line">		pAdress[i+<span class="number">1</span>]=pAdress[i];</span><br><span class="line">	&#125;</span><br><span class="line">	pAdress[pos]=val;</span><br><span class="line">	<span class="keyword">this</span>-&gt;m_Size++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MyArray::GetData</span><span class="params">(<span class="keyword">int</span> pos)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(pos&lt;<span class="number">0</span>||pos&gt;<span class="keyword">this</span>-&gt;m_Capacity<span class="number">-1</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">return</span> pAdress[pos];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MyArray::PushBack</span><span class="params">(<span class="keyword">int</span> val)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(<span class="keyword">this</span>-&gt;m_Size&gt;<span class="keyword">this</span>-&gt;m_Capacity)</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	pAdress[<span class="keyword">this</span>-&gt;m_Size]=val;</span><br><span class="line">	<span class="keyword">this</span>-&gt;m_Size++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MyArray::GetLength</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">this</span>-&gt;m_Size;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MyArray::Print</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="keyword">this</span>-&gt;m_Size;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;pAdress[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyArray::~<span class="built_in">MyArray</span>()&#123;</span><br><span class="line">	<span class="keyword">if</span>(<span class="keyword">this</span>-&gt;pAdress)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">delete</span>[] pAdress;</span><br><span class="line">		pAdress=<span class="literal">NULL</span>;</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>TestMyArray.cpp</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">MyArray <span class="title">myarray</span><span class="params">(<span class="number">50</span>)</span></span>;</span><br><span class="line">	<span class="comment">//数组中插入元素</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">		<span class="comment">//尾插法</span></span><br><span class="line">		myarray.<span class="built_in">PushBack</span>(i);</span><br><span class="line">		<span class="comment">//myarray.SetData(i, i);</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//打印数组中元素</span></span><br><span class="line">	myarray.<span class="built_in">Print</span>();</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//按位置插入 </span></span><br><span class="line">	myarray.<span class="built_in">SetData</span>(<span class="number">5</span>,<span class="number">40</span>);</span><br><span class="line">	myarray.<span class="built_in">Print</span>();</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//按位置查找</span></span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;第8个元素为：&quot;</span>&lt;&lt;myarray.<span class="built_in">GetData</span>(<span class="number">8</span>)&lt;&lt;endl; </span><br><span class="line">	</span><br><span class="line">	<span class="comment">//获取长度</span></span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;数组长度为：&quot;</span>&lt;&lt;myarray.<span class="built_in">GetLength</span>()&lt;&lt;endl; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://smilesrx.github.io/2021/04/21/C++/C++%E5%BC%95%E7%94%A8/C++%E5%BC%95%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CandyKing">
      <meta itemprop="description" content="虾米">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逆玺之路">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/04/21/C++/C++%E5%BC%95%E7%94%A8/C++%E5%BC%95%E7%94%A8/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-21 20:23:45" itemprop="dateCreated datePublished" datetime="2021-04-21T20:23:45+08:00">2021-04-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-10 20:24:59" itemprop="dateModified" datetime="2020-10-10T20:24:59+08:00">2020-10-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="引用基本用法—给变量取别名"><a href="#引用基本用法—给变量取别名" class="headerlink" title="引用基本用法—给变量取别名"></a>引用基本用法—给变量取别名</h1><ul>
<li>变量名实际上是一块连续内存单元的别名，是一个标号（门牌号）</li>
<li>程序中通过变量来申请并命名内存空间</li>
<li>通过变量的名字也可以使用内存空间</li>
</ul>
<h2 id="1、引用的基本语法"><a href="#1、引用的基本语法" class="headerlink" title="1、引用的基本语法"></a>1、引用的基本语法</h2><p>类型名 引用(&amp;)  别名=变量名</p>
<h2 id="2、引用注意事项"><a href="#2、引用注意事项" class="headerlink" title="2、引用注意事项"></a>2、引用注意事项</h2><ol>
<li><p>&amp;在此不是取地址运算，而是起标识作用</p>
</li>
<li><p>必须在申明引用变量时进行初始化</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> &amp;m;   <span class="comment">//报错--必须初始化</span></span><br></pre></td></tr></table></figure></li>
<li><p>引用初始化后不能修改（引用本质—常量指针–&gt;指向不可以修改）</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a=<span class="number">15</span>;</span><br><span class="line"><span class="keyword">int</span> b=<span class="number">20</span>;</span><br><span class="line"><span class="keyword">int</span> &amp;c=a;</span><br><span class="line">c=b;    <span class="comment">//出错</span></span><br></pre></td></tr></table></figure></li>
<li><p>不能有NULL引用，必须保证引用和一块合法的内存相关联</p>
</li>
<li><p>可以建立对数组的引用</p>
<ul>
<li><p>直接建立引用</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> arr[<span class="number">10</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="built_in"><span class="keyword">int</span></span>(&amp;ARR)[<span class="number">10</span>]=arr;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">&#123;</span><br><span class="line">    ARR[i]=i+<span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">10</span>;j++)</span><br><span class="line">&#123;</span><br><span class="line">    cout&lt;&lt;arr[j]&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>先定义出数组类型，在通过类型建立引用</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">typedef int (PArr)[10];</span><br><span class="line"><span class="keyword">int</span> arr[<span class="number">10</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">PArr &amp;ARR=arr;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">&#123;</span><br><span class="line">    arr[i]=i+<span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">10</span>;j++)</span><br><span class="line">&#123;</span><br><span class="line">    cout&lt;&lt;ARR[j]&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h2 id="3、认识引用"><a href="#3、认识引用" class="headerlink" title="3、认识引用"></a>3、认识引用</h2><ol>
<li><p>给变量取别名</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a=<span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> &amp;b=a;</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;a=&quot;</span>&lt;&lt;a&lt;&lt;endl;</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;b=&quot;</span>&lt;&lt;b&lt;&lt;endl;</span><br></pre></td></tr></table></figure></li>
<li><p>操作同一块内存</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> m=<span class="number">15</span>;</span><br><span class="line"><span class="keyword">int</span> &amp;n=m;</span><br><span class="line">n=<span class="number">50</span>;</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;m=&quot;</span>&lt;&lt;m&lt;&lt;endl;</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;n=&quot;</span>&lt;&lt;n&lt;&lt;endl;</span><br></pre></td></tr></table></figure></li>
<li><p>一个变量可以有多个别名</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a=<span class="number">15</span>;</span><br><span class="line"><span class="keyword">int</span> &amp;b=a;</span><br><span class="line"><span class="keyword">int</span> &amp;c=a;</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;a=&quot;</span>&lt;&lt;a&lt;&lt;endl;</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;b=&quot;</span>&lt;&lt;b&lt;&lt;endl;</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;c=&quot;</span>&lt;&lt;c&lt;&lt;endl;</span><br></pre></td></tr></table></figure></li>
<li><p>引用变量地址都相同</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> m=<span class="number">20</span>;</span><br><span class="line"><span class="keyword">int</span> &amp;n=m;</span><br><span class="line"><span class="keyword">int</span> &amp;k=m;</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;m的地址：&quot;</span>&lt;&lt;&amp;m&lt;&lt;endl;</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;n的地址：&quot;</span>&lt;&lt;&amp;n&lt;&lt;endl;</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;k的地址：&quot;</span>&lt;&lt;&amp;k&lt;&lt;endl;</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="函数中的引用"><a href="#函数中的引用" class="headerlink" title="函数中的引用"></a>函数中的引用</h1><p>最常见看见引用的地方是在函数参数和返回值中</p>
<h2 id="1、函数传参中的引用"><a href="#1、函数传参中的引用" class="headerlink" title="1、函数传参中的引用"></a>1、函数传参中的引用</h2><p>当引用被用作函数参数的时，在函数内对任何引用的修改，将对还函数外的参数产生改变。当然，可以通过传递一个指针来做相同的事情，但引用具有更清晰的语法。</p>
<p>引出：函数传参的三种方法—经典例子（两数交换值的函数）swap()函数</p>
<ul>
<li><p>值传递   –形参的改变不会影响实参</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> tmp=a;</span><br><span class="line">    a=b;</span><br><span class="line">    b=tmp;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;形参a=&quot;</span>&lt;&lt;a&lt;&lt;endl;    <span class="comment">//结果：形参a=5 </span></span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;形参b=&quot;</span>&lt;&lt;b&lt;&lt;endl;    <span class="comment">//结果：形参b=10 </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a=<span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span> b=<span class="number">5</span>;</span><br><span class="line">    <span class="comment">//传值函数调用</span></span><br><span class="line">    <span class="built_in">swap</span>(a,b);</span><br><span class="line">    <span class="comment">//验证</span></span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;实参a=&quot;</span>&lt;&lt;a&lt;&lt;endl;   <span class="comment">//结果：实参a=10  </span></span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;实参b=&quot;</span>&lt;&lt;b&lt;&lt;endl;   <span class="comment">//结果：实参b=5 </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>址传递</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> *a,<span class="keyword">int</span> *b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> tmp=*a;</span><br><span class="line">    *a=*b;</span><br><span class="line">    *b=tmp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a=<span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span> b=<span class="number">5</span>;</span><br><span class="line">    <span class="comment">//传址调用</span></span><br><span class="line">    <span class="built_in">swap</span>(&amp;a,&amp;b);</span><br><span class="line">    <span class="comment">//验证</span></span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;实参a=&quot;</span>&lt;&lt;a&lt;&lt;endl;   <span class="comment">//结果：实参a=5  </span></span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;实参b=&quot;</span>&lt;&lt;b&lt;&lt;endl;   <span class="comment">//结果：实参b=10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>传引用</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> &amp;a,<span class="keyword">int</span> &amp;b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> tmp=a;</span><br><span class="line">    a=b;</span><br><span class="line">    b=tmp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a=<span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span> b=<span class="number">5</span>;</span><br><span class="line">    <span class="comment">//传引用调用</span></span><br><span class="line">    <span class="built_in">swap</span>(a,b);</span><br><span class="line">    <span class="comment">//验证</span></span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;实参a=&quot;</span>&lt;&lt;a&lt;&lt;endl;   <span class="comment">//结果：实参a=5  </span></span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;实参b=&quot;</span>&lt;&lt;b&lt;&lt;endl;   <span class="comment">//结果：实参b=10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="2、函数返回值中的引用"><a href="#2、函数返回值中的引用" class="headerlink" title="2、函数返回值中的引用"></a>2、函数返回值中的引用</h2><p>如果从函数中返回一个引用，必须像从函数中返回一个指针一样对待。当函数返回值时，引用关联的内存一定要存在  </p>
<ul>
<li><p>不能返回局部变量的引用</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span>&amp; <span class="title">funcA</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a=<span class="number">10</span>;   <span class="comment">//局部变量 创建在栈上--寿命有限</span></span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> &amp;b=<span class="built_in">funcA</span>();</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;ref = &quot;</span> &lt;&lt; ref &lt;&lt; endl;   <span class="comment">//结果：ref=10</span></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;ref = &quot;</span> &lt;&lt; ref &lt;&lt; endl;   <span class="comment">//结果：ref=0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>如果函数做左值，必须返回引用</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//返回静态变量的引用</span></span><br><span class="line"><span class="function"><span class="keyword">int</span>&amp; <span class="title">funcA</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> a=<span class="number">10</span>;   <span class="comment">//局部静态变量：寿命（文件结束）、作用域（定义函数内）</span></span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;a=&quot;</span>&lt;&lt;a&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">funcA</span>()=<span class="number">50</span>;   <span class="comment">//函数做左值    //结果：a=10</span></span><br><span class="line">    <span class="built_in">funcA</span>();                     <span class="comment">//结果：a=50</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="引用的本质"><a href="#引用的本质" class="headerlink" title="引用的本质"></a>引用的本质</h1><p>引用本质在C++内部实现是一个<strong>常量指针</strong>—指针的指向不可以修改，值可以修改</p>
<p>常量指针：<code>Type * const point</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Type&amp; ref = val;     <span class="comment">// Type* const ref = &amp;val;</span></span><br></pre></td></tr></table></figure>

<p>因此引用所占用的空间大小与指针相同</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//发现是引用，转换为 int* const ref = &amp;a;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testFunc</span><span class="params">(<span class="keyword">int</span>&amp; ref)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	ref = <span class="number">100</span>; <span class="comment">// ref是引用，转换为*ref = 100</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">	<span class="keyword">int</span>&amp; aRef = a;  <span class="comment">//自动转换为 int* const aRef = &amp;a;这也能说明引用为什么必须初始化</span></span><br><span class="line">	aRef = <span class="number">20</span>;      <span class="comment">//内部发现aRef是引用，自动帮我们转换为: *aRef = 20;</span></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;a:&quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;aRef:&quot;</span> &lt;&lt; aRef &lt;&lt; endl;</span><br><span class="line">	<span class="built_in">testFunc</span>(a);</span><br><span class="line">	<span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="指针引用"><a href="#指针引用" class="headerlink" title="指针引用"></a>指针引用</h1><p>在c语言中如果想改变一个指针的指向而不是它所指向的内容，就必须要用更高级的指针去接收低级指针</p>
<p>函数申明可以是这样的：<code>int funcA(int **);</code></p>
<p>给指针变量取一个别名</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Type * pointer=<span class="literal">NULL</span>:</span><br><span class="line">Type* &amp;=pointer;</span><br></pre></td></tr></table></figure>

<h2 id="1、指针间接修改"><a href="#1、指针间接修改" class="headerlink" title="1、指针间接修改"></a>1、指针间接修改</h2><p>主调函数未分配内存，被调函数分配内存，传参时要用高级指针接收</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Teacher</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//指针间接修改teacher的年龄</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AllocateAndInitByPointer</span><span class="params">(Teacher**teacher)</span>   <span class="comment">//被调函数用二级指针接收</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    *teacher=(Teacher *)<span class="built_in">malloc</span>(<span class="built_in"><span class="keyword">sizeof</span></span>(Teacher));</span><br><span class="line">    (*teacher)-&gt;m_Age=<span class="number">35</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Teacher *teacher=<span class="literal">NULL</span>;   <span class="comment">//主调函数未分配内存</span></span><br><span class="line">    <span class="built_in">AllocateAndInitByPointer</span>(&amp;teacher);</span><br><span class="line">    cout&lt;&lt;teacher-&gt;m_Age&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2、引用间接修改"><a href="#2、引用间接修改" class="headerlink" title="2、引用间接修改"></a>2、引用间接修改</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AllocateAndInitByReference</span><span class="params">(Student* &amp;stu)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    stu=(Student *)<span class="built_in">malloc</span>(<span class="built_in"><span class="keyword">sizeof</span></span>(Student));</span><br><span class="line">    stu-&gt;m_Age=<span class="number">45</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Student *student=<span class="literal">NULL</span>;</span><br><span class="line">    <span class="built_in">AllocateAndInitByReference</span>(student);</span><br><span class="line">    cout&lt;&lt;student-&gt;m_Age&lt;&lt;endl;</span><br><span class="line">    <span class="built_in">free</span>(student);</span><br><span class="line">    student=<span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="常引用"><a href="#常引用" class="headerlink" title="常引用"></a>常引用</h1><h2 id="1、常引用的定义格式"><a href="#1、常引用的定义格式" class="headerlink" title="1、常引用的定义格式"></a>1、常引用的定义格式</h2><p><code>const Type &amp;ref=val;</code> </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> &amp;ref = <span class="number">10</span>; <span class="comment">// 加了const之后，  相当于写成   int temp = 10;  const int &amp;ref = temp;</span></span><br><span class="line"><span class="keyword">int</span> *p = (<span class="keyword">int</span> *)&amp;ref;</span><br><span class="line">*p = <span class="number">10000</span>;</span><br><span class="line">cout &lt;&lt; ref &lt;&lt; endl;</span><br></pre></td></tr></table></figure>

<h2 id="2、常引用注意事项"><a href="#2、常引用注意事项" class="headerlink" title="2、常引用注意事项"></a>2、常引用注意事项</h2><ul>
<li><p>字面量不能赋值给引用，但可以赋值给常引用  </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> &amp;ref=<span class="number">100</span>;   <span class="comment">//字面量给引用赋值（错误）</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> &amp;ref=<span class="number">10</span>;   <span class="comment">//字面量可以给常引用值</span></span><br></pre></td></tr></table></figure></li>
<li><p>常引用不能修改</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> m=<span class="number">100</span>;</span><br><span class="line"><span class="keyword">int</span> &amp;ret=m;</span><br><span class="line">ret=<span class="number">50</span>;</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;m=&quot;</span>&lt;&lt;m&lt;&lt;endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> &amp;ref=m;</span><br><span class="line">ref=<span class="number">80</span>;   <span class="comment">//修改常引用（错误）</span></span><br><span class="line">cout&lt;&lt;<span class="string">&quot;m=&quot;</span>&lt;&lt;m&lt;&lt;endl;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="3、常引用的使用场景"><a href="#3、常引用的使用场景" class="headerlink" title="3、常引用的使用场景"></a>3、常引用的使用场景</h2><p>函数传参，防止实参被修改（类的拷贝，复制构造函数）</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、一般引用</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">funcA</span><span class="params">(<span class="keyword">int</span> &amp;val)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    val=<span class="number">1000</span>;      </span><br><span class="line">    <span class="keyword">return</span> val;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2、常引用</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">funcB</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> &amp;val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    val=<span class="number">100</span>;        <span class="comment">//直接报错--不允许修改</span></span><br><span class="line">    <span class="keyword">return</span> val;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m=<span class="number">15</span>;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;m=&quot;</span>&lt;&lt;<span class="built_in">funcB</span>(m)&lt;&lt;endl;   <span class="comment">//无法修改---结果：m=15</span></span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;m=&quot;</span>&lt;&lt;<span class="built_in">funcA</span>(m)&lt;&lt;endl;   <span class="comment">//被修改-----结果：m=1000</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>将函数的形参定义为常量引用的好处:</p>
<ul>
<li>引用不产生新的变量，减少形参与实参传递时的开销。</li>
<li>由于引用可能导致实参随形参改变而改变，将其定义为常量引用可以消除这种副作用。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://smilesrx.github.io/2021/04/21/C++/C++%E5%BC%82%E5%B8%B8/C++%E5%BC%82%E5%B8%B8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CandyKing">
      <meta itemprop="description" content="虾米">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逆玺之路">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/04/21/C++/C++%E5%BC%82%E5%B8%B8/C++%E5%BC%82%E5%B8%B8/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-21 20:23:45" itemprop="dateCreated datePublished" datetime="2021-04-21T20:23:45+08:00">2021-04-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-23 15:27:57" itemprop="dateModified" datetime="2020-10-23T15:27:57+08:00">2020-10-23</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="C-异常"><a href="#C-异常" class="headerlink" title="C++异常"></a>C++异常</h1><p>提供异常的基本目的就是为了让一个函数在发现了自己无法处理的错误时抛出（throw）一个异常，然后它的（直接或者间接）调用者能够捕获并处理这个问题。</p>
<p>异常处理就是处理程序中的错误。所谓错误是指在程序运行的过程中发生的一些异常事件（如：除0溢出，数组下标越界，所要读取的文件不存在,空指针，内存不足等等</p>
<p>在C语言的世界中，对错误的处理总是围绕着两种方法：一是使用整型的返回值标识错误；二是使用<code>errno</code>宏（可以简单的理解为一个全局整型变量）去记录错误。当然C++中仍然是可以用这两种方法的。</p>
<p> 这两种方法最大的缺陷就是会出现不一致问题。例如有些函数返回1表示成功，返回0表示出错；而有些函数返回0表示成功，返回非0表示出错。</p>
<p> 还有一个缺点就是函数的返回值只有一个，你通过函数的返回值表示错误代码，那么函数就不能返回其他的值。当然，你也可以通过指针或者C++的引用来返回另外的值，但是这样可能会令你的程序略微晦涩难懂。</p>
<h1 id="c-异常机制相比C语言异常处理的优势"><a href="#c-异常机制相比C语言异常处理的优势" class="headerlink" title="c++异常机制相比C语言异常处理的优势"></a>c++异常机制相比C语言异常处理的优势</h1><ol>
<li>函数的返回值可以忽略，但异常不可忽略。如果程序出现异常，但是没有被捕获，程序就会终止，这多少会促使程序员开发出来的程序更健壮一点。而如果使用C语言的error宏或者函数返回值，调用者都有可能忘记检查，从而没有对错误进行处理，结果造成程序莫名其面的终止或出现错误的结果。</li>
<li>整型返回值没有任何语义信息。而异常却包含语义信息，有时你从类名就能够体现出来。</li>
<li>整型返回值缺乏相关的上下文信息。异常作为一个类，可以拥有自己的成员，这些成员就可以传递足够的信息。</li>
<li>异常处理可以在调用跳级。这是一个代码编写时的问题：假设在有多个函数的调用栈中出现了某个错误，使用整型返回码要求你在每一级函数中都要进行处理。而使用异常处理的栈展开机制，只需要在一处进行处理就可以了，不需要每级函数都处理。</li>
</ol>
<p>C语言异常处理尴尬例子</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Div</span><span class="params">(<span class="keyword">int</span> &amp;a,<span class="keyword">int</span> &amp;b)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(b==<span class="number">0</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">return</span> a/b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;    <span class="comment">//期望：异常</span></span><br><span class="line">	<span class="keyword">int</span> a=<span class="number">10</span>;</span><br><span class="line">	<span class="keyword">int</span> b=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> ret=<span class="built_in">Div</span>(a,b);</span><br><span class="line">	<span class="keyword">if</span>(ret==<span class="number">-1</span>)</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;异常&quot;</span>&lt;&lt;endl;   <span class="comment">//结果：异常</span></span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;ret=&quot;</span>&lt;&lt;ret; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;    <span class="comment">//期望：ret=-1</span></span><br><span class="line">	<span class="keyword">int</span> a=<span class="number">10</span>;</span><br><span class="line">	<span class="keyword">int</span> b=<span class="number">-10</span>;</span><br><span class="line">	<span class="keyword">int</span> ret=<span class="built_in">Div</span>(a,b);</span><br><span class="line">	<span class="keyword">if</span>(ret==<span class="number">-1</span>)</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;异常&quot;</span>&lt;&lt;endl;    <span class="comment">//结果：异常</span></span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;ret=&quot;</span>&lt;&lt;ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>分析：</p>
<ul>
<li>如果判断返回值，那么返回值是错误码还是结果？</li>
<li>如果不判断返回值，那么b==0时候，程序结果已经不正确</li>
</ul>
<p>结论：</p>
<ul>
<li>异常应该捕获，如果你捕获，可以，那么异常必须继续抛给上层函数,你不处理，不代表你的上层不处理</li>
<li>异常没有捕获的结果就是运行结果错的一塌糊涂，结果未知，未知的结果程序没有必要执行下去</li>
</ul>
<h1 id="异常基本语法"><a href="#异常基本语法" class="headerlink" title="异常基本语法"></a>异常基本语法</h1><h2 id="1、关键字：try-throw-catch"><a href="#1、关键字：try-throw-catch" class="headerlink" title="1、关键字：try throw catch"></a>1、关键字：<code>try throw catch</code></h2><ul>
<li>可以出现异常的代码 放到 try块</li>
<li>利用throw抛出异常</li>
<li>利用catch捕获异常</li>
</ul>
<p>采用C++异常处理重写上述C语言异常处理的尴尬例子</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;    <span class="comment">//期望：异常</span></span><br><span class="line">	<span class="keyword">int</span> a=<span class="number">10</span>;</span><br><span class="line">	<span class="keyword">int</span> b=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> ret;</span><br><span class="line">	<span class="keyword">try</span>&#123;</span><br><span class="line">		ret=<span class="built_in">Div</span>(a,b);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in"><span class="keyword">catch</span></span>(<span class="keyword">int</span>)&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;异常&quot;</span>&lt;&lt;endl;   <span class="comment">//结果：异常</span></span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;ret=&quot;</span>&lt;&lt;ret; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;   <span class="comment">//期望：-1</span></span><br><span class="line">	<span class="keyword">int</span> a=<span class="number">10</span>;</span><br><span class="line">	<span class="keyword">int</span> b=<span class="number">-10</span>;</span><br><span class="line">	<span class="keyword">int</span> ret;</span><br><span class="line">	<span class="keyword">try</span>&#123;</span><br><span class="line">		ret=<span class="built_in">Div</span>(a,b);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in"><span class="keyword">catch</span></span>(<span class="keyword">int</span>)&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;异常&quot;</span>&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;ret=&quot;</span>&lt;&lt;ret;     <span class="comment">//结果：-1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>总结：</p>
<ul>
<li>若有异常则通过throw操作创建一个异常对象并抛出。</li>
<li>将可能抛出异常的程序段放到try块之中。</li>
<li>如果在try段执行期间没有引起异常，那么跟在try后面的catch字句就不会执行。</li>
</ul>
<h2 id="2、异常严格类型匹配"><a href="#2、异常严格类型匹配" class="headerlink" title="2、异常严格类型匹配"></a>2、异常严格类型匹配</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">myDivision</span><span class="params">(<span class="keyword">int</span> a , <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> ( b == <span class="number">0</span>)&#123;</span><br><span class="line">		<span class="comment">//throw 1;       //抛出int类型的异常</span></span><br><span class="line">		<span class="comment">//throw &#x27;a&#x27;;     //抛出char类型的异常</span></span><br><span class="line">		<span class="comment">//throw 3.14;    //抛出double类型的异常</span></span><br><span class="line">		<span class="comment">//string str = &quot;abc&quot;;</span></span><br><span class="line">		<span class="comment">//throw str;     //抛出string类型异常</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> a / b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">	<span class="keyword">int</span> b = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">try</span>&#123;<span class="built_in">myDivision</span>(a, b);&#125;</span><br><span class="line">	<span class="built_in"><span class="keyword">catch</span></span> (<span class="keyword">int</span>)&#123;cout &lt;&lt; <span class="string">&quot;int类型异常捕获&quot;</span> &lt;&lt; endl;&#125;</span><br><span class="line">	<span class="built_in"><span class="keyword">catch</span></span> (<span class="keyword">char</span>)&#123;cout &lt;&lt; <span class="string">&quot;char类型异常捕获&quot;</span> &lt;&lt; endl;&#125;</span><br><span class="line">	<span class="built_in"><span class="keyword">catch</span></span> (<span class="keyword">double</span>)&#123;</span><br><span class="line">		<span class="comment">//捕获到了异常，但是不想处理，继续向上抛出这个异常</span></span><br><span class="line">		<span class="comment">//异常必须有函数进行处理，如果没有任何处理，程序自动调用 terminate 函数，让程序中断</span></span><br><span class="line">		<span class="keyword">throw</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;double类型异常捕获&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in"><span class="keyword">catch</span></span> (...)&#123;</span><br><span class="line">		<span class="comment">//throw; </span></span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;其他类型异常捕获&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">try</span>&#123;<span class="built_in">test01</span>();&#125;</span><br><span class="line">	<span class="built_in"><span class="keyword">catch</span></span> (<span class="keyword">double</span>)&#123;cout &lt;&lt; <span class="string">&quot;double函数中 double类型异常捕获&quot;</span> &lt;&lt; endl;&#125;</span><br><span class="line">	<span class="built_in"><span class="keyword">catch</span></span> (...)&#123;cout &lt;&lt; <span class="string">&quot;main函数中 其他类型异常捕获&quot;</span> &lt;&lt; endl;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>总结：</p>
<ul>
<li>catch子句会根据出现的先后顺序被检查，匹配的catch语句捕获并处理异常(或继续抛出异常)</li>
<li>如果匹配的处理未找到，则运行函数terminate将自动被调用，其缺省功能调用abort终止程序。</li>
<li>处理不了的异常，可以在catch的最后一个分支，使用throw，向上抛。</li>
<li>catch( 类型) 如果想捕获其他类型 catch(…)</li>
<li>异常可以是自定义数据类型</li>
</ul>
<h2 id="3、栈解旋"><a href="#3、栈解旋" class="headerlink" title="3、栈解旋"></a>3、栈解旋</h2><p>异常被抛出后，从进入try块起，到异常被抛掷前，这期间在栈上构造的所有对象，都会被自动析构。析构的顺序与构造的顺序相反，这一过程称为栈的解旋(unwinding).</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyException</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">MyException</span>()&#123;cout&lt;&lt;<span class="string">&quot;MyException默认构造调用&quot;</span>&lt;&lt;endl;&#125;</span><br><span class="line">	<span class="built_in">MyException</span>(<span class="keyword">const</span> MyException &amp;myexception)&#123;cout&lt;&lt;<span class="string">&quot;MyException的默认拷贝构造调用&quot;</span>&lt;&lt;endl;&#125;</span><br><span class="line">	~<span class="built_in">MyException</span>()&#123;cout&lt;&lt;<span class="string">&quot;MyException的析构调用&quot;</span>&lt;&lt;endl;&#125; </span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">printError</span><span class="params">()</span></span>&#123;cout &lt;&lt; <span class="string">&quot;我自己的异常&quot;</span> &lt;&lt; endl;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>()&#123;cout &lt;&lt; <span class="string">&quot;Person的默认构造函数调用&quot;</span> &lt;&lt; endl;&#125;</span><br><span class="line">	~<span class="built_in">Person</span>()&#123;cout &lt;&lt; <span class="string">&quot;Person的析构函数调用&quot;</span> &lt;&lt; endl;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">myDivision</span><span class="params">(<span class="keyword">int</span> a , <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> ( b == <span class="number">0</span>)&#123;</span><br><span class="line">		<span class="comment">//从try代码块开始，到throw抛出异常之前，所有栈上的数据都会被释放掉，</span></span><br><span class="line">		<span class="comment">//释放的顺序和创建顺序相反的，这个过程我们称为栈解旋</span></span><br><span class="line">		Person p1;</span><br><span class="line">		Person p2;</span><br><span class="line">		<span class="keyword">throw</span> <span class="built_in">MyException</span>();   <span class="comment">//抛出 MyException的匿名对象 --- 自定义类型</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> a / b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">	<span class="keyword">int</span> b = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">try</span>&#123;<span class="built_in">myDivision</span>(a, b);&#125;</span><br><span class="line">	<span class="built_in"><span class="keyword">catch</span></span> (MyException &amp;e)&#123;e.<span class="built_in">printError</span>();&#125;  <span class="comment">//注意此处的值传递（调用构造函数）和传引用（调用拷贝构造函数）的区别 </span></span><br><span class="line">	<span class="built_in"><span class="keyword">catch</span></span> (...)&#123;</span><br><span class="line">        <span class="comment">//throw;   //继续向上抛出</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;其他类型异常捕获&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">try</span>&#123;<span class="built_in">test01</span>();&#125;</span><br><span class="line">	<span class="built_in"><span class="keyword">catch</span></span> (<span class="keyword">double</span>)&#123;cout &lt;&lt; <span class="string">&quot;double函数中 double类型异常捕获&quot;</span> &lt;&lt; endl;&#125;</span><br><span class="line">	<span class="built_in"><span class="keyword">catch</span></span> (...)&#123;cout &lt;&lt; <span class="string">&quot;main函数中 其他类型异常捕获&quot;</span> &lt;&lt; endl;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p><img src="/%E6%A0%88%E8%A7%A3%E6%97%8B.png" alt="栈解旋"></p>
<h2 id="4、异常的接口申明"><a href="#4、异常的接口申明" class="headerlink" title="4、异常的接口申明"></a>4、异常的接口申明</h2><ul>
<li>为了加强程序的可读性，可以在函数声明中列出可能抛出异常的所有类型，例如：<code>void func() throw(A,B,C);</code>这个函数<code>func</code>能够且只能抛出类型A,B,C及其子类型的异常。</li>
<li>如果在函数声明中没有包含异常接口声明，则此函数可以抛任何类型的异常，例如:<code>void func()</code></li>
<li>一个不抛任何类型异常的函数可声明为:<code>void func() throw(空)</code></li>
<li>如果一个函数抛出了它的异常接口声明所不允许抛出的异常,<code>unexcepted</code>函数会被调用，该函数默认行为调用<code>terminate</code>函数中断程序。</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.可抛出所有类型异常</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TestFunction01</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">throw</span> <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.只能抛出int char char*类型异常</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TestFunction02</span><span class="params">()</span> <span class="title">throw</span><span class="params">(<span class="keyword">int</span>,<span class="keyword">char</span>,<span class="keyword">char</span>*)</span></span>&#123;</span><br><span class="line">	string exception = <span class="string">&quot;error!&quot;</span>;   <span class="comment">//string类型 </span></span><br><span class="line">	<span class="keyword">throw</span> exception;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.不能抛出任何类型异常</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TestFunction03</span><span class="params">()</span> <span class="title">throw</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">throw</span> <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">try</span>&#123;</span><br><span class="line">		<span class="comment">//TestFunction01();           //异常捕获 </span></span><br><span class="line">		<span class="comment">//TestFunction02();           //terminate called after throwing an instance of &#x27;std::string&#x27;</span></span><br><span class="line">		<span class="built_in">TestFunction03</span>();           <span class="comment">//terminate called after throwing an instance of &#x27;int&#x27;</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in"><span class="keyword">catch</span></span> (...)&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;捕获异常!&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5、异常变量的声生命周期"><a href="#5、异常变量的声生命周期" class="headerlink" title="5、异常变量的声生命周期"></a>5、异常变量的声生命周期</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyException</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">MyException</span>()&#123;cout &lt;&lt; <span class="string">&quot;MyException默认构造函数调用&quot;</span> &lt;&lt; endl;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">MyException</span>(<span class="keyword">const</span> MyException &amp; e)&#123;cout &lt;&lt; <span class="string">&quot;MyException拷贝构造函数调用&quot;</span> &lt;&lt; endl;&#125;</span><br><span class="line"></span><br><span class="line">	~<span class="built_in">MyException</span>()&#123;cout &lt;&lt; <span class="string">&quot;MyException析构函数调用&quot;</span> &lt;&lt; endl;&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">()</span></span>&#123;cout &lt;&lt; <span class="string">&quot;自定义异常捕获&quot;</span> &lt;&lt; endl;&#125; </span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">doWork</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">throw</span>  &amp;<span class="built_in">MyException</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">try</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">doWork</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//抛出的是 throw MyException();  catch (MyException e)    调用默认构造函数和默认拷贝构造函数 效率低</span></span><br><span class="line">	<span class="comment">//抛出的是 throw MyException();  catch (MyException &amp;e)   只调用默认构造函数 效率高 推荐</span></span><br><span class="line">	<span class="comment">//抛出的是 throw &amp;MyException(); catch (MyException *e)   对象会提前释放掉，不能在非法操作</span></span><br><span class="line">	<span class="comment">//抛出的是 new MyException();   catch (MyException *e)    只调用默认构造函数 自己要管理释放</span></span><br><span class="line">	<span class="built_in"><span class="keyword">catch</span></span> (MyException *e)</span><br><span class="line">	&#123;</span><br><span class="line">		e-&gt;<span class="built_in">Print</span>();</span><br><span class="line">		<span class="comment">//cout &lt;&lt; &quot;自定义异常捕获&quot; &lt;&lt; endl;</span></span><br><span class="line">		<span class="keyword">delete</span> e;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>总结：</p>
<ul>
<li>抛出的是 <code>throw MyException();</code>  <code>catch (MyException e)</code>  调用默认构造函数和默认拷贝构造函数 效率低</li>
<li>抛出的是 <code>throw MyException(); </code>  <code>catch (MyException &amp;e)</code>  只调用默认构造函数 效率高 推荐</li>
<li>抛出的是<code>throw new MyException();</code>   <code>catch (MyException *e) </code>  只调用默认构造函数 自己要管理释放</li>
<li>抛出的是 <code>throw &amp;MyException(); </code>  <code>catch (MyException *e)  </code>对象会提前释放掉，不能在非法操作</li>
</ul>
<h2 id="6、异常的多态使用"><a href="#6、异常的多态使用" class="headerlink" title="6、异常的多态使用"></a>6、异常的多态使用</h2><ul>
<li><p>异常基类</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseException</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//纯虚函数</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">PrintError</span><span class="params">()</span></span>=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>异常子类1—空指针异常</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NullPointerException</span>:</span><span class="keyword">public</span> BaseException&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//重写虚函数</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">PrintError</span><span class="params">()</span></span>&#123;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;空指针异常捕获&quot;</span>&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>异常子类2—越界异常</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OutOfRangeException</span> :</span><span class="keyword">public</span> BaseException&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//重写虚函数</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">PrintError</span><span class="params">()</span></span>&#123;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;越界异常捕获&quot;</span>&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试：异常抛出、捕获、处理</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dowork</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//父类引用指向子类对象构成多态</span></span><br><span class="line">    <span class="keyword">throw</span> <span class="built_in">NullPointerException</span>();   <span class="comment">//抛出空指针异常</span></span><br><span class="line">    <span class="keyword">throw</span> <span class="built_in">OutOfRangeException</span>();    <span class="comment">//抛出越界异常</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;<span class="built_in">Dowork</span>();&#125;</span><br><span class="line">    <span class="comment">//捕获异常</span></span><br><span class="line">    <span class="built_in"><span class="keyword">catch</span></span>(BaseException &amp;e)&#123;</span><br><span class="line">        e.<span class="built_in">PrintError</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>好处：抛出任意子类对象的异常都可以用父类的引用来接受</p>
</li>
</ul>
<h1 id="C-标准异常"><a href="#C-标准异常" class="headerlink" title="C++标准异常"></a>C++标准异常</h1><h2 id="1、标准库"><a href="#1、标准库" class="headerlink" title="1、标准库"></a>1、标准库</h2><p>标准库中也提供了很多的异常类，它们是通过类继承组织起来的。异常类继承层级结构图如下：</p>
<p><img src="/%E6%A0%87%E5%87%86%E5%BC%82%E5%B8%B8%E5%BA%93.png" alt="标准异常库"></p>
<h2 id="2、标准异常类的成员"><a href="#2、标准异常类的成员" class="headerlink" title="2、标准异常类的成员"></a>2、标准异常类的成员</h2><ul>
<li>在上述继承体系中，每个类都有提供了构造函数、复制构造函数、和赋值操作符重载。</li>
<li>logic_error类及其子类、runtime_error类及其子类，它们的构造函数是接受一个string类型的形式参数，用于异常信息的描述</li>
<li>所有的异常类都有一个what()方法，返回<code>const char*</code> 类型（C风格字符串）的值，描述异常信息。</li>
</ul>
<ol>
<li><p>标准异常类的具体描述：</p>
<table>
<thead>
<tr>
<th>异常名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>exception</td>
<td>所有标准异常类的父类</td>
</tr>
<tr>
<td>bad_alloc</td>
<td>当operator new and operator new[]，请求分配内存失败时</td>
</tr>
<tr>
<td>bad_exception</td>
<td>这是个特殊的异常，如果函数的异常抛出列表里声明了bad_exception异常，当函数内部抛出了异常抛出列表中没有的异常，这是调用的unexpected函数中若抛出异常，不论什么类型，都会被替换为bad_exception类型</td>
</tr>
<tr>
<td>bad_typeid</td>
<td>使用typeid操作符，操作一个NULL指针，而该指针是带有虚函数的类，这时抛出bad_typeid异常</td>
</tr>
<tr>
<td>bad_cast</td>
<td>使用dynamic_cast转换引用失败的时候</td>
</tr>
<tr>
<td>ios_base::failure</td>
<td>io操作过程出现错误</td>
</tr>
<tr>
<td>logic_error</td>
<td>逻辑错误，可以在运行前检测的错误</td>
</tr>
<tr>
<td>runtime_error</td>
<td>运行时错误，仅在运行时才可以检测的错误</td>
</tr>
</tbody></table>
</li>
<li><p>logic_error的子类：</p>
<table>
<thead>
<tr>
<th>异常名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>length_error</td>
<td>试图生成一个超出该类型最大长度的对象时，例如vector的resize操作</td>
</tr>
<tr>
<td>domain_error</td>
<td>参数的值域错误，主要用在数学函数中。例如使用一个负值调用只能操作非负数的函数</td>
</tr>
<tr>
<td>out_of_range</td>
<td>超出有效范围</td>
</tr>
<tr>
<td>invalid_argument</td>
<td>参数不合适。在标准库中，当利用string对象构造bitset时，而string中的字符不是’0’或’1’的时候，抛出该异常</td>
</tr>
</tbody></table>
</li>
<li><p>runtime_error的子类：</p>
<table>
<thead>
<tr>
<th>异常名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>range_error</td>
<td>计算结果超出了有意义的值域范围</td>
</tr>
<tr>
<td>overflow_error</td>
<td>算术计算上溢</td>
</tr>
<tr>
<td>underflow_error</td>
<td>算术计算下溢</td>
</tr>
<tr>
<td>invalid_argument</td>
<td>参数不合适。在标准库中，当利用string对象构造bitset时，而string中的字符不是’0’或’1’的时候，抛出该异常</td>
</tr>
</tbody></table>
</li>
</ol>
<h2 id="3、举例"><a href="#3、举例" class="headerlink" title="3、举例"></a>3、举例</h2><ul>
<li>引入头文件  <code>#include &lt;stdexcept&gt;</code></li>
<li>抛出越界异常 <code>throw out_of_range(“…”)</code></li>
<li>获取错误信息  <code>catch( exception &amp; e )   e.what();</code></li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdexcept&gt;</span> <span class="comment">//  std 标准  except 异常</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>(<span class="keyword">int</span> age)&#123;</span><br><span class="line">		<span class="keyword">if</span> (age &lt; <span class="number">0</span> || age &gt; <span class="number">150</span>)&#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="built_in">out_of_range</span>(<span class="string">&quot;年龄必须在 0 ~ 150之间&quot;</span>);</span><br><span class="line">			<span class="comment">//throw length_error(&quot;年龄必须在 0 ~ 150之间&quot;);</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="function">Person <span class="title">p</span><span class="params">(<span class="number">151</span>)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//catch ( out_of_range &amp;e)</span></span><br><span class="line">	<span class="built_in"><span class="keyword">catch</span></span> ( exception &amp;e)&#123;</span><br><span class="line">        cout &lt;&lt; e.<span class="built_in">what</span>() &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="编写自己的异常"><a href="#编写自己的异常" class="headerlink" title="编写自己的异常"></a>编写自己的异常</h1><ul>
<li>标准库中的异常是有限的；</li>
<li>在自己的异常类中，可以添加自己的信息。（标准库中的异常类值允许设置一个用来描述异常的字符串）。</li>
</ul>
<p>实现方法：</p>
<ul>
<li>建议自己的异常类要继承标准异常类。因为C++中可以抛出任何类型的异常，所以我们的异常类可以不继承自标准异常，但是这样可能会导致程序混乱，尤其是当我们多人协同开发时。</li>
<li>当继承标准异常类时，应该重载父类的what函数和虚析构函数。</li>
<li>因为栈展开的过程中，要复制异常类型，那么要根据你在类中添加的成员考虑是否提供自己的复制构造函数。</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdexcept&gt;</span> <span class="comment">//  std 标准  except 异常</span></span></span><br><span class="line"><span class="comment">//自定义异常类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyOutOfRange</span>:</span><span class="keyword">public</span> exception&#123;   <span class="comment">//继承标准异常</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">MyOutOfRange</span>(<span class="keyword">const</span> string  errorInfo)&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_Error = errorInfo;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">MyOutOfRange</span>(<span class="keyword">const</span> <span class="keyword">char</span> * errorInfo)&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_Error = <span class="built_in">string</span>( errorInfo);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">virtual</span> ~<span class="built_in">exception</span>()&#123; &#125;    <span class="comment">//重写父类的虚析构</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keyword">char</span>* <span class="title">what</span><span class="params">()</span> <span class="keyword">const</span></span>&#123;   <span class="comment">//重写父类的what()方法</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>-&gt;m_Error.<span class="built_in">c_str</span>() ;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	string m_Error;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>(<span class="keyword">int</span> age)&#123;</span><br><span class="line">		<span class="keyword">if</span> (age &lt;= <span class="number">0</span> || age &gt; <span class="number">150</span>)&#123;</span><br><span class="line">			<span class="comment">//抛出异常 越界</span></span><br><span class="line">			<span class="comment">//cout &lt;&lt; &quot;越界&quot; &lt;&lt; endl;</span></span><br><span class="line">			<span class="comment">//throw  out_of_range(&quot;年龄必须在0~150之间&quot;);</span></span><br><span class="line">			<span class="comment">//throw length_error(&quot;长度异常&quot;);</span></span><br><span class="line">			<span class="keyword">throw</span> <span class="built_in">MyOutOfRange</span>((<span class="string">&quot;我的异常 年龄必须在0~150之间&quot;</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">		&#125;	</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">try</span>&#123;</span><br><span class="line">		<span class="function">Person <span class="title">p</span><span class="params">(<span class="number">151</span>)</span></span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in"><span class="keyword">catch</span></span> ( out_of_range &amp; e )&#123;   <span class="comment">//标准异常捕获</span></span><br><span class="line">		cout &lt;&lt; e.<span class="built_in">what</span>() &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in"><span class="keyword">catch</span></span> (length_error &amp; e)&#123;   <span class="comment">//标准异常捕获</span></span><br><span class="line">		cout &lt;&lt; e.<span class="built_in">what</span>() &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in"><span class="keyword">catch</span></span> (MyOutOfRange e)&#123;   <span class="comment">//自定义的异常类捕获异常</span></span><br><span class="line">		cout &lt;&lt; e.<span class="built_in">what</span>() &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://smilesrx.github.io/2021/04/21/C++/C++%E6%96%87%E4%BB%B6%E8%AF%BB%E5%86%99/C++%E6%96%87%E4%BB%B6%E8%AF%BB%E5%86%99/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CandyKing">
      <meta itemprop="description" content="虾米">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逆玺之路">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/04/21/C++/C++%E6%96%87%E4%BB%B6%E8%AF%BB%E5%86%99/C++%E6%96%87%E4%BB%B6%E8%AF%BB%E5%86%99/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-21 20:23:45" itemprop="dateCreated datePublished" datetime="2021-04-21T20:23:45+08:00">2021-04-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-23 23:39:00" itemprop="dateModified" datetime="2020-10-23T23:39:00+08:00">2020-10-23</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="文件流类和文件流对象"><a href="#文件流类和文件流对象" class="headerlink" title="文件流类和文件流对象"></a>文件流类和文件流对象</h1><p>输入输出是以系统指定的标准设备（输入设备为键盘，输出设备为显示器）为对象的。在实际应用中，常以磁盘文件作为对象。即从磁盘文件读取数据，将数据输出到磁盘文件。</p>
<p>和文件有关系的输入输出类主要在<code>fstream.h</code>这个头文件中被定义，在这个头文件中主要被定义了三个类，由这三个类控制对文件的各种输入输出操作，他们分别是<code>ifstream</code>、<code>ofstream</code>、<code>fstream</code>，其中<code>fstream</code>类是由<code>iostream</code>类派生而来，他们之间的继承关系见下图所示：</p>
<p><img src="/C++%E7%B1%BB%E5%BA%93%E4%B8%AD%E7%9A%84%E6%B5%81%E7%B1%BB.png" alt="C++类库中的流类"></p>
<ul>
<li><code>ifstream</code>：专用于从文件中读取数据；</li>
<li><code>ofstream</code>：专用于向文件中写入数据；</li>
<li><code>fstream</code>：既可用于从文件中读取数据，又可用于向文件中写入数据。</li>
<li>这 3 个文件流类都位于 <code>&lt;fstream&gt; </code>头文件中</li>
</ul>
<p>可以看到，<code>ifstream</code> 类和 <code>iostream</code> 类是从 <code>istream</code> 类派生而来的，因此<code>ifstream</code>类拥有<code>istream</code>类的全部成员方法。同样地，<code>ofstream</code> 和 <code>iostream</code> 类也拥有 <code>ostream</code> 类的全部成员方法。这也就意味着，<code>istream </code>和 <code>ostream</code> 类提供的供 <code>cin</code> 和 <code>cout</code> 调用的成员方法，也同样适用于文件流。并且这 3 个类中有些成员方法是相同的，比如 <code>operator &lt;&lt;()</code>、<code>operator &gt;&gt;()</code>、<code>peek()</code>、<code>ignore()</code>、<code>getline()</code>、<code>get()</code> 等。</p>
<p>值得一提的是，和 <code>&lt;iostream&gt;</code> 头文件中定义有<code> ostream</code> 和 <code>istream</code> 类的对象 <code>cin </code>和 <code>cout </code>不同，<code>&lt;fstream&gt; </code>头文件中并没有定义可直接使用的<code> fstream</code>、<code>ifstream</code> 和 <code>ofstream</code> 类对象。因此，如果我们想使用该类操作文件，需要自己创建相应类的对象。</p>
<p><code>fstream</code> 类拥有 <code>ifstream</code> 和<code> ofstream</code> 类中所有的成员方法，</p>
<p>下表罗列了 <code>fstream </code>类一些常用的成员方法:</p>
<table>
<thead>
<tr>
<th>成员方法名</th>
<th>适用类对象</th>
<th>功  能</th>
</tr>
</thead>
<tbody><tr>
<td>open()</td>
<td>fstream ifstream ofstream</td>
<td>打开指定文件，使其与文件流对象相关联。</td>
</tr>
<tr>
<td>is_open()</td>
<td>检查指定文件是否已打开。</td>
<td></td>
</tr>
<tr>
<td>close()</td>
<td>关闭文件，切断和文件流对象的关联。</td>
<td></td>
</tr>
<tr>
<td>swap()</td>
<td>交换 2 个文件流对象。</td>
<td></td>
</tr>
<tr>
<td>operator&gt;&gt;</td>
<td>fstream ifstream</td>
<td>重载 &gt;&gt; 运算符，用于从指定文件中读取数据。</td>
</tr>
<tr>
<td>gcount()</td>
<td>返回上次从文件流提取出的字符个数。该函数常和 get()、getline()、ignore()、peek()、read()、readsome()、putback() 和 unget() 联用。</td>
<td></td>
</tr>
<tr>
<td>get()</td>
<td>从文件流中读取一个字符，同时该字符会从输入流中消失。</td>
<td></td>
</tr>
<tr>
<td>getline(str,n,ch)</td>
<td>从文件流中接收 n-1 个字符给 str 变量，当遇到指定 ch 字符时会停止读取，默认情况下 ch 为 ‘\0’。</td>
<td></td>
</tr>
<tr>
<td>ignore(n,ch)</td>
<td>从文件流中逐个提取字符，但提取出的字符被忽略，不被使用，直至提取出 n 个字符，或者当前读取的字符为 ch。</td>
<td></td>
</tr>
<tr>
<td>peek()</td>
<td>返回文件流中的第一个字符，但并不是提取该字符。</td>
<td></td>
</tr>
<tr>
<td>putback(c)</td>
<td>将字符 c 置入文件流（缓冲区）。</td>
<td></td>
</tr>
<tr>
<td>operator&lt;&lt;</td>
<td>fstream ofstream</td>
<td>重载 &lt;&lt; 运算符，用于向文件中写入指定数据。</td>
</tr>
<tr>
<td>put()</td>
<td>向指定文件流中写入单个字符。</td>
<td></td>
</tr>
<tr>
<td>write()</td>
<td>向指定文件中写入字符串。</td>
<td></td>
</tr>
<tr>
<td>tellp()</td>
<td>用于获取当前文件输出流指针的位置。</td>
<td></td>
</tr>
<tr>
<td>seekp()</td>
<td>设置输出文件输出流指针的位置。</td>
<td></td>
</tr>
<tr>
<td>flush()</td>
<td>刷新文件输出流缓冲区。</td>
<td></td>
</tr>
<tr>
<td>good()</td>
<td>fstream ofstream ifstream</td>
<td>操作成功，没有发生任何错误。</td>
</tr>
<tr>
<td>eof()</td>
<td>到达输入末尾或文件尾。</td>
<td></td>
</tr>
</tbody></table>
<p>举例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span> *url =<span class="string">&quot;http://www.baidu.com&quot;</span>;</span><br><span class="line">    <span class="comment">//创建一个 fstream 类对象</span></span><br><span class="line">    fstream fs;</span><br><span class="line">    <span class="comment">//将 test.txt 文件和 fs 文件流关联</span></span><br><span class="line">    fs.<span class="built_in">open</span>(<span class="string">&quot;test.txt&quot;</span>, ios::out);</span><br><span class="line">    <span class="comment">//向test.txt文件中写入 url 字符串</span></span><br><span class="line">    fs.<span class="built_in">write</span>(url, <span class="number">30</span>);</span><br><span class="line">    fs.<span class="built_in">close</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="文件打开"><a href="#文件打开" class="headerlink" title="文件打开"></a>文件打开</h1><p>在对文件进行读写操作之前，先要打开文件。</p>
<h2 id="1、打开文件有以下两个目的："><a href="#1、打开文件有以下两个目的：" class="headerlink" title="1、打开文件有以下两个目的："></a>1、打开文件有以下两个目的：</h2><ul>
<li>通过指定文件名，建立起文件和文件流对象的关联，以后要对文件进行操作时，就可以通过与之关联的流对象来进行。</li>
<li>指明文件的使用方式。使用方式有只读、只写、既读又写、在文件末尾添加数据、以文本方式使用、以二进制方式使用等多种。</li>
</ul>
<h2 id="2、打开文件可以通过以下两种方式进行："><a href="#2、打开文件可以通过以下两种方式进行：" class="headerlink" title="2、打开文件可以通过以下两种方式进行："></a>2、打开文件可以通过以下两种方式进行：</h2><ul>
<li><p>调用流对象的 open 成员函数打开文件。</p>
<p><code>ofs.open(&quot;./test.txt&quot;, ios::out | ios::trunc); </code></p>
</li>
<li><p>定义文件流对象时，通过构造函数打开文件。</p>
<p><code>ofstream  ofs(&quot;./test.txt&quot;, ios::out | ios::trunc);</code></p>
</li>
</ul>
<h2 id="3、使用open函数打开文件"><a href="#3、使用open函数打开文件" class="headerlink" title="3、使用open函数打开文件"></a>3、使用open函数打开文件</h2><ol>
<li><p>函数原型：</p>
<p><code>void open(const char* szFileName, int mode)</code></p>
</li>
<li><p>参数：</p>
<p>第一个参数是指向文件名的指针，第二个参数是文件的打开模式标记。</p>
</li>
<li><p>文件的打开模式</p>
<p>文件的打开模式标记代表了文件的使用方式，这些标记可以单独使用，也可以组合使用</p>
<table>
<thead>
<tr>
<th>模式标记</th>
<th>适用对象</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>ios::in</td>
<td>ifstream fstream</td>
<td>打开文件用于读取数据。如果文件不存在，则打开出错。</td>
</tr>
<tr>
<td>ios::out</td>
<td>ofstream fstream</td>
<td>打开文件用于写入数据。如果文件不存在，则新建该文件；如果文件原来就存在，则打开时清除原来的内容。</td>
</tr>
<tr>
<td>ios::app</td>
<td>ofstream fstream</td>
<td>打开文件，用于在其尾部添加数据。如果文件不存在，则新建该文件。</td>
</tr>
<tr>
<td>ios::ate</td>
<td>ifstream</td>
<td>打开一个已有的文件，并将文件读指针指向文件末尾（读写指 的概念后面解释）。如果文件不存在，则打开出错。</td>
</tr>
<tr>
<td>ios:: trunc</td>
<td>ofstream</td>
<td>打开文件时会清空内部存储的所有数据，单独使用时与 ios::out 相同。</td>
</tr>
<tr>
<td>ios::binary</td>
<td>ifstream ofstream fstream</td>
<td>以二进制方式打开文件。若不指定此模式，则以文本模式打开。</td>
</tr>
<tr>
<td>ios::in | ios::out</td>
<td>fstream</td>
<td>打开已存在的文件，既可读取其内容，也可向其写入数据。文件刚打开时，原有内容保持不变。如果文件不存在，则打开出错。</td>
</tr>
<tr>
<td>ios::in | ios::out</td>
<td>ofstream</td>
<td>打开已存在的文件，可以向其写入数据。文件刚打开时，原有内容保持不变。如果文件不存在，则打开出错。</td>
</tr>
<tr>
<td>ios::in | ios::out | ios::trunc</td>
<td>fstream</td>
<td>打开文件，既可读取其内容，也可向其写入数据。如果文件本来就存在，则打开时清除原来的内容；如果文件不存在，则新建该文件。</td>
</tr>
</tbody></table>
<p>在流对象上执行 open 成员函数，给出文件名和打开模式，就可以打开文件。判断文件打开是否成功，可以看“对象名”这个表达式的值是否为 true，如果为 true，则表示文件打开成功。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ifstream ifs;</span><br><span class="line">    ifs.<span class="built_in">open</span>(<span class="string">&quot;./test.txt&quot;</span>, ios::in);</span><br><span class="line">    <span class="keyword">if</span> (ifs)  <span class="comment">//条件成立，则说明文件打开成功</span></span><br><span class="line">        inFile.<span class="built_in">close</span>();</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;test.txt doesn&#x27;t exist&quot;</span> &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line">    ofstream ofs;</span><br><span class="line">    ofs.<span class="built_in">open</span>(<span class="string">&quot;test1.txt&quot;</span>, ios::out);</span><br><span class="line">    <span class="keyword">if</span> (!ofs)  <span class="comment">//条件成立，则说明文件打开出错</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;error 1&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        ofs.<span class="built_in">close</span>();</span><br><span class="line">    ofs.<span class="built_in">open</span>(<span class="string">&quot;./test2.txt&quot;</span>, ios::out | ios::in);</span><br><span class="line">    <span class="keyword">if</span> (ofs)  <span class="comment">//条件成立，则说明文件打开成功</span></span><br><span class="line">        ofs.<span class="built_in">close</span>();</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;error 2&quot;</span> &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line">    fstream fs;</span><br><span class="line">    fs.<span class="built_in">open</span>(<span class="string">&quot;./test3.txt&quot;</span>, ios::out | ios::in | ios::trunc);</span><br><span class="line">    <span class="keyword">if</span> (!fs)</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;error 3&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        fs.<span class="built_in">close</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="4、使用流类的构造函数打开文件"><a href="#4、使用流类的构造函数打开文件" class="headerlink" title="4、使用流类的构造函数打开文件"></a>4、使用流类的构造函数打开文件</h2><p>定义流对象时，在构造函数中给出文件名和打开模式也可以打开文件。以 <code>ifstream</code> 类为例，</p>
<ul>
<li><p>它有如下构造函数：</p>
<p><code>ifstream::ifstream (const char* szFileName, int mode = ios::in, int);</code></p>
</li>
<li><p>参数：</p>
<p>第一个参数是指向文件名的指针；</p>
<p>第二个参数是打开文件的模式标记，默认值为<code>ios::in</code>;</p>
<p>第三个参数是整型的，也有默认值，一般极少使用。</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="function">ifstream <span class="title">ifs</span><span class="params">(<span class="string">&quot;./test.txt&quot;</span>, ios::in)</span></span>;</span><br><span class="line">    <span class="keyword">if</span> (ifs)</span><br><span class="line">        ifs.<span class="built_in">close</span>();</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;test.txt doesn&#x27;t exist&quot;</span> &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line">    <span class="function">ofstream <span class="title">ofs</span><span class="params">(<span class="string">&quot;test1.txt&quot;</span>, ios::out)</span></span>;</span><br><span class="line">    <span class="keyword">if</span> (!ofs)</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;error 1&quot;</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        ofs.<span class="built_in">close</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="function">fstream <span class="title">fs</span><span class="params">(<span class="string">&quot;tmp\\test2.txt&quot;</span>, ios::out | ios::in)</span></span>;</span><br><span class="line">    <span class="keyword">if</span> (!fs)</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;error 2&quot;</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        fs.<span class="built_in">close</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5、注意"><a href="#5、注意" class="headerlink" title="5、注意"></a>5、注意</h2><ol>
<li><p>新版本的I/O类库中不提供<code>ios::nocreate</code>和<code>ios::noreplace</code>。</p>
</li>
<li><p>每一个打开的文件都有一个文件指针，该指针的初始位置由I/O方式指定，每次读写都从文件指针的当前位置开始。每读入一个字节，指针就后移一个字节。当文件指针移到最后，就会遇到文件结束<code>EOF</code>（文件结束符也占一个字节，其值为-1)，此时流对象的成员函数<code>eof</code>的值为非0值(一般设为1)，表示文件结束 了。</p>
</li>
<li><p>可以用“位或”运算符“|”对输入输出方式进行组合:</p>
<ul>
<li><code>ios::in | ios:: noreplace </code>    打开一个输入文件，若文件不存在则返回打开失败的信息</li>
<li><code> ios::app | ios::nocreate</code>      打开一个输出文件，在文件尾接着写数据，若文件不存在，则返回打开失败的信息</li>
<li><code>ios::out l ios::noreplace</code>  打开一个新文件作为输出文件，如果文件已存在则返回打开失败的信息</li>
<li><code>ios::in l ios::out I ios::binary</code>    打开一个二进制文件，可读可写</li>
<li>但不能组合互相排斥的方式，如 <code>ios::nocreate l ios::noreplace</code>。</li>
</ul>
</li>
<li><p>如果打开操作失败，open函数的返回值为0(假)，如果是用调用构造函数的方式打开文件的，则流对象的值为0。可以据此测试打开是否成功。如:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(outfile.<span class="built_in">open</span>(<span class="string">&quot;f1.bat&quot;</span>, ios::app) ==<span class="number">0</span>)</span><br><span class="line">        cout &lt;&lt;<span class="string">&quot;open error&quot;</span>;</span><br><span class="line"><span class="comment">//或</span></span><br><span class="line">    <span class="keyword">if</span>( !outfile.<span class="built_in">open</span>(<span class="string">&quot;f1.bat&quot;</span>, ios::app) )</span><br><span class="line">        cout &lt;&lt;<span class="string">&quot;open error&quot;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="6、举例"><a href="#6、举例" class="headerlink" title="6、举例"></a>6、举例</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">//写文件  o --  输出    </span></span><br><span class="line">	<span class="function">ofstream  <span class="title">ofs</span><span class="params">(<span class="string">&quot;./test.txt&quot;</span>, ios::out | ios::trunc)</span></span>;</span><br><span class="line">	<span class="comment">//ofs.open(&quot;./test.txt&quot;, ios::out | ios::trunc);  设置打开方式 以及路径</span></span><br><span class="line">	<span class="keyword">if</span> (!ofs.<span class="built_in">is_open</span>())&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;文件打开失败&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	ofs &lt;&lt; <span class="string">&quot;姓名：孙悟空&quot;</span> &lt;&lt; endl;</span><br><span class="line">	ofs &lt;&lt; <span class="string">&quot;年龄：999&quot;</span> &lt;&lt; endl;</span><br><span class="line">	ofs &lt;&lt; <span class="string">&quot;性别：男&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="comment">//关闭文件</span></span><br><span class="line">	ofs.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="利用4种方式-对文件进行读取"><a href="#利用4种方式-对文件进行读取" class="headerlink" title="利用4种方式 对文件进行读取"></a>利用4种方式 对文件进行读取</h1><ul>
<li><p>方式一</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> buf[<span class="number">1024</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line"><span class="keyword">while</span> (ifs &gt;&gt; buf)&#123;</span><br><span class="line">	cout &lt;&lt; buf &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>方式二</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> buf[<span class="number">1024</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line"><span class="keyword">while</span> (ifs.<span class="built_in">getline</span>(buf,<span class="built_in"><span class="keyword">sizeof</span></span>(buf)))&#123;</span><br><span class="line">	cout &lt;&lt; buf &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>方式三</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">第三种方式</span><br><span class="line">string buf;</span><br><span class="line"><span class="keyword">while</span> ( <span class="built_in">getline</span>(ifs,buf) )&#123;</span><br><span class="line">	cout &lt;&lt; buf &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>方式四</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span>  c;</span><br><span class="line"><span class="keyword">while</span> ( (c = ifs.<span class="built_in">get</span>()) != EOF )&#123;</span><br><span class="line">	cout &lt;&lt; c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="文件关闭"><a href="#文件关闭" class="headerlink" title="文件关闭"></a>文件关闭</h1><p>在对已打开的磁盘文件的读写操作完成后，应关闭该文件。关闭文件用成员函数close。如：<code>outfile.close( );</code>  将输出文件流所关联的磁盘文件关闭</p>
<p>所谓关闭，实际上是解除该磁盘文件与文件流的关联，原来设置的工作方式也失效，这样，就不能再通过文件流对该文件进行输入或输出</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//读文件   i  -- 输入</span></span><br><span class="line">	ifstream  ifs;</span><br><span class="line">	ifs.<span class="built_in">open</span>(<span class="string">&quot;./test.txt&quot;</span>, ios::in);</span><br><span class="line">	<span class="keyword">if</span> (!ifs.<span class="built_in">is_open</span>())&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;文件打开失败&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://smilesrx.github.io/2021/04/21/C++/C++%E8%BE%93%E5%85%A5%E5%92%8C%E8%BE%93%E5%87%BA%E6%B5%81/C++%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%B5%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CandyKing">
      <meta itemprop="description" content="虾米">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逆玺之路">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/04/21/C++/C++%E8%BE%93%E5%85%A5%E5%92%8C%E8%BE%93%E5%87%BA%E6%B5%81/C++%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%B5%81/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-21 20:23:45" itemprop="dateCreated datePublished" datetime="2021-04-21T20:23:45+08:00">2021-04-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-23 22:43:26" itemprop="dateModified" datetime="2020-10-23T22:43:26+08:00">2020-10-23</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="C-输入和输出流"><a href="#C-输入和输出流" class="headerlink" title="C++输入和输出流"></a>C++输入和输出流</h1><p>程序的输入指的是从输入文件将数据传送给程序，程序的输出指的是从程序将数据传送给输出文件。</p>
<p>C++输入输出包含以下三个方面的内容：</p>
<ul>
<li>对系统指定的标准设备的输入和输出。即从键盘输入数据，输出到显示器屏幕。这种输入输出称为标准的输入输出，<strong>简称标准I/O。</strong></li>
<li>以外存磁盘文件为对象进行输入和输出，即从磁盘文件输入数据，数据输出到磁盘文件。以外存文件为对象的输入输出称为文件的输入输出，<strong>简称文件I/O。</strong></li>
<li> 对内存中指定的空间进行输入和输出。通常指定一个字符数组作为存储空间(实际上可以利用该空间存储任何信息)。这种输入和输出称为字符串输入输出，<strong>简称串I/O。</strong></li>
</ul>
<p>C++编译系统提供了用于输入输出的<code>iostream</code>类库。<code>iostream</code>这个单词是由3个部 分组成的，即i-o-stream，意为输入输出流。在<code>iostream</code>类库中包含许多用于输入输出的 类</p>
<h2 id="1、I-O类库中的常见流类"><a href="#1、I-O类库中的常见流类" class="headerlink" title="1、I/O类库中的常见流类"></a>1、I/O类库中的常见流类</h2><table>
<thead>
<tr>
<th>类名</th>
<th>作用</th>
<th>头文件</th>
</tr>
</thead>
<tbody><tr>
<td>ios</td>
<td>抽象基类</td>
<td>iostream</td>
</tr>
<tr>
<td>istream</td>
<td>通用输入流和其他输入流的基类</td>
<td>iostream</td>
</tr>
<tr>
<td>ostream</td>
<td>通用输出流和其他输出流的基类</td>
<td>iostream</td>
</tr>
<tr>
<td>iostream</td>
<td>通用输入输出流和其他输入输出流的基类</td>
<td>iostream</td>
</tr>
<tr>
<td>ifstream</td>
<td>输入文件流类</td>
<td>fstream</td>
</tr>
<tr>
<td>ofstream</td>
<td>输出文件流类</td>
<td>fstream</td>
</tr>
<tr>
<td>fstream</td>
<td>输入输出文件流类</td>
<td>fstream</td>
</tr>
<tr>
<td>istrstream</td>
<td>输入字符串流类</td>
<td>strstream</td>
</tr>
<tr>
<td>ostrstream</td>
<td>输出字符串流类</td>
<td>strstream</td>
</tr>
<tr>
<td>strstream</td>
<td>输入输出字符串流类</td>
<td>strstream</td>
</tr>
</tbody></table>
<p><code>ios</code>是抽象基类，由它派生出<code>istream</code>类和<code>ostream</code>类，两个类名中第1个字母i和o分别代表输入<code>input</code>和输出<code>output</code>。<code> istream</code>类支持输入操作，<code>ostream</code>类支持输出操作， <code>iostream</code>类支持输入输出操作。<code>iostream</code>类是从<code>istream</code>类和<code>ostream</code>类通过多重继承而派生的类。其继承层次见上图表示。</p>
<p>C++对文件的输入输出需要用<code>ifstrcam</code>和<code>ofstream</code>类，两个类名中第1个字母i和o分别代表输入和输出，第2个字母f代表文件 (file)。<code>ifstream</code>支持对文件的输入操作，<code> ofstream</code>支持对文件的输出操作。类<code>ifstream</code>继承了类<code>istream</code>，类<code>ofstream</code>继承了类<code>ostream</code>，类<code>fstream</code>继承了 类<code>iostream</code>。见图 </p>
<p><img src="/C++%E7%B1%BB%E5%BA%93%E4%B8%AD%E7%9A%84%E6%B5%81%E7%B1%BB.png" alt="C++类库中的流类"></p>
<blockquote>
<p>其中，图中的箭头代表各个类之间的派生关系。比如，<code>ios </code>是所有流类的基类，它派生出 <code>istream</code> 和 <code>ostream</code>。特别需要指出的是，为了避免多继承的二义性，从 <code>ios</code> 派生出 <code>istream</code> 和<code> ostream</code> 时，均使用了 <code>virtual </code>关键字（虚继承）。</p>
</blockquote>
<p>图 中这些流类各自的功能分别为：</p>
<ul>
<li><code>istream</code>：常用于接收从键盘输入的数据；</li>
<li><code>ostream</code>：常用于将数据输出到屏幕上；</li>
<li><code>ifstream</code>：用于读取文件中的数据；</li>
<li><code>ofstream</code>：用于向文件中写入数据；</li>
<li><code>iostream</code>：继承自 <code>istream </code>和 <code>ostream </code>类，因为该类的功能兼两者于一身，既能用于输入，也能用于输出；</li>
<li><code>fstream</code>：兼 <code>ifstream</code> 和 <code>ofstream </code>类功能于一身，既能读取文件中的数据，又能向文件中写入数据。</li>
</ul>
<h2 id="2、与iostream类库有关的头文件"><a href="#2、与iostream类库有关的头文件" class="headerlink" title="2、与iostream类库有关的头文件"></a>2、与iostream类库有关的头文件</h2><p><code>iostream</code>类库中不同的类的声明被放在不同的头文件中，用户在自己的程序中用#include命令包含了有关的头文件就相当于在本程序中声明了所需 要用到的类。可以换 —种说法：头文件是程序与类库的接口，<code>iostream</code>类库的接口分别由不同的头文件来实现。常用的有 :</p>
<ul>
<li><code>iostream</code>  包含了对输入输出流进行操作所需的基本信息。</li>
<li><code>fstream </code> 用于用户管理的文件的I/O操作。</li>
<li><code>strstream </code> 用于字符串流I/O。</li>
<li><code>stdiostream</code>  用于混合使用C和C + +的I/O机制时，例如想将C程序转变为C++程序。</li>
<li><code>iomanip </code> 在使用格式化I/O时应包含此头文件。</li>
</ul>
<h2 id="3、在iostream头文件中定义的流对象"><a href="#3、在iostream头文件中定义的流对象" class="headerlink" title="3、在iostream头文件中定义的流对象"></a>3、在iostream头文件中定义的流对象</h2><p>在 <code>iostream</code> 头文件中定义的类有<code> ios</code>，<code>istream</code>，<code>ostream</code>，<code>iostream</code>，等。</p>
<p>在<code>iostream</code>头文件中不仅定义了有关的类，还定义了4种流对象，</p>
<table>
<thead>
<tr>
<th>对象</th>
<th>含义</th>
<th>对应设备</th>
<th>对应的类</th>
<th>c语言中相应的标准文件</th>
</tr>
</thead>
<tbody><tr>
<td>cin</td>
<td>标准输入流</td>
<td>键盘</td>
<td>istream_withassign</td>
<td>stdin</td>
</tr>
<tr>
<td>cout</td>
<td>标准输出流</td>
<td>屏幕</td>
<td>ostream_withassign</td>
<td>stdout</td>
</tr>
<tr>
<td>cerr</td>
<td>标准错误流</td>
<td>屏幕</td>
<td>ostream_withassign</td>
<td>stderr</td>
</tr>
<tr>
<td>clog</td>
<td>标准错误流</td>
<td>屏幕</td>
<td>ostream_withassign</td>
<td>stderr</td>
</tr>
</tbody></table>
<h2 id="4、在iostream头文件中重载运算符"><a href="#4、在iostream头文件中重载运算符" class="headerlink" title="4、在iostream头文件中重载运算符"></a>4、在iostream头文件中重载运算符</h2><p>“&lt;&lt;”和“&gt;&gt;”本来在C++中是被定义为左位移运算符和右位移运算符的，由于在<code>iostream</code>头文件中对它们进行了重载， 使它们能用作标准类型数据的输入和输出运算符。所以，在用它们的程序中必须用#include命令把<code>iostream</code>包含到程序中。</p>
<ul>
<li><code>#include &lt;iostream&gt;</code></li>
<li><code>&gt;&gt;a</code>表示将数据放入a对象中。</li>
<li><code>&lt;&lt;a</code> 表示将a对象中存储的数据拿出。</li>
</ul>
<h1 id="标准I-O流"><a href="#标准I-O流" class="headerlink" title="标准I/O流"></a>标准I/O流</h1><p>标准I/O对象:<code>cin</code> <code>cout</code>，<code>cerr</code>，<code>clog</code></p>
<h2 id="1、cout流对象"><a href="#1、cout流对象" class="headerlink" title="1、cout流对象"></a>1、cout流对象</h2><p><code>cout</code>是console output的缩写，意为在控制台（终端显示器）的输出。强调几点：</p>
<ul>
<li><p>​    <code>cout</code>不是C++预定义的关键字，它是<code>ostream</code>流类的对象，在<code>iostream</code>中定义。 顾名思义，流是流动的数据，<code>cout</code>流是流向显示器的数据。<code>cout</code>流中的数据是用流插入运算符“&lt;&lt;”顺序加入的。如果有:<br>  <code>cout&lt;&lt;&quot;I &quot;&lt;&lt;&quot;study C++ &quot;&lt;&lt;&quot;very hard. &lt;&lt; “hello world !&quot;;</code></p>
<p>按顺序将字符串”I “, “study C++ “, “very hard.”插人到<code>cout</code>流中，<code>cout</code>就将它们送    到显示器，在显示器上输出字符串”I study C++ very hard.”。<code>cout</code>流是容纳数据的载    体，它并不是一个运算符。人们关心的是<code>cout</code>流中的内容，也就是向显示器输出什么。</p>
</li>
<li><p>用<code>cout&lt;&lt;</code>输出基本类型的数据时，可以不必考虑数据是什么类型，系统会判断数    据的类型，并根据其类型选择调用与之匹配的运算符重 载函数。这个过程都是自动的，    用户不必干预。如果在C语言中用<code>prinf</code>函数输出不同类型的数据，必须分别指定相应    的输出格式符，十分麻烦，而且容易出错。C++的I/O机制对用户来说，显然是方便    而安全的。</p>
</li>
<li><p><code>cout</code>流在内存中对应开辟了一个缓冲区，用来存放流中的数据，当向<code>cout</code>流插人一个<code>endl</code>时，不论缓冲区是否已满，都立即输出流中所有数据，然后插入一个换行符， 并刷新流（清空缓冲区）。注意如果插人一个换行符”\n“如<code>cout&lt;&lt;a&lt;&lt;&quot;\n&quot;</code>，则只输出和换行，而不刷新<code>cout</code> 流(但并不是所有编译系统都体现出这一区别）。</p>
</li>
<li><p>在<code>iostream</code>中只对”&lt;&lt;”和”&gt;&gt;”运算符用于标准类型数据的输入输出进行了重载，但未对用户声明的类型数据的输入输出进行重载。如果用户声明了新的类型，并希望用”&lt;&lt;”和”&gt;&gt;”运算符对其进行输入输出，按照重运算符重载来做。</p>
</li>
</ul>
<h2 id="2、cerr流对象"><a href="#2、cerr流对象" class="headerlink" title="2、cerr流对象"></a>2、cerr流对象</h2><p><code>cerr</code>流对象是标准错误流，<code>cerr</code>流已被指定为与显示器关联。<code>cerr</code>的 作用是向标准错误设备(standard error device)输出有关出错信息。<code>cerr</code>与标准输出流<code>cout</code>的作用和用法差不多。但有一点不同：<code>cout</code>流通常是传送到显示器输出，但也可以被重定向输出到磁盘文件，而<code>cerr</code>流中的信息只能在显示器输出。当调试程序时，往往不希望程序运行时的出错信息被送到其他文件，而要求在显示器上及时输出，这时 应该用<code>cerr</code>。<code>cerr</code>流中的信息是用户根据需要指定的。</p>
<h2 id="3、clog流对象"><a href="#3、clog流对象" class="headerlink" title="3、clog流对象"></a>3、clog流对象</h2><p><code>clog</code>流对象也是标准错误流，它是console log的缩写。它的作用和<code>cerr</code>相同，都是在终端显示器上显示出错信息。区别：<code>cerr</code>是不经过缓冲区，直接向显示器上输出有关信息，而clog中的信息存放在缓冲区中，缓冲区满后或遇<code>endl</code>时向显示器输出。</p>
<h2 id="4、缓冲区"><a href="#4、缓冲区" class="headerlink" title="4、缓冲区"></a>4、缓冲区</h2><p>缓冲区(Buffer)就是在内存中预留指定大小的存储空间用来对输入/输出(I/O)的数据作临时存储，这部分预留的内存空间就叫做缓冲区</p>
<p>缓冲区根据其对应的是输入设备还是输出设备，分为输入缓冲区和输出缓冲区</p>
<ol>
<li><p>为什么要引入缓冲区</p>
<ul>
<li>比如我们从磁盘里取信息，我们先把读出的数据放在缓冲区，计算机再直接从缓冲区中取数据，等缓冲区的数据取完后再去磁盘中读取，这样就可以减少磁盘的读写次数，再加上计算机对缓冲区的操作大大快于对磁盘的操作，故应用缓冲区可大大提高计算机的运行速度。</li>
<li>我们使用打印机打印文档，由于打印机的打印速度相对较慢，我们先把文档输出到打印机相应的缓冲区，打印机再自行逐步打印，这时我们的CPU可以处理别的事情。</li>
</ul>
</li>
<li><p>作用：缓冲区就是一块内存区，它用在输入输出设备和CPU之间，用来缓存数据。它使得低速的输入输出设备和高速的CPU能够协调工作，避免低速的输入输出设备占用CPU，解放出CPU，使其能够高效率工作。</p>
</li>
<li><p>缓冲区的类型：缓冲区 分为三种类型：全缓冲、行缓冲和不带缓冲。</p>
<ul>
<li>全缓冲：当填满标准I/O缓存后才进行实际I/O操作。全缓冲的典型代表是对磁盘文件的读写。</li>
<li>行缓冲：当在输入和输出中遇到换行符时，执行真正的I/O操作。这时，我们输入的字符先存放在缓冲区，等按下回车键换行时才进行实际的I/O操作。典型代表是键盘输入数据。</li>
<li>无缓冲：不进行缓冲，标准出错情况<code>stderr</code>是典型代表，这使得出错信息可以直接尽快地显示出来。</li>
</ul>
</li>
<li><p>缓冲区的刷新：下列情况会引发缓冲区的刷新:</p>
<ul>
<li>缓冲区满时；</li>
<li>执行flush语句；</li>
<li>执行<code>endl</code>语句；</li>
<li>关闭文件。</li>
</ul>
<p>可见，缓冲区满或关闭文件时都会刷新缓冲区，进行真正的I/O操作。另外，在C++中，我们可以使用flush函数来刷新缓冲区（执行I/O操作并清空缓冲区），如：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cout&lt;&lt;flush; <span class="comment">//将显存的内容立即输出到显示器上进行显示  </span></span><br><span class="line">cout&lt;&lt;”\n” &lt;&lt;flush; </span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="标准输入流"><a href="#标准输入流" class="headerlink" title="标准输入流"></a>标准输入流</h1><p>标准输入流对象cin，重点掌握的函数：</p>
<h2 id="1、cin-get-一次只能读取一个字符"><a href="#1、cin-get-一次只能读取一个字符" class="headerlink" title="1、cin.get()             一次只能读取一个字符"></a>1、<code>cin.get()</code>             一次只能读取一个字符</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//链式编程</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> ch1,ch2,ch3,ch4;</span><br><span class="line">	cin.<span class="built_in">get</span>(ch1).<span class="built_in">get</span>(ch2).<span class="built_in">get</span>(ch3).<span class="built_in">get</span>(ch4);   <span class="comment">//输入：123456  缓冲区：123456</span></span><br><span class="line">	cout&lt;&lt;ch1&lt;&lt;ch2&lt;&lt;ch3&lt;&lt;ch4&lt;&lt;endl;     <span class="comment">//输出：1234   //缓冲区：56</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//输入  a  s     第一次 a  第二次  s  第三次 换行  第四次 等待下次输入</span></span><br><span class="line">	<span class="keyword">char</span> c = cin.<span class="built_in">get</span>();   <span class="comment">//输入：as  缓冲区：as+\n</span></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;c = &quot;</span> &lt;&lt; c &lt;&lt; endl;  <span class="comment">//输出：c=a    缓冲区：s+\n</span></span><br><span class="line">	c = cin.<span class="built_in">get</span>();       <span class="comment">//从缓冲区取一个字符给c</span></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;c = &quot;</span> &lt;&lt; c &lt;&lt; endl;   <span class="comment">//输出：c=s   缓冲区：\n</span></span><br><span class="line">	c = cin.<span class="built_in">get</span>();       <span class="comment">//从缓冲区取一个字符给c</span></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;c = &quot;</span> &lt;&lt; c &lt;&lt; endl;   <span class="comment">//缓冲区：空</span></span><br><span class="line">	c = cin.<span class="built_in">get</span>();       <span class="comment">//从键盘读取一个字符</span></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;c = &quot;</span> &lt;&lt; c &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2、cin-get-一个参数-读一个字符"><a href="#2、cin-get-一个参数-读一个字符" class="headerlink" title="2、cin.get(一个参数)           读一个字符"></a>2、<code>cin.get(一个参数)</code>           读一个字符</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> ch=cin.<span class="built_in">get</span>();    <span class="comment">//键盘输入：123----在缓冲区：123</span></span><br><span class="line">	cout&lt;&lt;ch&lt;&lt;endl;       <span class="comment">//输出：1---从缓冲区取走一个字符  缓冲区：23</span></span><br><span class="line">	cin.<span class="built_in">get</span>(ch);          <span class="comment">//从缓冲区取走一个字符给赋给ch  缓冲区：3</span></span><br><span class="line">	cout&lt;&lt;ch&lt;&lt;endl;       <span class="comment">//输出：2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3、cin-get-两个参数-可以读字符串"><a href="#3、cin-get-两个参数-可以读字符串" class="headerlink" title="3、cin.get(两个参数)               可以读字符串"></a>3、<code>cin.get(两个参数) </code>              可以读字符串</h2><p>利用<code>cin.get</code>获取字符串时候，换行符遗留在缓冲区中</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> buf[<span class="number">1024</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">	cin.<span class="built_in">get</span>(buf, <span class="number">1024</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">char</span> c = cin.<span class="built_in">get</span>();</span><br><span class="line">	<span class="comment">//利用cin.get获取字符串时候，换行符遗留在缓冲区中</span></span><br><span class="line">	<span class="keyword">if</span> (  c== <span class="string">&#x27;\n&#x27;</span>)&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;换行符遗留在缓冲区&quot;</span> &lt;&lt; endl;     </span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span>&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;换行符不在缓冲区&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; buf &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4、cin-getline-获取字符串"><a href="#4、cin-getline-获取字符串" class="headerlink" title="4、cin.getline()         获取字符串"></a>4、<code>cin.getline() </code>        获取字符串</h2><p>利用<code>cin.getline</code>获取字符串时候，换行符不会被取走，也不在缓冲区中，而是直接扔掉</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> buf[<span class="number">1024</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">	<span class="comment">//利用cin.getline获取字符串时候，换行符不会被取走，也不在缓冲区中，而是直接扔掉</span></span><br><span class="line">	cin.<span class="built_in">getline</span>(buf, <span class="number">1024</span>);</span><br><span class="line">	<span class="keyword">char</span> c = cin.<span class="built_in">get</span>();</span><br><span class="line">	<span class="keyword">if</span> (c == <span class="string">&#x27;\n&#x27;</span>)&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;换行符遗留在缓冲区&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span>&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;换行符不在缓冲区&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; buf &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="5、cin-ignore-忽略-默认忽略1个字符，-如果填入参数X，代表忽略X个字符"><a href="#5、cin-ignore-忽略-默认忽略1个字符，-如果填入参数X，代表忽略X个字符" class="headerlink" title="5、cin.ignore()      忽略 默认忽略1个字符， 如果填入参数X，代表忽略X个字符"></a>5、<code>cin.ignore()</code>      忽略 默认忽略1个字符， 如果填入参数X，代表忽略X个字符</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    cin.<span class="built_in">ignore</span>(<span class="number">2</span>);       <span class="comment">//忽略2个字符   输入：123456   缓冲区：3456---两个字符被忽略</span></span><br><span class="line">	<span class="keyword">char</span> c = cin.<span class="built_in">get</span>();  <span class="comment">//从缓冲区取走一个字符给c       缓冲区：456    </span></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;c = &quot;</span> &lt;&lt; c &lt;&lt; endl;        <span class="comment">//输出：c=3----两个字符被忽略</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6、cin-peek-偷窥"><a href="#6、cin-peek-偷窥" class="headerlink" title="6、cin.peek()          偷窥"></a>6、<code>cin.peek() </code>         偷窥</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> c = cin.<span class="built_in">peek</span>();          <span class="comment">//输入：12 窥探一个字符：1    缓冲区：12+\n</span></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;c = &quot;</span> &lt;&lt; c &lt;&lt; endl;      <span class="comment">//输出：c=1  </span></span><br><span class="line"></span><br><span class="line">	c = cin.<span class="built_in">get</span>();         <span class="comment">//从缓冲区取走一个字符给c       缓冲区：2+\n</span></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;c = &quot;</span> &lt;&lt; c &lt;&lt; endl;      <span class="comment">//输出：c=1</span></span><br><span class="line"></span><br><span class="line">	c = cin.<span class="built_in">get</span>();         <span class="comment">//从缓冲区取走一个字符给c       缓冲区：\n</span></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;c = &quot;</span> &lt;&lt; c &lt;&lt; endl;      <span class="comment">//输出：c=2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7、cin-putback-放回-放回原位置"><a href="#7、cin-putback-放回-放回原位置" class="headerlink" title="7、cin.putback()      放回 放回原位置"></a>7、<code>cin.putback()</code>      放回 放回原位置</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> c = cin.<span class="built_in">get</span>();       <span class="comment">//输入：123456 缓冲区：123456 获取一个字符给c</span></span><br><span class="line">	cin.<span class="built_in">putback</span>(c);          <span class="comment">//将c放回原位置</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">char</span> buf[<span class="number">1024</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line"></span><br><span class="line">	cin.<span class="built_in">getline</span>(buf, <span class="number">1024</span>);   <span class="comment">//从缓冲区获取一个字符串</span></span><br><span class="line">	cout &lt;&lt; buf &lt;&lt; endl;      <span class="comment">//输出：123456</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="8、案例一"><a href="#8、案例一" class="headerlink" title="8、案例一"></a>8、案例一</h2><p>判断用户输入的是数组还是字符串</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;请输入一个字符串或者数字&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">char</span> ch=cin.<span class="built_in">peek</span>();</span><br><span class="line">	<span class="keyword">if</span>(ch&gt;<span class="string">&#x27;0&#x27;</span>&amp;&amp;ch&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;</span><br><span class="line">		<span class="keyword">int</span> num;</span><br><span class="line">		cin&gt;&gt;num;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;用户输入的是数字&quot;</span>&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">char</span> buf[<span class="number">1024</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">		cin&gt;&gt;buf;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;用户输入的是字符串&quot;</span>&lt;&lt;endl;</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9、案例二"><a href="#9、案例二" class="headerlink" title="9、案例二"></a>9、案例二</h2><p>用户输入 0 ~ 10 之间的数字，如果输入有误，重新输入</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;请输入 0 ~ 10 之间的数字&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">int</span> num;</span><br><span class="line">	<span class="keyword">while</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">		cin &gt;&gt; num;</span><br><span class="line">		<span class="keyword">if</span> (num &gt;= <span class="number">0</span> &amp;&amp; num &lt;= <span class="number">10</span>)&#123;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;输入正确，输入值为：&quot;</span> &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//清空缓冲区 重置标志位 </span></span><br><span class="line">		cin.<span class="built_in">clear</span>();</span><br><span class="line">		cin.<span class="built_in">sync</span>();</span><br><span class="line">		<span class="comment">//cin.ignore();//vs2013以上版本加入 </span></span><br><span class="line">		<span class="comment">//如果标志位为 0  代表缓冲区正常    如果标志位为1   缓冲区异常</span></span><br><span class="line">		cout &lt;&lt; <span class="string">&quot; cin.fail()  = &quot;</span> &lt;&lt; cin.<span class="built_in">fail</span>() &lt;&lt; endl;	</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;输入有误，请重新输入： &quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="标准输出流"><a href="#标准输出流" class="headerlink" title="标准输出流"></a>标准输出流</h1><h2 id="1、字符输出"><a href="#1、字符输出" class="headerlink" title="1、字符输出"></a>1、字符输出</h2><ul>
<li><p><code>cout.flush()</code>            刷新缓冲区 Linux下有效</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;	</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">	<span class="comment">//刷新缓冲区</span></span><br><span class="line">	cout.<span class="built_in">flush</span>(); </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p><code>cout.put() </code>                向缓冲区写字符</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">	cout.<span class="built_in">put</span>(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">	<span class="comment">//链式编程</span></span><br><span class="line">	cout.<span class="built_in">put</span>(<span class="string">&#x27;h&#x27;</span>).<span class="built_in">put</span>(<span class="string">&#x27;e&#x27;</span>).<span class="built_in">put</span>(<span class="string">&#x27;l&#x27;</span>).<span class="built_in">put</span>(<span class="string">&#x27;l&#x27;</span>).<span class="built_in">put</span>(<span class="string">&#x27;o&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><code>cout.write()</code>             从<code>buffer</code>中写<code>num</code>个字节到当前输出流中</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span>* str = <span class="string">&quot;hello world!&quot;</span>;</span><br><span class="line">	cout.<span class="built_in">write</span>(str, <span class="built_in">strlen</span>(str));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span>* str = <span class="string">&quot;*************&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="built_in">strlen</span>(str); i ++)&#123;</span><br><span class="line">		cout.<span class="built_in">write</span>(str, i);</span><br><span class="line">		cout &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span>* str = <span class="string">&quot;*************&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="built_in">strlen</span>(str); i &gt; <span class="number">0</span>; i --)&#123;</span><br><span class="line">		cout.<span class="built_in">write</span>(str, i);</span><br><span class="line">		cout &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="2、格式化输出"><a href="#2、格式化输出" class="headerlink" title="2、格式化输出"></a>2、格式化输出</h2><p>在输出数据时，为简便起见，往往不指定输出的格式，由系统根据数据的类型采取默认的格式，但有时希望数据按指定的格式输出，如要求以十六进制或八进制形式输出一个整数，对输出的小数只保留两位小数等。有两种方法可以达到此目的。</p>
<p><code>#include &lt;iomanip&gt; </code>              控制符格式化输出  头文件</p>
<ol>
<li><p>使用控制符的方法</p>
<table>
<thead>
<tr>
<th>控制符</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>dec</td>
<td>设置整数的基数为10</td>
</tr>
<tr>
<td>hex</td>
<td>设置整数的基数为16</td>
</tr>
<tr>
<td>oct</td>
<td>设置 整数的基数为8</td>
</tr>
<tr>
<td>setbase(n)</td>
<td>设置整数的基数为n(n只能是16，10，8之一)</td>
</tr>
<tr>
<td>setfill(c)</td>
<td>设置填充字符c，c可以是字符常量或字符变量</td>
</tr>
<tr>
<td>setprecision(n)</td>
<td>设置实数的精度为n位。在以一般十进制小数形式输出时，n代表有效数字。在以fixed(固定小数位 数)形式和scientific(指数)形式输出时，n为小数位数。</td>
</tr>
<tr>
<td>setw(n)</td>
<td>设置字段宽度为n位。</td>
</tr>
<tr>
<td>setiosflags(ios::fixed)</td>
<td>设置浮点数以固定的小数位数显示。</td>
</tr>
<tr>
<td>setiosflags(ios::scientific)</td>
<td>设置浮点数以科学计数法(即指数形式)显示。</td>
</tr>
<tr>
<td>setiosflags(ios::left)</td>
<td>输出数据左对齐。</td>
</tr>
<tr>
<td>setiosflags(ios::right)</td>
<td>输出数据右对齐。</td>
</tr>
<tr>
<td>setiosflags(ios::shipws)</td>
<td>忽略前导的空格。</td>
</tr>
<tr>
<td>setiosflags(ios::uppercase)</td>
<td>在以科学计数法输出E和十六进制输出字母X时，以大写表示。</td>
</tr>
<tr>
<td>setiosflags(ios::showpos)</td>
<td>输出正数时，给出“+”号。</td>
</tr>
<tr>
<td>resetiosflags</td>
<td>终止已设置的输出格式状态，在括号中应指定内容。</td>
</tr>
</tbody></table>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> number = <span class="number">99</span>;</span><br><span class="line">	cout &lt;&lt; <span class="built_in">setw</span>(<span class="number">20</span>)     <span class="comment">//设置宽度</span></span><br><span class="line">		&lt;&lt; <span class="built_in">setfill</span>(<span class="string">&#x27;*&#x27;</span>)  <span class="comment">//设置填充</span></span><br><span class="line">		&lt;&lt; <span class="built_in">setiosflags</span>(ios::showbase)  <span class="comment">//显示基数</span></span><br><span class="line">		&lt;&lt; <span class="built_in">setiosflags</span>(ios::left)  <span class="comment">//设置左对齐</span></span><br><span class="line">		&lt;&lt; hex   <span class="comment">//显示十六进制</span></span><br><span class="line">		&lt;&lt; number</span><br><span class="line">		&lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>使用流对象的有关成员函数。</p>
<p>通过调用流对象<code>cout</code>中用于控制输出格式的成员函数来控制输出格式。用于控制输出格式的常用的成员函数如下：</p>
<table>
<thead>
<tr>
<th>流成员函数</th>
<th>与之作用相同的控制符</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>precision(n)</td>
<td>setprecision(n)</td>
<td>设置实 数的精度为n位。</td>
</tr>
<tr>
<td>width(n)</td>
<td>setw(n)</td>
<td>设置字段宽度为n位。</td>
</tr>
<tr>
<td>fill(c)</td>
<td>setfill(c)</td>
<td>设置填充字符c。</td>
</tr>
<tr>
<td>setf( )</td>
<td>setiosflags( )</td>
<td>设置输出格式状态，括号中应给出格式状态，内容与控制符setiosflags括号中内容相同。</td>
</tr>
<tr>
<td>ubsetf( )</td>
<td>resetiosflags( )</td>
<td>终止已设置的输出格式状态。</td>
</tr>
</tbody></table>
<p>流成员函数<code>setf</code>和控制符<code>setiosflags</code>括号中的参数表示格式状态，它是通过格式标志来指定的。格式标志在类<code>ios</code>中被定义为枚举值。因此在引用这些格式标志时要在前面加上类名<code>ios</code>和域运算符“::”。格式标志见表：</p>
<table>
<thead>
<tr>
<th>格式标志</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>ios::left</td>
<td>输出数据在本域宽范 围内左对齐</td>
</tr>
<tr>
<td>ios::right</td>
<td>输出数据在本域宽范围内右对齐</td>
</tr>
<tr>
<td>ios::internal</td>
<td>数值的符号位在域宽内左对齐，数值右对齐，中间由填充字符填充</td>
</tr>
<tr>
<td>ios::dec</td>
<td>设置整数的基数为10</td>
</tr>
<tr>
<td>ios::oct</td>
<td>设置整数的基数为8</td>
</tr>
<tr>
<td>ios::hex</td>
<td>设置整数的基数为16</td>
</tr>
<tr>
<td>ios::showbase</td>
<td>强制输出整数的基数(八进制以0打头，十六进制以0x打头)</td>
</tr>
<tr>
<td>ios::showpoint</td>
<td>强制输出浮点数的小点和尾数0</td>
</tr>
<tr>
<td>ios::uppercase</td>
<td>在以科学计数法输出E和十六进制输出字母X时，以大写表示</td>
</tr>
<tr>
<td>ios::showpos</td>
<td>输出正数时，给出“+”号。</td>
</tr>
<tr>
<td>ios::scientific</td>
<td>设置浮点数以科学计数法(即指数形式)显示</td>
</tr>
<tr>
<td>ios::fixed</td>
<td>设置浮点数以固定的小数位数显示</td>
</tr>
<tr>
<td>ios::unitbuf</td>
<td>每次输出后刷新所有流</td>
</tr>
<tr>
<td>ios::stdio</td>
<td>每次输出后清除 stdout，stderr</td>
</tr>
</tbody></table>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> number = <span class="number">99</span>;</span><br><span class="line">	cout.<span class="built_in">width</span>(<span class="number">20</span>); <span class="comment">//指定宽度为20</span></span><br><span class="line">	cout.<span class="built_in">fill</span>(<span class="string">&#x27;*&#x27;</span>); <span class="comment">//填充</span></span><br><span class="line">	cout.<span class="built_in">setf</span>(ios::left);  <span class="comment">//左对齐</span></span><br><span class="line">	cout.<span class="built_in">unsetf</span>(ios::dec); <span class="comment">//卸载十进制</span></span><br><span class="line">	cout.<span class="built_in">setf</span>(ios::hex);  <span class="comment">//安装十六进制</span></span><br><span class="line">	cout.<span class="built_in">setf</span>(ios::showbase);  <span class="comment">//显示基数</span></span><br><span class="line">	cout.<span class="built_in">unsetf</span>(ios::hex);  <span class="comment">//卸载十六进制</span></span><br><span class="line">	cout.<span class="built_in">setf</span>(ios::oct);   <span class="comment">//安装八进制</span></span><br><span class="line">	cout &lt;&lt; number &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="3、注意事项"><a href="#3、注意事项" class="headerlink" title="3、注意事项"></a>3、注意事项</h2><ol>
<li><p>成员函数width(n)和控制符<code>setw(n)</code>只对其后的第一个输出项有效。如：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cout. <span class="built_in">width</span>(<span class="number">6</span>);</span><br><span class="line">cout &lt;&lt;<span class="number">20</span> &lt;&lt;<span class="number">3.14</span>&lt;&lt;endl;</span><br><span class="line"><span class="comment">//输出结果为:****203.14</span></span><br></pre></td></tr></table></figure>

<p>在输出第一个输出项20时，域宽为6，因此在20前面有4个空格，在输出3.14时，width (6)已不起作用，此时按系统默认的域宽输出（按数据实际长度输出）。如果要求在输出数据时都按指定的同一域宽n输出，不能只调用一次width(n)， 而必须在输出每一项前都调用一次width(n)</p>
</li>
<li><p>格式标志表中的输出格式状态分为5组，每一组中同时只能选用一种（例如<code>dec</code>、<code>hex</code>和<code>oct</code>中只能选一，它们是互相排斥的）。在用成员函数<code>setf</code>和 控制符<code>setiosflags</code>设置输出格式状态后，如果想改设置为同组的另一状态，应当调用成员函数<code>unsetf</code>（对应于成员函数self）或 <code>resetiosflags</code>（对应于控制符<code>setiosflags</code>），先终止原来设置的状态。然后再设置其他状态，大家可以从本程序中看到这点。程序在开 始虽然没有用成员函数self和控制符<code>setiosflags</code>设置用<code>dec</code>输出格式状态，但系统默认指定为<code>dec</code>，因此要改变为<code>hex</code>或<code>oct</code>，也应当先 用<code>unsetf</code> 函数终止原来设置。如果删去程序中的第7行和第10行，虽然在第8行和第11行中用成员函数<code>setf</code>设置了<code>hex</code>和<code>oct</code>格式，由于未终止<code>dec</code>格式，因 此<code>hex</code>和<code>oct</code>的设置均不起作用，系统依然以十进制形式输出。</p>
<p>同理，程序的<code>unsetf </code>函数的调用也是不可缺少的。</p>
</li>
<li><p>用<code>setf </code>函数设置格式状态时，可以包含两个或多个格式标志，由于这些格式标志在<code>ios</code>类中被定义为枚举值，每一个格式标志以一个二进位代表，因此可以用位或运算符“|”组合多个格式标志。如倒数第5、第6行可以用下面一行代替：</p>
<p>  <code>cout.setf(ios::internal | ios::showpos); </code> //包含两个状态标志，用”|”组合</p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://smilesrx.github.io/2021/04/21/C++/C++%E5%86%85%E8%81%94%E5%87%BD%E6%95%B0/C++%E5%86%85%E8%81%94%E5%87%BD%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CandyKing">
      <meta itemprop="description" content="虾米">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逆玺之路">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/04/21/C++/C++%E5%86%85%E8%81%94%E5%87%BD%E6%95%B0/C++%E5%86%85%E8%81%94%E5%87%BD%E6%95%B0/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-21 20:23:45" itemprop="dateCreated datePublished" datetime="2021-04-21T20:23:45+08:00">2021-04-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-10 22:34:04" itemprop="dateModified" datetime="2020-10-10T22:34:04+08:00">2020-10-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="内联函数引出宏缺陷"><a href="#内联函数引出宏缺陷" class="headerlink" title="内联函数引出宏缺陷"></a>内联函数引出宏缺陷</h1><p>在c中我们经常把一些短并且执行频繁的计算写成宏，而不是函数，这样做的理由是为了执行效率，宏可以避免函数调用时入栈、出栈的开销</p>
<h2 id="1、宏必须要加括号才能保证运算的准确性"><a href="#1、宏必须要加括号才能保证运算的准确性" class="headerlink" title="1、宏必须要加括号才能保证运算的准确性"></a>1、宏必须要加括号才能保证运算的准确性</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> add(x,y) x+y</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> add1(x,y) ((x)+(y))</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add2</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x+y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x=<span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span> y=<span class="number">5</span>;</span><br><span class="line">    <span class="comment">//1、宏函数</span></span><br><span class="line">    cout&lt;&lt;<span class="built_in">add</span>(x,y)&lt;&lt;endl;        <span class="comment">//结果：15</span></span><br><span class="line">    cout&lt;&lt;<span class="built_in">add</span>(x,y)*<span class="number">10</span>&lt;&lt;endl;     <span class="comment">//结果：60   预期结果：（10+5）*10=150</span></span><br><span class="line">    cout&lt;&lt;<span class="built_in">add1</span>(x,y)*<span class="number">10</span>&lt;&lt;endl;    <span class="comment">//结果：150</span></span><br><span class="line">    <span class="comment">//2、普通函数</span></span><br><span class="line">    cout&lt;&lt;<span class="built_in">add2</span>(x,y)*<span class="number">10</span>&lt;&lt;endl;    <span class="comment">//结果：150</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2、即使加了括号也无法避免一些错误"><a href="#2、即使加了括号也无法避免一些错误" class="headerlink" title="2、即使加了括号也无法避免一些错误"></a>2、即使加了括号也无法避免一些错误</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> compare(a,b) (((a)&gt;(b))?(a):(b))</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">compare1</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a&gt;b?a:b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a=<span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span> b=<span class="number">5</span>;</span><br><span class="line">    <span class="comment">//1、宏函数</span></span><br><span class="line">    cout&lt;&lt;<span class="built_in">compare</span>(a,b)&lt;&lt;endl;      <span class="comment">//结果：10</span></span><br><span class="line">    cout&lt;&lt;<span class="built_in">compare</span>(++a,b)&lt;&lt;endl;    <span class="comment">//结果：12</span></span><br><span class="line">    cout&lt;&lt;<span class="built_in">compare</span>(a++,b)&lt;&lt;endl;    <span class="comment">//结果：13</span></span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;a=&quot;</span>&lt;&lt;a&lt;&lt;endl;           <span class="comment">//结果：14</span></span><br><span class="line">    <span class="comment">//2、普通函数</span></span><br><span class="line">    <span class="keyword">int</span> m=<span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span> n=<span class="number">5</span>;</span><br><span class="line">    cout&lt;&lt;<span class="built_in">compare1</span>(m,n)&lt;&lt;endl;      <span class="comment">//结果：10</span></span><br><span class="line">    cout&lt;&lt;<span class="built_in">compare1</span>(++m,n)&lt;&lt;endl;    <span class="comment">//结果：11</span></span><br><span class="line">    cout&lt;&lt;<span class="built_in">compare1</span>(m++,n)&lt;&lt;endl;    <span class="comment">//结果：11</span></span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;m=&quot;</span>&lt;&lt;m&lt;&lt;endl;            <span class="comment">//结果：12</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3、预定义宏函数没有作用域概念，无法作为一个类的成员函数"><a href="#3、预定义宏函数没有作用域概念，无法作为一个类的成员函数" class="headerlink" title="3、预定义宏函数没有作用域概念，无法作为一个类的成员函数"></a>3、预定义宏函数没有作用域概念，无法作为一个类的成员函数</h2><p>也就是说预定义宏没有办法表示类的范围</p>
<h1 id="内联函数"><a href="#内联函数" class="headerlink" title="内联函数"></a>内联函数</h1><ul>
<li>内联函数本身也是一个真正的函数</li>
<li>内联函数具有普通函数的所有行为</li>
<li>唯一不同之处在于内联函数会在适当的地方像预定义宏一样展开，所以不需要函数调用的开销</li>
</ul>
<h2 id="1、内联函数定义方法"><a href="#1、内联函数定义方法" class="headerlink" title="1、内联函数定义方法"></a>1、内联函数定义方法</h2><p>在普通函数前面加关键字<code>inline</code>使之成为内联函数，但必须注意函数申明和实现中都加关键字<code>inline</code>才行</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//申明内联函数</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//内联函数实现</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a+b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>内联函数的确占用空间，但是内联函数相对于普通函数的优势只是省去了函数调用时候的<strong>压栈</strong>，<strong>跳转</strong>，<strong>返回</strong>的开销。我们可以理解为内联函数是以<strong>空间换时间</strong>。</p>
<h2 id="2、类内部的内联函数"><a href="#2、类内部的内联函数" class="headerlink" title="2、类内部的内联函数"></a>2、类内部的内联函数</h2><p>为了定义内联函数，通常必须在函数定义前面放一个<code>inline</code>关键字。但是在类内部定义内联函数时并不是必须的。任何在类内部定义的函数自动成为内联函数。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> m_Age;   <span class="comment">//年龄</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Set_Age</span><span class="params">(<span class="keyword">int</span> age)</span>   <span class="comment">//自动转换为内联函数</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        m_Age=age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3、以下情况编译器可能考虑不会将函数进行内联编译"><a href="#3、以下情况编译器可能考虑不会将函数进行内联编译" class="headerlink" title="3、以下情况编译器可能考虑不会将函数进行内联编译"></a>3、以下情况编译器可能考虑不会将函数进行内联编译</h2><ol>
<li>存在任何形式的循环语句</li>
<li>存在过多的条件判断语句</li>
<li>函数体过于庞大</li>
<li>对函数进行取址操作  </li>
</ol>
<p>内联仅仅只是给编译器一个建议，编译器不一定会接受这种建议，如果你没有将函数声明为内联函数，那么编译器也可能将此函数做内联编译。一个好的编译器将会内联小的、简单的函数。</p>
<h2 id="4、编译器对函数的处理"><a href="#4、编译器对函数的处理" class="headerlink" title="4、编译器对函数的处理"></a>4、编译器对函数的处理</h2><ol>
<li>对于任何类型的函数，编译器会将函数类型(包括函数名字，参数类型，返回值类型)放入到符号表中。同样，当编译器看到内联函数，并对内联函数体进行分析没有发现错误时，也会将内联函数放入符号表。</li>
<li>当调用一个内联函数的时候，编译器首先确保传入参数类型是正确匹配的，或者如果类型不完全匹配，但是可以将其转换为正确类型，并且返回值在目标表达式里匹配正确类型，或者可以转换为目标类型，内联函数就会直接替换函数调用，这就消除了函数调用的开销。</li>
<li>假如内联函数是成员函数，对象this指针也会被放入合适位置。</li>
<li>类型检查和类型转换、包括在合适位置放入对象this指针这些都是预处理器（宏）不能完成的。</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://smilesrx.github.io/2021/04/21/C++/C++%E6%A8%A1%E5%9E%8B%E5%88%9D%E6%8E%A2/C++%E6%A8%A1%E5%9E%8B%E5%88%9D%E6%8E%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CandyKing">
      <meta itemprop="description" content="虾米">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逆玺之路">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/04/21/C++/C++%E6%A8%A1%E5%9E%8B%E5%88%9D%E6%8E%A2/C++%E6%A8%A1%E5%9E%8B%E5%88%9D%E6%8E%A2/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-21 20:23:45" itemprop="dateCreated datePublished" datetime="2021-04-21T20:23:45+08:00">2021-04-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-19 20:12:58" itemprop="dateModified" datetime="2020-10-19T20:12:58+08:00">2020-10-19</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="成员变量和函数的存储"><a href="#成员变量和函数的存储" class="headerlink" title="成员变量和函数的存储"></a>成员变量和函数的存储</h1><p>在c语言中，“数据”和“处理数据的操作（函数）”是分开来声明的，也就是说，语言本身并没有支持“数据和函数”之间的关联性。</p>
<p>在c++中，在类中定义数据和函数，来实现数据和函数直接的绑定。</p>
<p>在C++类中有两种成员数据：<code>static</code>、<code>nonstatic</code>；三种成员函数：<code>static</code>、<code>nonstatic</code>、<code>virtual</code>。</p>
<ul>
<li>c++中的<strong>非静态数据成员</strong>直接内含在类对象中，就像c <code>struct</code>一样。</li>
<li>成员函数(member function)虽然内含在class声明之内，却不出现在对象中。</li>
<li>每一个非内联成员函数(non-inline member function)只会诞生一份函数实例。</li>
<li>类中的成员变量 和 成员函数  是分开存储的。</li>
<li>空类的<code>sizeof</code>结果为 1。</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass01</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="keyword">int</span> m_A;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass02</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="keyword">int</span> mA;</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">int</span> m_B;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass03</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">printMyClass</span><span class="params">()</span></span>&#123;cout &lt;&lt; <span class="string">&quot;hello world!&quot;</span> &lt;&lt; endl;&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="keyword">int</span> m_A;</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">int</span> m_B;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass04</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">printMyClass</span><span class="params">()</span></span>&#123;cout &lt;&lt; <span class="string">&quot;hello world!&quot;</span> &lt;&lt; endl;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ShowMyClass</span><span class="params">()</span></span>&#123;cout &lt;&lt; <span class="string">&quot;hello world！&quot;</span> &lt;&lt; endl;&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="keyword">int</span> m_A;</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">int</span> m_B;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass05</span>&#123;</span>&#125;;    <span class="comment">//空类</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	MyClass01 mclass01;</span><br><span class="line">	MyClass02 mclass02;</span><br><span class="line">	MyClass03 mclass03;</span><br><span class="line">	MyClass04 mclass04;</span><br><span class="line">    MyClass05 mclass05;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;MyClass01:&quot;</span> &lt;&lt; <span class="built_in"><span class="keyword">sizeof</span></span>(mclass01) &lt;&lt; endl; <span class="comment">//4</span></span><br><span class="line">	<span class="comment">//静态数据成员并不保存在类对象中</span></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;MyClass02:&quot;</span> &lt;&lt; <span class="built_in"><span class="keyword">sizeof</span></span>(mclass02) &lt;&lt; endl; <span class="comment">//4</span></span><br><span class="line">	<span class="comment">//非静态成员函数不保存在类对象中</span></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;MyClass03:&quot;</span> &lt;&lt; <span class="built_in"><span class="keyword">sizeof</span></span>(mclass03) &lt;&lt; endl; <span class="comment">//4</span></span><br><span class="line">	<span class="comment">//静态成员函数也不保存在类对象中</span></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;MyClass04:&quot;</span> &lt;&lt; <span class="built_in"><span class="keyword">sizeof</span></span>(mclass04) &lt;&lt; endl; <span class="comment">//4</span></span><br><span class="line">    <span class="comment">//空类</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;MyClass05:&quot;</span> &lt;&lt; <span class="built_in"><span class="keyword">sizeof</span></span>(mclass05) &lt;&lt; endl; <span class="comment">//1</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结论：<strong>C++类对象中的变量和函数是分开存储</strong></p>
<h1 id="this指针"><a href="#this指针" class="headerlink" title="this指针"></a>this指针</h1><p>本质：<code>Person * const this</code>—指针常量（指针的指向不可以修改）</p>
<p>c++的数据和操作也是分开存储，并且每一个非内联成员函数(non-inline member function)只会诞生一份函数实例，也就是说多个同类型的对象会共用一块代码</p>
<p>那么问题是：这一块代码是如何区分那个对象调用自己的呢？</p>
<p>c++通过提供特殊的对象指针，this指针，解决上述问题。</p>
<h2 id="1、this指针特点"><a href="#1、this指针特点" class="headerlink" title="1、this指针特点"></a>1、this指针特点</h2><ol>
<li><p>this指针指向被调用的成员函数所属的对象</p>
</li>
<li><p>this指针是隐含在对象成员函数内的一种指针</p>
<p>当一个对象被创建后，它的每一个成员函数都含有一个系统自动生成的隐含指针this，用以保存这个对象的地址，也就是说虽然我们没有写上this指针，编译器在编译的时候也是会加上的。</p>
</li>
<li><p>this也称为“指向本对象的指针”。<code>*this</code>就是本体</p>
</li>
<li><p>this指针并不是对象的一部分，不会影响<code>sizeof(对象)</code>的结果</p>
</li>
<li><p>this指针可以解决名称冲突</p>
</li>
</ol>
<p>this指针是C++实现封装的一种机制，它将对象和该对象调用的成员函数连接在一起</p>
<p><strong>注意：</strong>静态成员函数内部没有this指针，静态成员函数不能操作非静态成员变量</p>
<h2 id="2、this-指针的使用"><a href="#2、this-指针的使用" class="headerlink" title="2、this 指针的使用"></a>2、this 指针的使用</h2><ul>
<li><p>当形参和成员变量同名时，可用this指针来区分</p>
</li>
<li><p>在类的非静态成员函数中返回对象本身，可使用<code>return *this</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">//1. 当形参名和成员变量名一样时，this指针可用来区分</span></span><br><span class="line">	<span class="built_in">Person</span>(string name,<span class="keyword">int</span> age)</span><br><span class="line">    &#123;</span><br><span class="line">		<span class="comment">//name = name;</span></span><br><span class="line">		<span class="comment">//age = age;    //输出错误</span></span><br><span class="line">		<span class="keyword">this</span>-&gt;name = name;</span><br><span class="line">		<span class="keyword">this</span>-&gt;age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//2. 返回对象本身的引用</span></span><br><span class="line">	<span class="comment">//重载赋值操作符</span></span><br><span class="line">	<span class="comment">//其实也是两个参数，其中隐藏了一个this指针</span></span><br><span class="line">	<span class="function">Person <span class="title">PersonPlusPerson</span><span class="params">(Person&amp; person)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">		string newname = <span class="keyword">this</span>-&gt;name + person.name;</span><br><span class="line">		<span class="keyword">int</span> newage = <span class="keyword">this</span>-&gt;age + person.age;</span><br><span class="line">		<span class="function">Person <span class="title">newperson</span><span class="params">(newname, newage)</span></span>;</span><br><span class="line">		<span class="keyword">return</span> newperson;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">ShowPerson</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;Name:&quot;</span> &lt;&lt; name &lt;&lt; <span class="string">&quot; Age:&quot;</span> &lt;&lt; age &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	string name;</span><br><span class="line">	<span class="keyword">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3. 成员函数和全局函数(Perosn对象相加)</span></span><br><span class="line"><span class="function">Person <span class="title">PersonPlusPerson</span><span class="params">(Person&amp; p1,Person&amp; p2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	string newname = p1.name + p2.name;</span><br><span class="line">	<span class="keyword">int</span> newage = p1.age + p2.age;</span><br><span class="line">	<span class="function">Person <span class="title">newperson</span><span class="params">(newname,newage)</span></span>;</span><br><span class="line">	<span class="keyword">return</span> newperson;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">Person <span class="title">person</span><span class="params">(<span class="string">&quot;John&quot;</span>,<span class="number">100</span>)</span></span>;</span><br><span class="line">	person.<span class="built_in">ShowPerson</span>();                    <span class="comment">//Name:John Age:100 </span></span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;---------&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="function">Person <span class="title">person1</span><span class="params">(<span class="string">&quot;John&quot;</span>,<span class="number">20</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">person2</span><span class="params">(<span class="string">&quot;001&quot;</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line">	<span class="comment">//1.全局函数实现两个对象相加</span></span><br><span class="line">	Person person3 = <span class="built_in">PersonPlusPerson</span>(person1, person2);</span><br><span class="line">	person1.<span class="built_in">ShowPerson</span>();                 <span class="comment">//Name:John Age:20  </span></span><br><span class="line">	person2.<span class="built_in">ShowPerson</span>();                 <span class="comment">//Name:001 Age:10 </span></span><br><span class="line">	person3.<span class="built_in">ShowPerson</span>();                 <span class="comment">//Name:John001 Age:30 </span></span><br><span class="line">	<span class="comment">//2. 成员函数实现两个对象相加</span></span><br><span class="line">	Person person4 = person1.<span class="built_in">PersonPlusPerson</span>(person2);</span><br><span class="line">	person4.<span class="built_in">ShowPerson</span>();                 <span class="comment">//Name:John001 Age:30 </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>空指针调用类成员</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Person</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        m_Age=<span class="number">50</span>;</span><br><span class="line">        m_ID=<span class="number">100</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">funcA</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;hello func!&quot;</span>&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">ShowPerson</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;姓名：&quot;</span>&lt;&lt;<span class="keyword">this</span>-&gt;m_Age&lt;&lt;<span class="string">&quot;ID：&quot;</span>&lt;&lt;<span class="keyword">this</span>-&gt;m_ID&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> m_Age;</span><br><span class="line">    <span class="keyword">int</span> m_ID;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Person *person=<span class="literal">NULL</span>;   <span class="comment">//空指针</span></span><br><span class="line">    person-&gt;<span class="built_in">funcA</span>();</span><br><span class="line">    <span class="comment">//person-&gt;ShowPerson();   //函数体内用到this指针，导致程序崩掉 </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="const修饰成员函数-常函数"><a href="#const修饰成员函数-常函数" class="headerlink" title="const修饰成员函数(常函数)"></a>const修饰成员函数(常函数)</h1><p>本质：<code>const Person * const this</code>—-（this的指向和指向的值都不可以修改）</p>
<p>在函数括号后面加上<code>const</code>——-<code>类型 函数名（参数表）const &#123;函数体&#125;</code>—-<strong>成员变量不可修改,除了mutable变量</strong></p>
<p><code>const</code>目的是为了修饰成员函数中的this指针，让指针指向的值不可以修改</p>
<ul>
<li><p>用<code>const</code>修饰的成员函数时，<code>const</code>修饰<strong>this指针指向的内存区域</strong>，成员函数体内不可以修改本类中的任何普通成员变量</p>
</li>
<li><p>当成员变量类型符前用<code>mutable</code>修饰时例外。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//const修饰成员函数</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>()</span><br><span class="line">    &#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_Age = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_ID = <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//在函数括号后面加上const,修饰成员变量不可修改,除了mutable变量</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">		<span class="comment">//this-&gt;m_Age = 200; //m_Age不可修改 --- [Error] assignment of member &#x27;Person::m_Age&#x27; in read-only </span></span><br><span class="line">		<span class="keyword">this</span>-&gt;m_ID = <span class="number">10</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">ShowPerson</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;m_ID:&quot;</span> &lt;&lt; m_ID &lt;&lt; <span class="string">&quot; m_Age:&quot;</span> &lt;&lt; m_Age &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> m_Age;</span><br><span class="line">	<span class="keyword">mutable</span> <span class="keyword">int</span> m_ID;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Person person;</span><br><span class="line">	person.<span class="built_in">func</span>();</span><br><span class="line">	person.<span class="built_in">ShowPerson</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="const修饰对象-常对象"><a href="#const修饰对象-常对象" class="headerlink" title="const修饰对象(常对象)"></a>const修饰对象(常对象)</h1><ul>
<li><p>常对象只能调用<code>const</code>修饰的成员函数</p>
</li>
<li><p>常对象可访问 <code>const</code> 或<code>非 const </code>数据成员，不能修改，除非成员用mutable修饰。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>()</span><br><span class="line">    &#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_Age = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_ID = <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">ChangePerson</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">		<span class="comment">//m_Age = 50;   //[Error] assignment of member &#x27;Person::m_Age&#x27; in read-only object</span></span><br><span class="line">		m_ID = <span class="number">100</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">ShowPerson</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;m_Age = <span class="number">1000</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;m_ID:&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_ID &lt;&lt; <span class="string">&quot;  m_Age:&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_Age &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="keyword">int</span> m_Age;</span><br><span class="line">	<span class="keyword">mutable</span> <span class="keyword">int</span> m_ID;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">	<span class="keyword">const</span> Person person;      <span class="comment">//常对象</span></span><br><span class="line">	<span class="comment">//1. 可访问数据成员</span></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;m_Age:&quot;</span> &lt;&lt; person.m_Age &lt;&lt; endl;</span><br><span class="line">	<span class="comment">//person.m_Age = 300;  //不可修改</span></span><br><span class="line">	person.m_ID = <span class="number">1001</span>;     <span class="comment">//但是可以修改mutable修饰的成员变量</span></span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;m_ID:&quot;</span>&lt;&lt;person.m_ID&lt;&lt;endl; </span><br><span class="line">	<span class="comment">//2. 只能访问const修饰的函数</span></span><br><span class="line">	<span class="comment">//person.ShowPerson();</span></span><br><span class="line">	person.<span class="built_in">ChangePerson</span>();</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;m_Age:&quot;</span> &lt;&lt; person.m_Age &lt;&lt;<span class="string">&quot;  m_ID:&quot;</span>&lt;&lt;person.m_ID&lt;&lt;endl; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://smilesrx.github.io/2021/04/21/C++/C++%E6%A8%A1%E6%9D%BF/C++%E6%A8%A1%E6%9D%BF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CandyKing">
      <meta itemprop="description" content="虾米">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逆玺之路">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/04/21/C++/C++%E6%A8%A1%E6%9D%BF/C++%E6%A8%A1%E6%9D%BF/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-21 20:23:45" itemprop="dateCreated datePublished" datetime="2021-04-21T20:23:45+08:00">2021-04-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-21 20:32:45" itemprop="dateModified" datetime="2020-10-21T20:32:45+08:00">2020-10-21</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="C-模板"><a href="#C-模板" class="headerlink" title="C++模板"></a>C++模板</h1><p>c++提供了函数模板(function template.)</p>
<p>所谓函数模板：实际上是建立一个<strong>通用函数</strong>，其<strong>函数类型和形参类型不具体制定，用一个虚拟的类型来代表</strong>。这个通用函数就成为函数模板。凡是函数体相同的函数都可以用这个模板代替，不必定义多个函数，只需在模板中定义一次即可。在调用函数时系统会根据实参的类型来取代模板中的虚拟类型，从而实现不同函数的功能。</p>
<ul>
<li>c++提供两种模板机制：<strong>函数模板</strong>和<strong>类模板</strong></li>
<li>类属 - 类型参数化，又称参数模板</li>
</ul>
<p>总结：</p>
<ul>
<li>模板把函数或类要处理的数据类型参数化，表现为参数的多态性，成为类属。</li>
<li>模板用于表达逻辑结构相同，但具体数据元素类型不同的数据对象的通用行为。</li>
</ul>
<h1 id="函数模板"><a href="#函数模板" class="headerlink" title="函数模板"></a>函数模板</h1><p><strong>用模板是为了实现泛型，可以减轻编程的工作量，增强函数的重用性</strong></p>
<h2 id="1、函数模板实现任意类型的数据的值交换"><a href="#1、函数模板实现任意类型的数据的值交换" class="headerlink" title="1、函数模板实现任意类型的数据的值交换"></a>1、函数模板实现任意类型的数据的值交换</h2><p>如果我要交换double类型数据，那么还需要些一个double类型数据交换的函数</p>
<p>繁琐，写的函数越多，当交换逻辑发生变化的时候，所有的函数都需要修改，无形当中增加了代码的维护难度</p>
<p>如果能把类型作为参数传递进来就好了，传递int就是Int类型交换，传递char就是char类型交换</p>
<p>我们有一种技术，可以实现类型的参数化—函数模板</p>
<ul>
<li><p>交换函数模板</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Swap</span><span class="params">(T &amp;a,T &amp;b)</span></span>&#123;</span><br><span class="line">	T tmp=a;</span><br><span class="line">	a=b;</span><br><span class="line">	b=tmp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>int—整型测试</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">int</span> b=<span class="number">5</span>;</span><br><span class="line">	<span class="built_in">Swap</span>(a,b);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;a=&quot;</span>&lt;&lt;a&lt;&lt;<span class="string">&quot; b=&quot;</span>&lt;&lt;b&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>double类型测试</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">double</span> a=<span class="number">12.5</span>d;</span><br><span class="line">	<span class="keyword">double</span> b=<span class="number">5.7</span>d;</span><br><span class="line">	<span class="built_in">Swap</span>(a,b);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;a=&quot;</span>&lt;&lt;a&lt;&lt;<span class="string">&quot; b=&quot;</span>&lt;&lt;b&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>float类型测试</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">float</span> a=<span class="number">1.2f</span>;</span><br><span class="line">	<span class="keyword">float</span> b=<span class="number">3.4f</span>;</span><br><span class="line">	<span class="built_in">Swap</span>(a,b);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;a=&quot;</span>&lt;&lt;a&lt;&lt;<span class="string">&quot; b=&quot;</span>&lt;&lt;b&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>char—字符类型测试</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test03</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> a=<span class="string">&#x27;8&#x27;</span>;</span><br><span class="line">	<span class="keyword">char</span> b=<span class="string">&#x27;4&#x27;</span>;</span><br><span class="line">	<span class="built_in">Swap</span>(a,b);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;a=&quot;</span>&lt;&lt;a&lt;&lt;<span class="string">&quot; b=&quot;</span>&lt;&lt;b&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="2、函数模板和普通函数的区别"><a href="#2、函数模板和普通函数的区别" class="headerlink" title="2、函数模板和普通函数的区别"></a>2、函数模板和普通函数的区别</h2><ul>
<li><p>函数模板不允许自动类型转换，必须严格匹配类型</p>
</li>
<li><p>普通函数能够自动进行类型转化</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="function">T <span class="title">Add</span><span class="params">(T &amp;a,T &amp;b)</span></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;模板函数调用&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">return</span> a+b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;普通函数调用&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">return</span> a+b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a=<span class="number">5</span>;</span><br><span class="line">	<span class="keyword">char</span> b=<span class="string">&#x27;A&#x27;</span>;</span><br><span class="line">	cout&lt;&lt;<span class="built_in">Add</span>(a,a)&lt;&lt;endl;      <span class="comment">//普通函数</span></span><br><span class="line">	cout&lt;&lt;<span class="built_in">Add</span>(b,b)&lt;&lt;endl;  <span class="comment">//模板函数</span></span><br><span class="line">	cout&lt;&lt;<span class="built_in">Add</span>(a,b)&lt;&lt;endl;      <span class="comment">//普通函数</span></span><br><span class="line">	cout&lt;&lt;<span class="built_in">Add</span>(b,a)&lt;&lt;endl;      <span class="comment">//普通函数</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="3、函数模板和普通函数在一起调用规则"><a href="#3、函数模板和普通函数在一起调用规则" class="headerlink" title="3、函数模板和普通函数在一起调用规则"></a>3、函数模板和普通函数在一起调用规则</h2><ul>
<li><p>如果函数模板和普通函数都可以调用，那么优先调用普通函数</p>
</li>
<li><p>如果想强制调用函数模板，可以使用空模板参数列表<code>myPrint&lt;&gt;(a, b);</code></p>
</li>
<li><p>函数模板也可以发生函数重载</p>
</li>
<li><p>如果函数模板能产生更好的匹配，那么优先使用函数模板</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="function">T <span class="title">Add</span><span class="params">(T &amp;a,T &amp;b)</span></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;模板函数调用&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">return</span> a+b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;普通函数调用&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">return</span> a+b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a=<span class="number">5</span>;</span><br><span class="line">	<span class="keyword">int</span> b=<span class="number">10</span>;</span><br><span class="line">	<span class="keyword">int</span> c=<span class="string">&#x27;A&#x27;</span>;</span><br><span class="line">	<span class="keyword">char</span> d=<span class="string">&#x27;B&#x27;</span>;</span><br><span class="line">	cout&lt;&lt;<span class="built_in">Add</span>(a,b)&lt;&lt;endl;     <span class="comment">//优先普通函数（模板和普通函数都可以匹配）</span></span><br><span class="line">	cout&lt;&lt;Add&lt;&gt;(a,b)&lt;&lt;endl;   <span class="comment">//使用空模板参数强制匹配模板韩顺</span></span><br><span class="line">	cout&lt;&lt;<span class="built_in">Add</span>(c,d)&lt;&lt;endl;     <span class="comment">//模板函数有更好的匹配---优先使用模板函数</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//函数模板重载</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="function">T <span class="title">Add</span><span class="params">(T &amp;a,T &amp;b,T &amp;c)</span></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;模板函数调用&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">return</span> a+b+c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a=<span class="number">5</span>;</span><br><span class="line">	<span class="keyword">int</span> b=<span class="number">10</span>;</span><br><span class="line">	<span class="keyword">int</span> c=<span class="number">15</span>;</span><br><span class="line">    cout&lt;&lt;Add&lt;&gt;(a,b)&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;<span class="built_in">Add</span>(a,b,c)&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="4、函数模板的实现机制"><a href="#4、函数模板的实现机制" class="headerlink" title="4、函数模板的实现机制"></a>4、函数模板的实现机制</h2><ul>
<li>编译器并不是把函数模板处理成能够处理任何类型的函数</li>
<li>函数模板通过具体类型产生不同的函数 —  通过函数模板产生的函数 称为模板函数</li>
<li>编译器会对函数模板进行两次编译，在声明的地方对模板代码本身进行编译，在调用的地方对参数替换后的代码进行编译。</li>
</ul>
<h2 id="5、函数模板的局限性"><a href="#5、函数模板的局限性" class="headerlink" title="5、函数模板的局限性"></a>5、函数模板的局限性</h2><p>模板并不是真实的通用，对于自定义数据类型，可以使用具体化技术，实现对自定义数据类型特殊使用</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="comment">//普通交换模板函数 </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Swap</span><span class="params">(T &amp;a,T &amp;b)</span></span>&#123;</span><br><span class="line">	T tmp=a;</span><br><span class="line">	a=b;</span><br><span class="line">	b=tmp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a=<span class="number">5</span>;</span><br><span class="line">	<span class="keyword">int</span> b=<span class="number">10</span>;</span><br><span class="line">	<span class="built_in">Swap</span>(a,b);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;a=&quot;</span>&lt;&lt;a&lt;&lt;<span class="string">&quot; b=&quot;</span>&lt;&lt;b&lt;&lt;endl; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>()&#123;&#125;</span><br><span class="line">	<span class="built_in">Person</span>(string name,<span class="keyword">int</span> age)&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_Name=name;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_Age=age;</span><br><span class="line">	&#125;</span><br><span class="line">	string m_Name;</span><br><span class="line">	<span class="keyword">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//显示具体化的原型和定意思以template&lt;&gt;开头，并通过名称来指出类型</span></span><br><span class="line"><span class="comment">//具体化优先于常规模板</span></span><br><span class="line"><span class="keyword">template</span>&lt;&gt; <span class="keyword">void</span> Swap&lt;Person&gt;(Person &amp;a,Person &amp;b)&#123;</span><br><span class="line">	Person tmp;</span><br><span class="line">	tmp.m_Name=a.m_Name;</span><br><span class="line">	a.m_Name=b.m_Name;</span><br><span class="line">	b.m_Name=tmp.m_Name;</span><br><span class="line">	</span><br><span class="line">	tmp.m_Age=a.m_Age;</span><br><span class="line">	a.m_Age=b.m_Age;</span><br><span class="line">	b.m_Age=tmp.m_Age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;不知火舞&quot;</span>,<span class="number">55</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;娜可露露&quot;</span>,<span class="number">66</span>)</span></span>;</span><br><span class="line">	<span class="built_in">Swap</span>(p1,p2);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;p1.name:&quot;</span>&lt;&lt;p1.m_Name&lt;&lt;<span class="string">&quot; p1.age:&quot;</span>&lt;&lt;p1.m_Age&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;p2.name:&quot;</span>&lt;&lt;p2.m_Name&lt;&lt;<span class="string">&quot; p2.age:&quot;</span>&lt;&lt;p2.m_Age&lt;&lt;endl; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="类模板"><a href="#类模板" class="headerlink" title="类模板"></a>类模板</h1><p>有两个或多个类，其功能是相同的，仅仅是数据类型不同</p>
<h2 id="1、类模板用于实现类所需数据的类型参数化"><a href="#1、类模板用于实现类所需数据的类型参数化" class="headerlink" title="1、类模板用于实现类所需数据的类型参数化"></a>1、类模板用于实现类所需数据的类型参数化</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">NameType</span>,<span class="keyword">class</span> <span class="title">AgeType</span>&gt;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Student</span>(NameType name,AgeType age)&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_Name=name;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_Age=age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Show</span><span class="params">()</span></span>&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;name:&quot;</span>&lt;&lt;<span class="keyword">this</span>-&gt;m_Name&lt;&lt;<span class="string">&quot; age:&quot;</span>&lt;&lt;<span class="keyword">this</span>-&gt;m_Age&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	NameType m_Name;</span><br><span class="line">	AgeType m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//Student stu(&quot;夏侯惇&quot;，888);       // 类模板不能进行类型自动推导 </span></span><br><span class="line">	Student&lt;string,<span class="keyword">int</span>&gt;<span class="built_in">stu</span>(<span class="string">&quot;孙悟空&quot;</span>,<span class="number">1000</span>);</span><br><span class="line">	stu.<span class="built_in">Show</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2、类模板和函数模板的区别"><a href="#2、类模板和函数模板的区别" class="headerlink" title="2、类模板和函数模板的区别"></a>2、类模板和函数模板的区别</h2><ul>
<li><p>类模板不可以使用自动类型推导，只能用显示指定类型</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Student stu(&quot;夏侯惇&quot;，888);       // 类模板不能进行类型自动推导 </span></span><br><span class="line">Student&lt;string,<span class="keyword">int</span>&gt;<span class="built_in">stu</span>(<span class="string">&quot;孙悟空&quot;</span>,<span class="number">1000</span>);</span><br></pre></td></tr></table></figure></li>
<li><p>类模板中 可以有默认参数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">NameType</span>,<span class="keyword">class</span> <span class="title">AgeType</span>=</span><span class="keyword">int</span>&gt;</span><br><span class="line">Student&lt;string&gt;<span class="built_in">stu</span>(<span class="string">&quot;猪八戒&quot;</span>，<span class="number">654</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="3、类模板中成员函数创建时机"><a href="#3、类模板中成员函数创建时机" class="headerlink" title="3、类模板中成员函数创建时机"></a>3、类模板中成员函数创建时机</h2><p>类模板中的成员函数  并不是一开始创建的，而是在运行阶段确定出T的数据类型才去创建</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person1</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">showPerson1</span><span class="params">()</span></span>&#123;cout &lt;&lt; <span class="string">&quot;Person1 show 调用&quot;</span> &lt;&lt; endl;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person2</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">showPerson2</span><span class="params">()</span></span>&#123;cout &lt;&lt; <span class="string">&quot;Person2 show 调用&quot;</span> &lt;&lt; endl;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//类模板中的成员函数  并不是一开始创建的，而是在运行阶段确定出T的数据类型才去创建</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">func1</span><span class="params">()</span></span>&#123;obj.<span class="built_in">showPerson1</span>();&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">func2</span><span class="params">()</span></span>&#123;obj.<span class="built_in">showPerson2</span>();&#125;</span><br><span class="line">	T obj;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	MyClass &lt;Person2&gt; p1;</span><br><span class="line">	<span class="comment">//p1.func1();</span></span><br><span class="line">	p1.<span class="built_in">func2</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4、类模板做函数参数"><a href="#4、类模板做函数参数" class="headerlink" title="4、类模板做函数参数"></a>4、类模板做函数参数</h2><ul>
<li><p>指定传入类型</p>
<p><code>void doWork(Person &lt;string, int&gt;&amp;p)</code></p>
</li>
<li><p>参数模板化</p>
<p><code>template&lt;class T1, class T2&gt;</code></p>
<p><code>void doWork2(Person &lt;T1, T2&gt;&amp;p)</code></p>
</li>
<li><p>整个类 模板化</p>
<p><code>template&lt;class T&gt;</code></p>
<p><code>void doWork3( T &amp;p)</code></p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">NameType</span>,<span class="keyword">class</span> <span class="title">AgeType</span>&gt;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Person</span>(NameType name,AgeType age)&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;m_Name=name;</span><br><span class="line">        <span class="keyword">this</span>-&gt;m_Age=age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Show</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	cout&lt;&lt;<span class="string">&quot;name:&quot;</span>&lt;&lt;<span class="keyword">this</span>-&gt;m_Name&lt;&lt;<span class="string">&quot; age:&quot;</span>&lt;&lt;<span class="keyword">this</span>-&gt;m_Age&lt;&lt;endl; </span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    NameType m_Name;</span><br><span class="line">    AgeType m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//指定传入类型 </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DoWork</span><span class="params">(Person&lt;string,<span class="keyword">int</span>&gt; &amp;person)</span></span>&#123;</span><br><span class="line">	person.<span class="built_in">Show</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//参数模板化</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T1</span>,<span class="keyword">class</span> <span class="title">T2</span>&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DoWork1</span><span class="params">(Person&lt;T1,T2&gt; &amp;person)</span></span>&#123;</span><br><span class="line">	person.<span class="built_in">Show</span>();</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">//整个类 模板化 </span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DoWork2</span><span class="params">(T &amp;person)</span></span>&#123;</span><br><span class="line">	person.<span class="built_in">Show</span>();</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Person&lt;string,int&gt; person(&quot;不知好歹&quot;,555);</span><br><span class="line">	<span class="built_in">DoWork</span>(person); </span><br><span class="line">	Person&lt;string,int&gt; person1(&quot;宫本武藏&quot;,666);</span><br><span class="line">	<span class="built_in">DoWork1</span>(person1);</span><br><span class="line">	Person&lt;string,int&gt; person2(&quot;上官婉儿&quot;,777);</span><br><span class="line">	<span class="built_in">DoWork2</span>(person2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5、类模板碰到继承"><a href="#5、类模板碰到继承" class="headerlink" title="5、类模板碰到继承"></a>5、类模板碰到继承</h2><ul>
<li><p>类模板派生普通类</p>
<p>必须要指定出父类中的T数据类型，才能给子类分配内存</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	T m_A;</span><br><span class="line">&#125;; </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span>:</span><span class="keyword">public</span> Base&lt;<span class="keyword">int</span>&gt;&#123;</span><br><span class="line">	</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
<li><p>类模板派生类模板</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base2</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	T m_A;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">T1</span> ,<span class="keyword">class</span> <span class="title">T2</span>&gt;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son2</span> :</span><span class="keyword">public</span> Base2&lt;T2&gt;&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Son2</span>()&#123;</span><br><span class="line">		cout &lt;&lt; <span class="built_in"><span class="keyword">typeid</span></span>(T1).<span class="built_in">name</span>() &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; <span class="built_in"><span class="keyword">typeid</span></span>(T2).<span class="built_in">name</span>() &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	T1 m_B;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Son2 &lt;<span class="keyword">int</span>, <span class="keyword">double</span>&gt; s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="6、类模板类函数的类内、类外实现"><a href="#6、类模板类函数的类内、类外实现" class="headerlink" title="6、类模板类函数的类内、类外实现"></a>6、类模板类函数的类内、类外实现</h2><ul>
<li><p>类内实现</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">NameType</span>, <span class="keyword">class</span> <span class="title">AgeType</span>&gt;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>(NameType name, AgeType age)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;mName = name;</span><br><span class="line">		<span class="keyword">this</span>-&gt;mAge = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">showPerson</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;name: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;mName &lt;&lt; <span class="string">&quot; age: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;mAge &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	NameType mName;</span><br><span class="line">	AgeType mAge;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//Person P1(&quot;德玛西亚&quot;,18); // 类模板不能进行类型自动推导 </span></span><br><span class="line">	Person&lt;string, <span class="keyword">int</span>&gt;<span class="built_in">P1</span>(<span class="string">&quot;德玛西亚&quot;</span>, <span class="number">18</span>);</span><br><span class="line">	P1.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>类外实现   <code>Person&lt;T1, T2&gt;::Person(T1 name, T2 age)&#123; &#125;</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">T1</span>, <span class="keyword">class</span> <span class="title">T2</span>&gt;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>(T1 name, T2 age);</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">showPerson</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	T1 mName;</span><br><span class="line">	T2 mAge;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//类外实现</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">T1</span>, <span class="keyword">class</span> <span class="title">T2</span>&gt;</span></span><br><span class="line">Person&lt;T1, T2&gt;::<span class="built_in">Person</span>(T1 name, T2 age)&#123;</span><br><span class="line">	<span class="keyword">this</span>-&gt;mName = name;</span><br><span class="line">	<span class="keyword">this</span>-&gt;mAge = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">T1</span>, <span class="keyword">class</span> <span class="title">T2</span>&gt;</span></span><br><span class="line"><span class="keyword">void</span> Person&lt;T1, T2&gt;::<span class="built_in">showPerson</span>()&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Name:&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;mName &lt;&lt; <span class="string">&quot; Age:&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;mAge &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Person&lt;string, int&gt; p(&quot;Obama&quot;, 20);</span><br><span class="line">	p.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="7、类模板碰到友元"><a href="#7、类模板碰到友元" class="headerlink" title="7、类模板碰到友元"></a>7、类模板碰到友元</h2><ul>
<li><p>友元类内实现</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T1</span>,<span class="keyword">class</span> <span class="title">T2</span>&gt;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&#123;</span></span><br><span class="line">	<span class="function"><span class="keyword">friend</span> <span class="keyword">void</span> <span class="title">Show</span><span class="params">(Person&lt;T1,T2&gt; &amp;person)</span></span>&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;name:&quot;</span>&lt;&lt;person.m_Name&lt;&lt;<span class="string">&quot;  age:&quot;</span>&lt;&lt;person.m_Age&lt;&lt;endl; </span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>(T1 name,T2 age)&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_Name=name;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_Age=age;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	T1 m_Name;</span><br><span class="line">	T2 m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Person&lt;string,int&gt; person(&quot;西施&quot;,18);</span><br><span class="line">	<span class="built_in">Show1</span>(person);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>友元类外实现</p>
<p>声明：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">friend</span> <span class="keyword">void</span> printPerson2&lt;&gt;(Person&lt;T1, T2&gt; &amp;p);</span><br></pre></td></tr></table></figure>

<p>实现：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">T1</span>,<span class="keyword">class</span> <span class="title">T2</span>&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printPerson2</span><span class="params">(Person&lt;T1, T2&gt; &amp;p)</span></span>&#123; 。。。&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">T1</span>,<span class="keyword">class</span> <span class="title">T2</span>&gt;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">T1</span>,<span class="keyword">class</span> <span class="title">T2</span>&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Show</span><span class="params">(Person&lt;T1, T2&gt; &amp;p)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T1</span>,<span class="keyword">class</span> <span class="title">T2</span>&gt;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&#123;</span></span><br><span class="line">	<span class="keyword">friend</span> <span class="keyword">void</span> Show&lt;&gt;(Person&lt;string,<span class="keyword">int</span>&gt; &amp;person);</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>(T1 name,T2 age)&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_Name=name;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_Age=age;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	T1 m_Name;</span><br><span class="line">	T2 m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">T1</span>,<span class="keyword">class</span> <span class="title">T2</span>&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Show</span><span class="params">(Person&lt;T1, T2&gt;&amp;p)</span></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;性名： &quot;</span> &lt;&lt; p.m_Name &lt;&lt; <span class="string">&quot;  年龄： &quot;</span> &lt;&lt; p.m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Person&lt;string,int&gt; person(&quot;西施&quot;,18);</span><br><span class="line">	<span class="built_in">Show</span>(person);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://smilesrx.github.io/2021/04/21/C++/C++%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/C++%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CandyKing">
      <meta itemprop="description" content="虾米">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逆玺之路">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/04/21/C++/C++%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/C++%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-21 20:23:45" itemprop="dateCreated datePublished" datetime="2021-04-21T20:23:45+08:00">2021-04-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-22 22:50:17" itemprop="dateModified" datetime="2020-10-22T22:50:17+08:00">2020-10-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="C-类型转换"><a href="#C-类型转换" class="headerlink" title="C++类型转换"></a>C++类型转换</h1><p>类型转换(cast)是将一种数据类型转换成另一种数据类型。例如，如果将一个整型值赋给一个浮点类型的变量，编译器会暗地里将其转换成浮点类型。</p>
<p>转换是非常有用的，但是它也会带来一些问题，比如在<strong>转换指针时</strong>，我们很可能将其转换成一个比它更大的类型，但这可能会破坏其他的数据。—–（应该小心类型转换）</p>
<p>标准c++提供了一个显示的转换的语法，来替代旧的C风格的类型转换。</p>
<p>使用C风格的强制转换可以把想要的任何东西转换成我们需要的类型。</p>
<p>新类型的强制转换可以提供更好的控制强制转换过程，允许控制各种不同种类的强制转换。C++风格的强制转换其他的好处是，它们能更清晰的表明它们要干什么。程序员只要扫一眼这样的代码，就能立即知道一个强制转换的目的。</p>
<h1 id="静态类型转换（static-cast）"><a href="#静态类型转换（static-cast）" class="headerlink" title="静态类型转换（static_cast）"></a>静态类型转换（static_cast）</h1><ol>
<li>用于类层次结构中基类（父类）和 派生类（子类）之间指针或引用的转换。<ul>
<li>进行上行转换（把派生类的指针或引用转换成基类表示）是安全的；</li>
<li>进行下行转换（把基类指针或引用转换成派生类表示）时，由于没有动态类型检查，所以是不安全的。</li>
</ul>
</li>
<li>用于基本数据类型之间的转换，如把int转换成char，把char转换成int。这种转换的安全性也要开发人员来保证。</li>
<li>语法：<code>static_cast&lt;目标类型&gt;(原变量/原对象)</code></li>
</ol>
<h2 id="1、基本类型转换（内置类型）"><a href="#1、基本类型转换（内置类型）" class="headerlink" title="1、基本类型转换（内置类型）"></a>1、基本类型转换（内置类型）</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.基本数据类型转换</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">double</span> a=<span class="number">15.05</span>d;</span><br><span class="line">	<span class="keyword">int</span> b=<span class="keyword">static_cast</span>&lt;<span class="keyword">int</span>&gt;(a);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;a=&quot;</span>&lt;&lt;a&lt;&lt;<span class="string">&quot;  b=&quot;</span>&lt;&lt;b&lt;&lt;endl;        <span class="comment">//a=15.05  b=15 </span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">char</span> c=<span class="string">&#x27;A&#x27;</span>;</span><br><span class="line">	<span class="keyword">int</span> d=<span class="keyword">static_cast</span>&lt;<span class="keyword">int</span>&gt;(c);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;c=&quot;</span>&lt;&lt;c&lt;&lt;<span class="string">&quot;  d=&quot;</span>&lt;&lt;d&lt;&lt;endl;       <span class="comment">//c=A  d=65 </span></span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h2 id="2、继承关系父子指针相互转换"><a href="#2、继承关系父子指针相互转换" class="headerlink" title="2、继承关系父子指针相互转换"></a>2、继承关系父子指针相互转换</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//2.继承关系父子指针相互转换</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span>&#123;</span> &#125;;  <span class="comment">//基类 </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span>:</span><span class="keyword">public</span> Base&#123; &#125;;  <span class="comment">//派生类 </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Other</span>&#123;</span> &#125;;  <span class="comment">//其他类 </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Base *base=<span class="keyword">new</span> Base;</span><br><span class="line">	Son *son=<span class="keyword">new</span> Son;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//下行（父转子）---不安全 </span></span><br><span class="line">	Son *son1=<span class="keyword">static_cast</span>&lt;Son *&gt;(base);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//上行（子转父）---安全</span></span><br><span class="line">	Base *base1=<span class="keyword">static_cast</span>&lt;Base *&gt;(son);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3、继承关系父子对象的引用相互转化"><a href="#3、继承关系父子对象的引用相互转化" class="headerlink" title="3、继承关系父子对象的引用相互转化"></a>3、继承关系父子对象的引用相互转化</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//3.继承关系父子对象的引用相互转换</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test03</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Base base;</span><br><span class="line">	Son son;</span><br><span class="line">	Base &amp;base1=base;</span><br><span class="line">	Son &amp;son1=son;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//下行（父转子）---不安全 </span></span><br><span class="line">	Son &amp;son2=<span class="keyword">static_cast</span>&lt;Son &amp;&gt;(base1); </span><br><span class="line">	</span><br><span class="line">	<span class="comment">//上行（子转父）---安全</span></span><br><span class="line">	Base &amp;base2=<span class="keyword">static_cast</span>&lt;Base &amp;&gt;(son1); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4、无继承关系类指针和类对象的引用相互转换—失败"><a href="#4、无继承关系类指针和类对象的引用相互转换—失败" class="headerlink" title="4、无继承关系类指针和类对象的引用相互转换—失败"></a>4、无继承关系类指针和类对象的引用相互转换—失败</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//4.无继承关系类型转换</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test04</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Son *son=<span class="keyword">new</span> Son;</span><br><span class="line">	<span class="comment">//Other *other=static_cast&lt;Other *&gt;(son);   //失败 </span></span><br><span class="line">	</span><br><span class="line">	Base base;</span><br><span class="line">	Base &amp;base1=base;</span><br><span class="line">	<span class="comment">//Other &amp;other=static_cast&lt;Other &amp;&gt;(base1); //失败 	</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="动态类型转换（dynamic-cast）"><a href="#动态类型转换（dynamic-cast）" class="headerlink" title="动态类型转换（dynamic_cast）"></a>动态类型转换（dynamic_cast）</h1><ol>
<li>不许内置数据类型转换 </li>
<li>允许父子之间指针或者引用的转换<ul>
<li>父转子  不安全的  转换失败</li>
<li>子转父  安全  转换成功</li>
<li>如果发生多态，总是安全，可以成功</li>
</ul>
</li>
<li>语法：<code>dynamic_cast&lt;目标类型&gt;(原变量\原对象)</code></li>
</ol>
<h2 id="1、不允许内置数据类型转换"><a href="#1、不允许内置数据类型转换" class="headerlink" title="1、不允许内置数据类型转换"></a>1、不允许内置数据类型转换</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.基本数据类型转换 --- 失败</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">double</span> a=<span class="number">15.05</span>d;</span><br><span class="line">	<span class="comment">//int b=dynamic_cast&lt;int&gt;(a);</span></span><br><span class="line">	<span class="comment">//cout&lt;&lt;&quot;a=&quot;&lt;&lt;a&lt;&lt;&quot;  b=&quot;&lt;&lt;b&lt;&lt;endl;       </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2、父子关系指针、引用（下行）转换—不安全（失败）"><a href="#2、父子关系指针、引用（下行）转换—不安全（失败）" class="headerlink" title="2、父子关系指针、引用（下行）转换—不安全（失败）"></a>2、父子关系指针、引用（下行）转换—不安全（失败）</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//父转子指针、引用</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span>&#123;</span> &#125;;  <span class="comment">//基类 </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span>:</span><span class="keyword">public</span> Base&#123; &#125;;  <span class="comment">//派生类 </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Other</span>&#123;</span> &#125;;  <span class="comment">//其他类 </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Base *base=<span class="keyword">new</span> Base;</span><br><span class="line">	<span class="comment">//Son *son=dynamic_cast&lt;Son *&gt;(base);</span></span><br><span class="line">	</span><br><span class="line">	Base base1;</span><br><span class="line">	Base &amp;base2=base1;</span><br><span class="line">	<span class="comment">//Son &amp;son1=dynamic_cast&lt;Son &amp;&gt;(base2);	</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3、父子关系指针、引用（上行）转换—安全（成功）"><a href="#3、父子关系指针、引用（上行）转换—安全（成功）" class="headerlink" title="3、父子关系指针、引用（上行）转换—安全（成功）"></a>3、父子关系指针、引用（上行）转换—安全（成功）</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//子转父指针、引用</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test03</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Son *son=<span class="keyword">new</span> Son;</span><br><span class="line">	Base *base=<span class="keyword">dynamic_cast</span>&lt;Base *&gt;(son);</span><br><span class="line">	</span><br><span class="line">	Son son1;</span><br><span class="line">	Son &amp;son2=son1;</span><br><span class="line">	Base &amp;base1=<span class="keyword">dynamic_cast</span>&lt;Base &amp;&gt;(son2); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4、无继承关系指针和引用相互转换—失败"><a href="#4、无继承关系指针和引用相互转换—失败" class="headerlink" title="4、无继承关系指针和引用相互转换—失败"></a>4、无继承关系指针和引用相互转换—失败</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//4.无继承关系类型转换</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test04</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Son *son=<span class="keyword">new</span> Son;</span><br><span class="line">	Other *other=<span class="keyword">dynamic_cast</span>&lt;Other *&gt;(son);   <span class="comment">//失败 </span></span><br><span class="line">	</span><br><span class="line">	Base base;</span><br><span class="line">	Base &amp;base1=base;</span><br><span class="line">	Other &amp;other=<span class="keyword">dynamic_cast</span>&lt;Other &amp;&gt;(base1); <span class="comment">//失败 	</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="常量转换（const-cast"><a href="#常量转换（const-cast" class="headerlink" title="常量转换（const_cast)"></a>常量转换（const_cast)</h1><p>该运算符用来修改类型的<code>const</code>属性。</p>
<ol>
<li>只允许 指针或者引用 之间转换<ul>
<li>常量指针和非常量指针相互转换，并且仍然指向原来的对象；</li>
<li>常量引用和非常量引用相互转换，并且仍然指向原来的对象；</li>
</ul>
</li>
<li>语法：<code>const_cast&lt;目标类型&gt;(原变量\原对象)</code></li>
</ol>
<h2 id="1、不能对非指针或非引用进行转换"><a href="#1、不能对非指针或非引用进行转换" class="headerlink" title="1、不能对非指针或非引用进行转换"></a>1、不能对非指针或非引用进行转换</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a=<span class="number">10</span>;</span><br><span class="line">	<span class="comment">//double b=const_cast&lt;double&gt;(a);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2、常量指针和非常量指针相互转换"><a href="#2、常量指针和非常量指针相互转换" class="headerlink" title="2、常量指针和非常量指针相互转换"></a>2、常量指针和非常量指针相互转换</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">int</span> *p=<span class="literal">NULL</span>; <span class="comment">//常量指针</span></span><br><span class="line">	<span class="comment">//int const *p=NULL;  //等价</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">//常量指针转非常量指针 </span></span><br><span class="line">	<span class="keyword">int</span> *pp=<span class="keyword">const_cast</span>&lt;<span class="keyword">int</span> *&gt;(p); </span><br><span class="line">	</span><br><span class="line">	<span class="comment">//非常量指针转常量指针 </span></span><br><span class="line">	<span class="keyword">int</span> <span class="keyword">const</span> *ppp=<span class="keyword">const_cast</span>&lt;<span class="keyword">int</span> <span class="keyword">const</span> *&gt;(pp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3、常量引用和非常量引用相互转化"><a href="#3、常量引用和非常量引用相互转化" class="headerlink" title="3、常量引用和非常量引用相互转化"></a>3、常量引用和非常量引用相互转化</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a=<span class="number">10</span>; </span><br><span class="line">	<span class="keyword">int</span> &amp;b=a;   <span class="comment">//非常量引用</span></span><br><span class="line">	 </span><br><span class="line">	<span class="comment">//非常量引用转常量引用 </span></span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">int</span> &amp;c=<span class="keyword">const_cast</span>&lt;<span class="keyword">const</span> <span class="keyword">int</span> &amp;&gt;(b);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//常量引用转非常量引用</span></span><br><span class="line">	<span class="keyword">int</span> &amp;d=<span class="keyword">const_cast</span>&lt;<span class="keyword">int</span> &amp;&gt;(c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="重新解释转换（reinterpret-cast）"><a href="#重新解释转换（reinterpret-cast）" class="headerlink" title="重新解释转换（reinterpret_cast）"></a>重新解释转换（reinterpret_cast）</h1><p>这是最不安全的一种转换机制，最有可能出问题。</p>
<p>主要用于将一种数据类型从一种类型转换为另一种类型。它可以将一个指针转换成一个整数，也可以将一个整数转换成一个指针.</p>
<h2 id="1、整数和指针之间相互转化—成功（危险）"><a href="#1、整数和指针之间相互转化—成功（危险）" class="headerlink" title="1、整数和指针之间相互转化—成功（危险）"></a>1、整数和指针之间相互转化—成功（危险）</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a=<span class="number">10</span>;</span><br><span class="line">	<span class="keyword">char</span> *p=<span class="keyword">reinterpret_cast</span>&lt;<span class="keyword">char</span> *&gt;(a);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>,a);         <span class="comment">//000000000000000a </span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>,p);         <span class="comment">//000000000000000a </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2、无继承关系之间指针、引用相互转换—成功（危险）"><a href="#2、无继承关系之间指针、引用相互转换—成功（危险）" class="headerlink" title="2、无继承关系之间指针、引用相互转换—成功（危险）"></a>2、无继承关系之间指针、引用相互转换—成功（危险）</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassA</span>&#123;</span> &#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassB</span>&#123;</span> &#125;; </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">//指针相互转换</span></span><br><span class="line">	ClassA *A=<span class="keyword">new</span> ClassA;</span><br><span class="line">	ClassB *B=<span class="keyword">reinterpret_cast</span>&lt;ClassB *&gt;(A); </span><br><span class="line">	</span><br><span class="line">	<span class="comment">//引用转换</span></span><br><span class="line">	ClassA a;</span><br><span class="line">	ClassA &amp;b=a;</span><br><span class="line">	ClassB &amp;c=<span class="keyword">reinterpret_cast</span>&lt;ClassB &amp;&gt;(b); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>










      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">CandyKing</p>
  <div class="site-description" itemprop="description">虾米</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">76</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">CandyKing</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>

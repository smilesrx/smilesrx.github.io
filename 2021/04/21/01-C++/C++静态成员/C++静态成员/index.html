<!DOCTYPE html>
<html lang='zh-CN'>

<head>
  <meta name="generator" content="Hexo 5.4.0">
  <meta charset="utf-8">
  

  <meta http-equiv='x-dns-prefetch-control' content='on' />
  <link rel='dns-prefetch' href='https://cdn.jsdelivr.net'>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>

  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>post - 逆玺之路</title>

  
    <meta name="description" content="什么是staticstatic 是 C&#x2F;C++ 中很常用的修饰符，它被用来控制变量的存储方式和可见性。 1、引入static我们知道在函数内部定义的变量，当程序执行到它的定义处时，编译器为它在栈上分配空间，函数在栈上分配的空间在此函数执行结束时会释放掉，这样就产生了一个问题: 如果想将函数中此变量的值保存至下一次调用时，如何实现？ 最容易想到的方法是定义为全局的变量，但定义一个全局变量有许多缺点，">
<meta property="og:type" content="article">
<meta property="og:title" content="逆玺之路">
<meta property="og:url" content="https://smilesrx.github.io/2021/04/21/01-C++/C++%E9%9D%99%E6%80%81%E6%88%90%E5%91%98/C++%E9%9D%99%E6%80%81%E6%88%90%E5%91%98/index.html">
<meta property="og:site_name" content="逆玺之路">
<meta property="og:description" content="什么是staticstatic 是 C&#x2F;C++ 中很常用的修饰符，它被用来控制变量的存储方式和可见性。 1、引入static我们知道在函数内部定义的变量，当程序执行到它的定义处时，编译器为它在栈上分配空间，函数在栈上分配的空间在此函数执行结束时会释放掉，这样就产生了一个问题: 如果想将函数中此变量的值保存至下一次调用时，如何实现？ 最容易想到的方法是定义为全局的变量，但定义一个全局变量有许多缺点，">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-04-21T12:23:45.372Z">
<meta property="article:modified_time" content="2020-10-26T12:10:48.376Z">
<meta property="article:author" content="CandyKing">
<meta name="twitter:card" content="summary">
  
  

  <!-- feed -->
  

  
    
<link rel="stylesheet" href="/css/main.css">

  

  
</head>

<body>
  


  <div class='l_body' id='start'>
    <aside class='l_left'>
    

<header class='header'>
  <div class='logo-wrap'>
  
    <a class='avatar' href='/about/'>
      
        <img no-lazy class='bg' src='https://cdn.jsdelivr.net/gh/cdn-x/placeholder@1.0.2/avatar/round/rainbow64@3x.webp'/>
      
      <img no-lazy class='avatar' src='http://q1.qlogo.cn/g?b=qq&nk=1607952713&s=640'/>
    </a>
  
  
    <a class='title' href='/'>
      逆玺之路
    </a>
  
</div>

  <nav class="menu dis-select"><a class="nav-item active" href="/">文章</a><a class="nav-item" href="/wiki/">项目</a><a class="nav-item" href="/notes/">笔记</a><a class="nav-item" href="/more/">更多</a></nav>
</header>

<div class='widgets'>
  
    
      
      
<div class="widget-wrap" id="toc"><div class="widget-header h4 dis-select"><span class="name">本文目录</span></div><div class="widget-body fs14 post"><div class="doc-tree active"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%BC%95%E5%85%A5static"><span class="toc-text">1、引入static</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E9%9D%99%E6%80%81%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8"><span class="toc-text">2、静态数据存储</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81static%E4%BF%AE%E9%A5%B0%E5%8F%98%E9%87%8F"><span class="toc-text">1、static修饰变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81static%E4%BF%AE%E9%A5%B0%E5%87%BD%E6%95%B0"><span class="toc-text">2、static修饰函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81static%E4%BF%AE%E9%A5%B0%E5%8F%98%E9%87%8F%EF%BC%88%E7%B1%BB%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F%EF%BC%89"><span class="toc-text">1、static修饰变量（类成员变量）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81static%E4%BF%AE%E9%A5%B0%E5%87%BD%E6%95%B0%EF%BC%88%E7%B1%BB%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0%EF%BC%89"><span class="toc-text">2、static修饰函数（类成员函数）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81const%E9%9D%99%E6%80%81%E6%88%90%E5%91%98%E5%B1%9E%E6%80%A7"><span class="toc-text">3、const静态成员属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="toc-text">1、单例模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%B8%80%E5%8F%B0%E6%89%93%E5%8D%B0%E6%9C%BA%E4%BE%9B%E5%A4%9A%E4%BA%BA%E4%BD%BF%E7%94%A8"><span class="toc-text">2、单例模式实现一台打印机供多人使用</span></a></li></ol></div></div></div>

    
  
</div>


    </aside>
    <div class='l_main'>
      

      


  <div class='bread-nav fs12'>
  
    
    <div id='breadcrumb'>
      <a class='cap breadcrumb' href='/'>主页</a>
      <span class="sep"></span>
      <a class='cap breadcrumb' href='/'>文章</a>
      
    </div>
    <div id='post-meta'>
      发布于&nbsp;<time datetime='2021-04-21T12:23:45.372Z'>2021-04-21</time>
    </div>
  
  </div>


<article class='content md post'>

<h1 id="什么是static"><a href="#什么是static" class="headerlink" title="什么是static"></a>什么是static</h1><p>static 是 C/C++ 中很常用的修饰符，它被用来控制变量的存储方式和可见性。</p>
<h2 id="1、引入static"><a href="#1、引入static" class="headerlink" title="1、引入static"></a>1、引入static</h2><p>我们知道在函数内部定义的变量，当程序执行到它的定义处时，编译器为它在栈上分配空间，函数在栈上分配的空间在此函数执行结束时会释放掉，这样就产生了一个问题: 如果想将函数中此变量的值保存至下一次调用时，如何实现？ 最容易想到的方法是定义为全局的变量，但定义一个全局变量有许多缺点，最明显的缺点是破坏了此变量的访问范围（使得在此函数中定义的变量，不仅仅只受此函数控制）。static 关键字则可以很好的解决这个问题。</p>
<p>另外，在 C++ 中，需要一个数据对象为整个类而非某个对象服务,同时又力求不破坏类的封装性,即要求此成员隐藏在类的内部，对外不可见时，可将其定义为静态数据。</p>
<h2 id="2、静态数据存储"><a href="#2、静态数据存储" class="headerlink" title="2、静态数据存储"></a>2、静态数据存储</h2><ol>
<li><p><strong>全局（静态）存储区</strong>：分为 DATA 段和 BSS 段。</p>
<ul>
<li>DATA 段（全局初始化区）存放初始化的全局变量和静态变量；</li>
<li>BSS 段（全局未初始化区）存放未初始化的全局变量和静态变量。</li>
</ul>
<p>程序运行结束时自动释放。</p>
<p>其中BBS段在程序执行之前会被系统自动清0，所以未初始化的全局变量和静态变量在程序执行之前已经为0。</p>
<p>存储在静态数据区的变量会在程序刚开始运行时就完成初始化，也是唯一的一次初始化。</p>
</li>
<li><p>在 C++ 中 static 的内部实现机制：静态数据成员要在程序一开始运行时就必须存在。因为函数在程序运行中被调用，所以静态数据成员不能在任何函数内分配空间和初始化。故静态数据成员一定要在<strong>类内申明，类外定义</strong>。</p>
<p>注意：</p>
<ul>
<li>静态数据成员要实际地分配空间，故不能在类的声明中定义（只能声明数据成员）。类声明只声明一个类的”尺寸和规格”，并不进行实际的内存分配，所以在类声明中写成定义是错误的。</li>
<li>它也不能在头文件中类声明的外部定义，因为那会造成在多个使用该类的源文件中，对其重复定义。</li>
</ul>
<p>static 被引入以告知编译器，将变量存储在程序的静态存储区而非栈上空间，静态数据成员按定义出现的先后顺序依次初始化，注意静态成员嵌套时，要保证所嵌套的成员已经初始化了。清除时的顺序是初始化的反顺序。</p>
</li>
</ol>
<h1 id="在C中static的作用"><a href="#在C中static的作用" class="headerlink" title="在C中static的作用"></a>在C中static的作用</h1><h2 id="1、static修饰变量"><a href="#1、static修饰变量" class="headerlink" title="1、static修饰变量"></a>1、static修饰变量</h2><ol>
<li><p>修饰局部变量</p>
<ul>
<li><p>普通局部变量：在任何一个函数内部定义的变量（不加static修饰符）</p>
<ul>
<li>作用域：局部作用域</li>
<li>生命周期：函数结束时被清理</li>
<li>编译器一般不对普通局部变量进行初始化，也就是说它的值在初始时是不确定的，除非对其显式赋值。</li>
<li>普通局部变量存储于<strong>进程栈空间</strong>，使用完毕会立即释放。</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> variable;   <span class="comment">//未初始化，结果不定</span></span><br><span class="line">    <span class="keyword">int</span> variable1=<span class="number">10</span>;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;variable=&quot;</span>&lt;&lt;variable&lt;&lt;<span class="string">&quot; variable1=&quot;</span>&lt;&lt;variable1&lt;&lt;endl;</span><br><span class="line">    variable1++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">func</span>();   <span class="comment">//variable=4254465 variable1=10 </span></span><br><span class="line">    <span class="comment">//cout&lt;&lt;&quot;variable=&quot;&lt;&lt;variable&lt;&lt;&quot; variable1=&quot;&lt;&lt;variable1&lt;&lt;endl;  //作用域：局部，func函数外部不可见</span></span><br><span class="line">    <span class="comment">//[Error] &#x27;variable&#x27; was not declared in this scope</span></span><br><span class="line">    <span class="comment">//[Error] &#x27;variable1&#x27; was not declared in this scope</span></span><br><span class="line">    <span class="built_in">func</span>();   <span class="comment">//variable=4254465 variable1=10    //被再次初始化</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>静态局部变量：使用static修饰符定义在任何一个函数内部定义的变量</p>
<ul>
<li><p>作用域：局部作用域</p>
</li>
<li><p>生命周期：程序结束时被清理</p>
</li>
<li><p>即使在声明时未赋初值，编译器也会把它初始化为0。</p>
</li>
<li><p>在首次执行到申明或定义处时被初始化，下次函数调用不会被再次初始化（只进行一次初始化操作）</p>
</li>
<li><p>静态局部变量存储于进程的<strong>全局数据区</strong>，即使函数返回，它的值也会保持不变。</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> variable;   <span class="comment">//被系统初始化为0</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> variable1=<span class="number">10</span>;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;variable=&quot;</span>&lt;&lt;variable&lt;&lt;<span class="string">&quot; variable1=&quot;</span>&lt;&lt;variable1&lt;&lt;endl;</span><br><span class="line">    variable1++;    <span class="comment">//variable1=11</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">func</span>();     <span class="comment">//variable=0 variable1=10 </span></span><br><span class="line">    <span class="comment">//cout&lt;&lt;&quot;variable=&quot;&lt;&lt;variable&lt;&lt;&quot; variable1=&quot;&lt;&lt;variable1&lt;&lt;endl;  //作用域：局部，func函数外部不可见</span></span><br><span class="line">    <span class="comment">//[Error] &#x27;variable&#x27; was not declared in this scope</span></span><br><span class="line">    <span class="comment">//[Error] &#x27;variable1&#x27; was not declared in this scope</span></span><br><span class="line">    <span class="built_in">func</span>();    <span class="comment">//variable=0 variable1=11    //只能进行一次初始化</span></span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>修饰全局变量</p>
<p>全局变量定义在函数体外部，在<strong>全局数据区</strong>分配存储空间，且编译器会自动对其初始化。</p>
<ul>
<li><p>普通全局变量：</p>
<ul>
<li>作用域：对整个工程可见，其他文件可以使用extern外部声明后直接使用</li>
<li>其他文件不能再定义一个与其相同名字的变量了（否则编译器会认为它们是同一个变量）</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.c</span></span><br><span class="line"><span class="keyword">int</span> variable;   <span class="comment">//被系统初始化为0</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;variable=&quot;</span>&lt;&lt;variable&lt;&lt;endl;    <span class="comment">//variable=0 </span></span><br><span class="line">    variable++;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;variable=&quot;</span>&lt;&lt;variable&lt;&lt;endl;    <span class="comment">//variable=1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//other.c</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">int</span> varlable;  <span class="comment">//其他文件外部使用</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> variable;   <span class="comment">//重定义（错）</span></span><br></pre></td></tr></table></figure></li>
<li><p>静态全局变量：</p>
<ul>
<li>作用域：仅对当前文件可见，其他文件不可访问</li>
<li>其他文件可以定义与其同名的变量，两者互不影响</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.c</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> variable;   <span class="comment">//被系统初始化为0</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;variable=&quot;</span>&lt;&lt;variable&lt;&lt;endl;        <span class="comment">//variable=0  </span></span><br><span class="line">    variable=<span class="number">20</span>;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;variable=&quot;</span>&lt;&lt;variable&lt;&lt;endl;        <span class="comment">//variable=20 </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//other.c</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">int</span> varlable;  <span class="comment">//其他文件外部不可访问（错）</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> variable;   <span class="comment">//外部文件自定义变量--不冲突</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h2 id="2、static修饰函数"><a href="#2、static修饰函数" class="headerlink" title="2、static修饰函数"></a>2、static修饰函数</h2><p>函数的使用方式与全局变量类似，在函数的返回类型前加上static，就是静态函数，其特性如下：</p>
<ul>
<li><p>静态函数只能在声明它的文件中可见，其他文件不能引用该函数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.c</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">funcA</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;调用funcA函数&quot;</span>&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">funcA</span>();</span><br><span class="line">    <span class="built_in">funcB</span>();   <span class="comment">//报错，在本文件（main.c）找不到funcB()这个函数</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//other.c</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="title">funcB</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;调用funcB函数&quot;</span>&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>不同的文件可以使用相同名字的静态函数，互不影响</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//file1.c</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;flie1.c文件下调用func函数&quot;</span>&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">func</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//file2.c</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">     cout&lt;&lt;<span class="string">&quot;flie2.c文件下调用func函数&quot;</span>&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">func</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//main.c</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">test1</span>();    <span class="comment">//flie1.c文件下调用func函数</span></span><br><span class="line">    <span class="built_in">test2</span>();    <span class="comment">//flie2.c文件下调用func函数</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="在C-中static的作用"><a href="#在C-中static的作用" class="headerlink" title="在C++中static的作用"></a>在C++中static的作用</h1><h2 id="1、static修饰变量（类成员变量）"><a href="#1、static修饰变量（类成员变量）" class="headerlink" title="1、static修饰变量（类成员变量）"></a>1、static修饰变量（类成员变量）</h2><p>在类内的数据成员前加static关键字修饰，使之成为类内的静态成员</p>
<ol>
<li><p>特点：</p>
<ul>
<li><p>静态数据成员存储在全局数据区，静态数据成员在定义时分配存储空间，所以不能在类声明中定义（在类内申明，类外定义）</p>
<p>类外定义语法：<code>数据类型 类名:: 静态数据成员名=变量值</code></p>
</li>
<li><p>属于类的静态静态资源（只有一个拷贝）</p>
</li>
<li><p>不属于某个对象，在没有实例对象时可直接用类名访问</p>
<p><code>类名::类内的静态数据成员</code></p>
<p>在为对象分配空间中不包括静态成员所占空间。</p>
</li>
<li><p>所有对象共享这个资源，可通过类对象访问</p>
<p><code>对象名.类内的静态数据成员</code></p>
</li>
<li><p>和普通数据成员一样，静态数据成员也遵从<code>public, protected, private</code>访问规则</p>
</li>
</ul>
</li>
<li><p>作用：</p>
<ul>
<li>解决与程序中其它全局名字冲突的问题</li>
<li>实现信息隐藏。静态数据成员可以是private成员，而全局变量不能</li>
</ul>
</li>
<li><p>源码示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//类的静态成员属性</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> m_Number;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//类外初始化，初始化时不加static</span></span><br><span class="line"><span class="keyword">int</span> Student::m_Number=<span class="number">1001</span>;</span><br><span class="line"><span class="keyword">int</span> Student::m_Age=<span class="number">15</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//1. 通过类名直接访问</span></span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;Student::m_Number--学号：&quot;</span>&lt;&lt;Student::m_Number&lt;&lt;endl;     <span class="comment">//Student::m_Number--学号：1001 </span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//2. 通过对象访问</span></span><br><span class="line">    Student stu;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;stu.m_Number--学号：&quot;</span>&lt;&lt;stu.m_Number&lt;&lt;endl;        <span class="comment">//stu.m_Number--学号：1001 </span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//3. 静态成员也有访问权限，类外不能访问私有成员</span></span><br><span class="line">    <span class="comment">//cout&lt;&lt;&quot;年龄：&quot;&lt;&lt;Student::m_Age&lt;&lt;endl;</span></span><br><span class="line">    Student stu1;</span><br><span class="line">    <span class="comment">//cout&lt;&lt;&quot;年龄：&quot;&lt;&lt;stu1.m_Age&lt;&lt;endl;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="2、static修饰函数（类成员函数）"><a href="#2、static修饰函数（类成员函数）" class="headerlink" title="2、static修饰函数（类成员函数）"></a>2、static修饰函数（类成员函数）</h2><p>在类定义中，前面有static说明的成员函数称为静态成员函数</p>
<ol>
<li><p>特点：</p>
<ul>
<li>静态成员函数属于整个类，而不属于某一个对象,只有一份拷贝</li>
</ul>
</li>
</ol>
<ul>
<li>在对象没有创建前，即可通过类名调用<ul>
<li>静态成员函数没有this指针，它无法访问属于类对象的非静态数据成员，也无法访问非静态成员函数，它只能调用静态数据成员和静态成员函数</li>
<li>非静态成员函数可以任意地访问静态成员函数和静态数据成员</li>
<li>静态成员函数也有访问权限</li>
</ul>
</li>
</ul>
<ol start="2">
<li><p>代码示例</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//普通成员函数</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">funcA</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;m_Name=<span class="string">&quot;夏侯惇&quot;</span>;</span><br><span class="line">        <span class="keyword">this</span>-&gt;m_Age=<span class="number">28</span>;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_Number=<span class="string">&quot;1002&quot;</span>; </span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;姓名：&quot;</span>&lt;&lt;m_Name&lt;&lt;<span class="string">&quot; 年龄：&quot;</span>&lt;&lt;m_Age&lt;&lt;<span class="string">&quot; 学号：&quot;</span>&lt;&lt;m_Number&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//静态成员函数</span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">funcB</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//this-&gt;m_Name=&quot;老夫子&quot;;  //不能访问非静态成员(没有this指针)</span></span><br><span class="line">        <span class="comment">//this-&gt;m_Age=26;</span></span><br><span class="line">        m_Number=<span class="string">&quot;1003&quot;</span>;</span><br><span class="line">    	cout&lt;&lt;<span class="string">&quot;姓名：&quot;</span>&lt;&lt;<span class="string">&quot;无法访问&quot;</span>&lt;&lt;<span class="string">&quot; 年龄：&quot;</span>&lt;&lt;m_Age&lt;&lt;<span class="string">&quot; 学号：&quot;</span>&lt;&lt;m_Number&lt;&lt;endl;   </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//类的静态成员属性</span></span><br><span class="line">    string m_Name;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> m_Age;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">funcC</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//this-&gt;m_Name=&quot;凯爹&quot;;  //不能访问非静态成员(没有this指针)</span></span><br><span class="line">        <span class="comment">//this-&gt;m_Age=26;</span></span><br><span class="line">    	m_Number=<span class="string">&quot;1004&quot;</span>;</span><br><span class="line">    	cout&lt;&lt;<span class="string">&quot;姓名：&quot;</span>&lt;&lt;<span class="string">&quot;无法访问&quot;</span>&lt;&lt;<span class="string">&quot; 年龄：&quot;</span>&lt;&lt;m_Age&lt;&lt;<span class="string">&quot; 学号：&quot;</span>&lt;&lt;m_Number&lt;&lt;endl;  </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> string m_Number;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//静态成员属性类外初始化</span></span><br><span class="line"><span class="keyword">int</span> Person::m_Age=<span class="number">15</span>;</span><br><span class="line">string Person::m_Number=<span class="string">&quot;1001&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//1. 类名直接调用--静态成员函数</span></span><br><span class="line">    Person::<span class="built_in">funcB</span>();    <span class="comment">//姓名：无法访问 年龄：15 学号：1003 </span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//2. 通过对象调用</span></span><br><span class="line">    Person person;</span><br><span class="line">    person.<span class="built_in">funcA</span>();       <span class="comment">//姓名：夏侯惇 年龄：28 学号：1002 </span></span><br><span class="line">    person.<span class="built_in">funcB</span>();       <span class="comment">//姓名：无法访问 年龄：28 学号：1003 </span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//3. 静态成员函数也有访问权限</span></span><br><span class="line">    <span class="comment">//Person::funcC();</span></span><br><span class="line">    Person person1;</span><br><span class="line">    <span class="comment">//person1.funcC();</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="3、const静态成员属性"><a href="#3、const静态成员属性" class="headerlink" title="3、const静态成员属性"></a>3、const静态成员属性</h2><p>如果一个类的成员，既要实现共享，又要实现不可改变，那就用 static const 修饰。</p>
<p><strong>定义静态<code>const</code>数据成员时，最好在类内部初始化</strong>。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    string m_Name;</span><br><span class="line">    <span class="built_in">Person</span>(string name):<span class="built_in">m_Name</span>(name)&#123;&#125;;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">static</span> <span class="keyword">int</span> m_Age=<span class="number">30</span>;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> m_Money=<span class="number">1000000</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">Person <span class="title">person</span><span class="params">(<span class="string">&quot;貂蝉&quot;</span>)</span></span>;            <span class="comment">//姓名：貂蝉 年龄：30 身家：1000000 </span></span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;姓名：&quot;</span>&lt;&lt;person.m_Name&lt;&lt;<span class="string">&quot; 年龄：&quot;</span>&lt;&lt;person.m_Age&lt;&lt;<span class="string">&quot; 身家：&quot;</span>&lt;&lt;person.m_Money&lt;&lt;endl;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//不可修改 </span></span><br><span class="line">    <span class="comment">//person.m_Age=45;  </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="静态成员实现单例模式"><a href="#静态成员实现单例模式" class="headerlink" title="静态成员实现单例模式"></a>静态成员实现单例模式</h1><h2 id="1、单例模式"><a href="#1、单例模式" class="headerlink" title="1、单例模式"></a>1、单例模式</h2><p>单例模式是一种常用的软件设计模式。在它的核心结构中只包含一个被称为单例的特殊类。</p>
<p>通过单例模式可以保证系统中一个类只有一个实例而且该实例易于外界访问，从而方便对实例个数的控制并节约系统资源。</p>
<p>如果希望在系统中某个类的对象只能存在一个，单例模式是最好的解决方案。</p>
<p>Singleton（单例）：在单例类的内部实现只生成一个实例，同时它提供一个静态的<code>getInstance()</code>工厂方法，让客户可以访问它的唯一实例；为了防止在外部对其实例化，<strong>将其默认构造函数和拷贝构造函数设计为私有</strong>；在单例类内部定义了一个Singleton类型的静态对象，作为外部共享的唯一实例。</p>
<h2 id="2、单例模式实现一台打印机供多人使用"><a href="#2、单例模式实现一台打印机供多人使用" class="headerlink" title="2、单例模式实现一台打印机供多人使用"></a>2、单例模式实现一台打印机供多人使用</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//打印机类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Printer</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">static</span> Printer *<span class="title">getInstance</span><span class="params">()</span></span>&#123;<span class="keyword">return</span> Pprinter;&#125;</span><br><span class="line">	<span class="keyword">int</span> m_Print_Times;   <span class="comment">//打印次数</span></span><br><span class="line">    string m_Model;     <span class="comment">//打印机型号</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="built_in">Printer</span>()</span><br><span class="line">	&#123;</span><br><span class="line">		m_Model=<span class="string">&quot;喵喵&quot;</span>;</span><br><span class="line">		m_Print_Times=<span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Printer</span>(<span class="keyword">const</span> Printer&amp; printer)&#123;&#125;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">static</span> Printer *Pprinter;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Printer* Printer::Pprinter = <span class="keyword">new</span> Printer;</span><br><span class="line"><span class="comment">//Printer* printer=Printer::getInstance();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//员工类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Employee</span>(string name)</span><br><span class="line">	&#123;</span><br><span class="line">		m_Name=name;</span><br><span class="line">		printer=Printer::<span class="built_in">getInstance</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">(string text)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;员工：&quot;</span>&lt;&lt;m_Name&lt;&lt;<span class="string">&quot;正在使用：&quot;</span>&lt;&lt;printer-&gt;m_Model&lt;&lt;<span class="string">&quot;打印机打印：&quot;</span>&lt;&lt;text&lt;&lt;endl;</span><br><span class="line">		cout&lt;&lt;printer-&gt;m_Model&lt;&lt;<span class="string">&quot;打印机已被使用：&quot;</span>&lt;&lt;++printer-&gt;m_Print_Times&lt;&lt;<span class="string">&quot;次&quot;</span>&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">    string m_Name;</span><br><span class="line">    Printer* printer;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">Employee <span class="title">employee</span><span class="params">(<span class="string">&quot;财务小姐姐&quot;</span>)</span></span>;</span><br><span class="line">	employee.<span class="built_in">Print</span>(<span class="string">&quot;你的工资已被本仙女没收了&quot;</span>);</span><br><span class="line">	</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;---------------------------&quot;</span>&lt;&lt;endl;</span><br><span class="line">	</span><br><span class="line">	<span class="function">Employee <span class="title">employee1</span><span class="params">(<span class="string">&quot;前台小姐姐&quot;</span>)</span></span>;</span><br><span class="line">	employee1.<span class="built_in">Print</span>(<span class="string">&quot;今晚有空有我家吗&quot;</span>); </span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span>(employee.printer==employee1.printer)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;endl&lt;&lt;<span class="string">&quot;公司只有一台名为：&quot;</span>&lt;&lt;employee.printer-&gt;m_Model&lt;&lt;<span class="string">&quot;的打印机&quot;</span>&lt;&lt;endl; </span><br><span class="line">	&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<div class="article-footer fs14"><section id="license"><div class="header"><span>许可协议</span></div><div class="body"><p>本文采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">署名-非商业性使用-相同方式共享 4.0 国际</a> 许可协议，转载请注明出处。</p>
</div></section></div>

</article>

<div class="related-wrap" id="read-next"><section class="header cap theme"><span>接下来阅读</span></section><section class="body"><div class="post-title h2"><a href="/2021/04/21/01-C++/C++%E7%BB%A7%E6%89%BF-%E6%B4%BE%E7%94%9F/%E7%BB%A7%E6%89%BF-%E6%B4%BE%E7%94%9F/">undefined</a></div><div class="post-title fs14"><a href="/2021/04/21/01-C++/C++%E7%B1%BB%E6%A8%A1%E6%9D%BF%E5%B0%81%E8%A3%85%E4%BB%BB%E6%84%8F%E7%B1%BB%E5%9E%8B%E6%95%B0%E7%BB%84/C++%E7%B1%BB%E6%A8%A1%E6%9D%BF%E5%B0%81%E8%A3%85%E4%BB%BB%E6%84%8F%E6%95%B0%E7%BB%84/">上一篇：undefined</a></div></section></div>








      
<footer class="page-footer fs12"><hr><div><p>本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议，转载请注明出处。</p>
<p>本站由 <a href="https://smilesrx.github.io/">@CandyKing</a> 创建，使用 <a target="_blank" rel="noopener" href="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.1.0">Stellar</a> 作为主题。</p>
</div></footer>

      <div class='float-panel mobile-only' style='display:none'>
  <button type='button' class='sidebar-toggle mobile' onclick='sidebar.toggle()'>
    <svg class="icon" viewBox="0 0 1228 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2849"><path d="M0 0m97.390199 0l973.901995 0q97.390199 0 97.390199 97.390199l0 0q0 97.390199-97.390199 97.3902l-973.901995 0q-97.390199 0-97.390199-97.3902l0 0q0-97.390199 97.390199-97.390199Z" p-id="2850"></path><path d="M0 389.560798m97.390199 0l973.901995 0q97.390199 0 97.390199 97.390199l0 0q0 97.390199-97.390199 97.3902l-973.901995 0q-97.390199 0-97.390199-97.3902l0 0q0-97.390199 97.390199-97.390199Z" p-id="2851"></path><path d="M0 779.121596m97.390199 0l973.901995 0q97.390199 0 97.390199 97.390199l0 0q0 97.390199-97.390199 97.390199l-973.901995 0q-97.390199 0-97.390199-97.390199l0 0q0-97.390199 97.390199-97.390199Z" p-id="2852"></path></svg>
  </button>
</div>

    </div>
  </div>
  <div class='scripts'>
    <script type="text/javascript">
  stellar = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    loadCSS: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    // 从 butterfly 和 volantis 获得灵感
    loadScript: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script')
      script.src = src
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    // https://github.com/jerryc127/hexo-theme-butterfly
    jQuery: (fn) => {
      if (typeof jQuery === 'undefined') {
        stellar.loadScript(stellar.plugins.jQuery).then(fn)
      } else {
        fn()
      }
    }
  };
  stellar.github = 'https://github.com/xaoxuu/hexo-theme-stellar/tree/1.1.0';
  stellar.config = {
    date_suffix: {
      just: '刚刚',
      min: '分钟前',
      hour: '小时前',
      day: '天前',
      month: '个月前',
    },
  };

  // required plugins (only load if needs)
  stellar.plugins = {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js',
    sitesjs: '/js/plugins/sites.js',
    friendsjs: '/js/plugins/friends.js',
  };

  // optional plugins
  if ('true' == 'true') {
    stellar.plugins.lazyload = Object.assign({"enable":true,"js":"https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.3.1/dist/lazyload.min.js","transition":"blur"});
  }
  if ('true' == 'true') {
    stellar.plugins.swiper = Object.assign({"enable":true,"css":"https://unpkg.com/swiper/swiper-bundle.min.css","js":"https://unpkg.com/swiper/swiper-bundle.min.js"});
  }
  if ('' == 'true') {
    stellar.plugins.scrollreveal = Object.assign({"enable":null,"js":"https://cdn.jsdelivr.net/npm/scrollreveal@4.0.9/dist/scrollreveal.min.js","distance":"8px","duration":500,"interval":100,"scale":1});
  }
  if ('true' == 'true') {
    stellar.plugins.preload = Object.assign({"enable":true,"service":"flying_pages","instant_page":"https://cdn.jsdelivr.net/gh/volantis-x/cdn-volantis@4.1.2/js/instant_page.js","flying_pages":"https://cdn.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"});
  }
</script>

<!-- required -->

  
<script src="/js/main.js" async></script>



<!-- optional -->



<!-- inject -->


  </div>
</body>
</html>
